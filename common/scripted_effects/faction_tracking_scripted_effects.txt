######################################
####### GENERATED CODE WARNING #######
######################################
# This file is generated code - any
# changes made directly to these files
# will likely be lost on future
# updates. If you need to tweak the
# functionality in this file, please
# contact wtchappell ('the witch') for
# help in improving its functionality.
######################################
####### GENERATED CODE WARNING #######
######################################
create_or_join_nova_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_nova_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			nova_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = nova_legion
		mark_as_nova_legion_member = yes
		set_variable = { GLOBAL.nova_legion_leader = THIS }
	}
	else = {
		join_nova_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_nova_legion (scripted_effect) exited"
	}
}

d_join_nova_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to nova_legion..."
	create_or_join_nova_legion = yes
}

ask_to_join_nova_legion = {
	custom_effect_tooltip = ask_to_join_nova_legion_tt
	hidden_effect = {
		var:GLOBAL.nova_legion_leader = {
			country_event = {
				id = nova_legion_faction_events.1
			}
		}
	}
}

invite_to_nova_legion = {
	custom_effect_tooltip = invite_to_nova_legion_tt
	hidden_effect = {
		country_event = {
			id = nova_legion_faction_events.5
		}
	}
}

join_nova_legion = {
	custom_effect_tooltip = join_nova_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_nova_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_nova_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.nova_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_nova_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_nova_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_nova_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_nova_legion (scripted_effect) exited"
		}
	}
}

leave_nova_legion = {
	custom_effect_tooltip = leave_nova_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_nova_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_nova_legion_member = yes }
			unmark_as_nova_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_nova_legion (scripted_effect) exited"
		}
	}
}

mark_as_nova_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_nova_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_nova_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TTM }
		add_to_array = { GLOBAL.nova_legion_members = THIS }
		add_nova_legion_ally_strategies = yes
		#add_nova_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_nova_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_nova_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_nova_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_nova_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_nova_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_nova_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_nova_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_nova_legion_member = yes }
		remove_nova_legion_ally_strategies = yes
		#remove_nova_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.nova_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_nova_legion_member = yes
			}
			unmark_as_nova_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_nova_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_nova_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_nova_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_nova_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_nova_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_nova_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_nova_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_nova_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_nova_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_nova_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_nova_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_chosen_ones = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_chosen_ones (scripted_effect) entered"
	}
	if = {
		limit = {
			chosen_ones_exists = no
		}
		leave_current_faction = yes
		create_faction = chosen_ones
		mark_as_chosen_ones_member = yes
		set_variable = { GLOBAL.chosen_ones_leader = THIS }
	}
	else = {
		join_chosen_ones = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_chosen_ones (scripted_effect) exited"
	}
}

d_join_chosen_ones = {
	log = "[GetDateText]: Adding [This.GetNameDef] to chosen_ones..."
	create_or_join_chosen_ones = yes
}

ask_to_join_chosen_ones = {
	custom_effect_tooltip = ask_to_join_chosen_ones_tt
	hidden_effect = {
		var:GLOBAL.chosen_ones_leader = {
			country_event = {
				id = chosen_ones_faction_events.1
			}
		}
	}
}

invite_to_chosen_ones = {
	custom_effect_tooltip = invite_to_chosen_ones_tt
	hidden_effect = {
		country_event = {
			id = chosen_ones_faction_events.5
		}
	}
}

join_chosen_ones = {
	custom_effect_tooltip = join_chosen_ones_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_chosen_ones (scripted_effect) entered"
		}
		if = {
			limit = { is_chosen_ones_member = no }
			leave_current_faction = yes
			var:GLOBAL.chosen_ones_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_chosen_ones - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_chosen_ones - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_chosen_ones_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_chosen_ones (scripted_effect) exited"
		}
	}
}

leave_chosen_ones = {
	custom_effect_tooltip = leave_chosen_ones_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_chosen_ones (scripted_effect) entered"
		}
		if = {
			limit = { is_chosen_ones_member = yes }
			unmark_as_chosen_ones_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_chosen_ones (scripted_effect) exited"
		}
	}
}

mark_as_chosen_ones_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_chosen_ones_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_chosen_ones_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = ARR }
		add_to_array = { GLOBAL.chosen_ones_members = THIS }
		add_chosen_ones_ally_strategies = yes
		#add_chosen_ones_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_chosen_ones_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_chosen_ones_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_chosen_ones_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_chosen_ones_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_chosen_ones_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_chosen_ones_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_chosen_ones_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_chosen_ones_member = yes }
		remove_chosen_ones_ally_strategies = yes
		#remove_chosen_ones_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.chosen_ones_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_chosen_ones_member = yes
			}
			unmark_as_chosen_ones_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_chosen_ones_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_chosen_ones_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_chosen_ones_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_chosen_ones_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_chosen_ones_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_chosen_ones_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_chosen_ones_ally_strategies (scripted_effect) exited"
	}
}

remove_chosen_ones_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_chosen_ones_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_chosen_ones_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_chosen_ones_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_lanius_horde = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_lanius_horde (scripted_effect) entered"
	}
	if = {
		limit = {
			lanius_horde_exists = no
		}
		leave_current_faction = yes
		create_faction = lanius_horde
		mark_as_lanius_horde_member = yes
		set_variable = { GLOBAL.lanius_horde_leader = THIS }
	}
	else = {
		join_lanius_horde = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_lanius_horde (scripted_effect) exited"
	}
}

d_join_lanius_horde = {
	log = "[GetDateText]: Adding [This.GetNameDef] to lanius_horde..."
	create_or_join_lanius_horde = yes
}

ask_to_join_lanius_horde = {
	custom_effect_tooltip = ask_to_join_lanius_horde_tt
	hidden_effect = {
		var:GLOBAL.lanius_horde_leader = {
			country_event = {
				id = lanius_horde_faction_events.1
			}
		}
	}
}

invite_to_lanius_horde = {
	custom_effect_tooltip = invite_to_lanius_horde_tt
	hidden_effect = {
		country_event = {
			id = lanius_horde_faction_events.5
		}
	}
}

join_lanius_horde = {
	custom_effect_tooltip = join_lanius_horde_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_lanius_horde (scripted_effect) entered"
		}
		if = {
			limit = { is_lanius_horde_member = no }
			leave_current_faction = yes
			var:GLOBAL.lanius_horde_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_lanius_horde - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_lanius_horde - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_lanius_horde_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_lanius_horde (scripted_effect) exited"
		}
	}
}

leave_lanius_horde = {
	custom_effect_tooltip = leave_lanius_horde_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_lanius_horde (scripted_effect) entered"
		}
		if = {
			limit = { is_lanius_horde_member = yes }
			unmark_as_lanius_horde_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_lanius_horde (scripted_effect) exited"
		}
	}
}

mark_as_lanius_horde_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_lanius_horde_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_lanius_horde_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = LAC }
		add_to_array = { GLOBAL.lanius_horde_members = THIS }
		add_lanius_horde_ally_strategies = yes
		#add_lanius_horde_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_lanius_horde_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_lanius_horde_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_lanius_horde_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_lanius_horde_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_lanius_horde_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_lanius_horde_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_lanius_horde_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_lanius_horde_member = yes }
		remove_lanius_horde_ally_strategies = yes
		#remove_lanius_horde_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.lanius_horde_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_lanius_horde_member = yes
			}
			unmark_as_lanius_horde_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_lanius_horde_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_lanius_horde_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_lanius_horde_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_lanius_horde_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_lanius_horde_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_lanius_horde_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_lanius_horde_ally_strategies (scripted_effect) exited"
	}
}

remove_lanius_horde_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_lanius_horde_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_lanius_horde_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_lanius_horde_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_big_mt = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_big_mt (scripted_effect) entered"
	}
	if = {
		limit = {
			big_mt_exists = no
		}
		leave_current_faction = yes
		create_faction = big_mt
		mark_as_big_mt_member = yes
		set_variable = { GLOBAL.big_mt_leader = THIS }
	}
	else = {
		join_big_mt = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_big_mt (scripted_effect) exited"
	}
}

d_join_big_mt = {
	log = "[GetDateText]: Adding [This.GetNameDef] to big_mt..."
	create_or_join_big_mt = yes
}

ask_to_join_big_mt = {
	custom_effect_tooltip = ask_to_join_big_mt_tt
	hidden_effect = {
		var:GLOBAL.big_mt_leader = {
			country_event = {
				id = big_mt_faction_events.1
			}
		}
	}
}

invite_to_big_mt = {
	custom_effect_tooltip = invite_to_big_mt_tt
	hidden_effect = {
		country_event = {
			id = big_mt_faction_events.5
		}
	}
}

join_big_mt = {
	custom_effect_tooltip = join_big_mt_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_big_mt (scripted_effect) entered"
		}
		if = {
			limit = { is_big_mt_member = no }
			leave_current_faction = yes
			var:GLOBAL.big_mt_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_big_mt - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_big_mt - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_big_mt_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_big_mt (scripted_effect) exited"
		}
	}
}

leave_big_mt = {
	custom_effect_tooltip = leave_big_mt_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_big_mt (scripted_effect) entered"
		}
		if = {
			limit = { is_big_mt_member = yes }
			unmark_as_big_mt_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_big_mt (scripted_effect) exited"
		}
	}
}

mark_as_big_mt_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_big_mt_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_big_mt_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TNK }
		add_to_array = { GLOBAL.big_mt_members = THIS }
		add_big_mt_ally_strategies = yes
		#add_big_mt_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_big_mt_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_big_mt_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_big_mt_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_big_mt_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_big_mt_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_big_mt_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_big_mt_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_big_mt_member = yes }
		remove_big_mt_ally_strategies = yes
		#remove_big_mt_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.big_mt_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_big_mt_member = yes
			}
			unmark_as_big_mt_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_big_mt_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_big_mt_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_big_mt_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_big_mt_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_big_mt_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_big_mt_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_big_mt_ally_strategies (scripted_effect) exited"
	}
}

remove_big_mt_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_big_mt_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_big_mt_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_big_mt_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_boneyard_brotherhood = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_boneyard_brotherhood (scripted_effect) entered"
	}
	if = {
		limit = {
			boneyard_brotherhood_exists = no
		}
		leave_current_faction = yes
		create_faction = boneyard_brotherhood
		mark_as_boneyard_brotherhood_member = yes
		set_variable = { GLOBAL.boneyard_brotherhood_leader = THIS }
	}
	else = {
		join_boneyard_brotherhood = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_boneyard_brotherhood (scripted_effect) exited"
	}
}

d_join_boneyard_brotherhood = {
	log = "[GetDateText]: Adding [This.GetNameDef] to boneyard_brotherhood..."
	create_or_join_boneyard_brotherhood = yes
}

ask_to_join_boneyard_brotherhood = {
	custom_effect_tooltip = ask_to_join_boneyard_brotherhood_tt
	hidden_effect = {
		var:GLOBAL.boneyard_brotherhood_leader = {
			country_event = {
				id = boneyard_brotherhood_faction_events.1
			}
		}
	}
}

invite_to_boneyard_brotherhood = {
	custom_effect_tooltip = invite_to_boneyard_brotherhood_tt
	hidden_effect = {
		country_event = {
			id = boneyard_brotherhood_faction_events.5
		}
	}
}

join_boneyard_brotherhood = {
	custom_effect_tooltip = join_boneyard_brotherhood_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_boneyard_brotherhood (scripted_effect) entered"
		}
		if = {
			limit = { is_boneyard_brotherhood_member = no }
			leave_current_faction = yes
			var:GLOBAL.boneyard_brotherhood_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_boneyard_brotherhood - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_boneyard_brotherhood - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_boneyard_brotherhood_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_boneyard_brotherhood (scripted_effect) exited"
		}
	}
}

leave_boneyard_brotherhood = {
	custom_effect_tooltip = leave_boneyard_brotherhood_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_boneyard_brotherhood (scripted_effect) entered"
		}
		if = {
			limit = { is_boneyard_brotherhood_member = yes }
			unmark_as_boneyard_brotherhood_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_boneyard_brotherhood (scripted_effect) exited"
		}
	}
}

mark_as_boneyard_brotherhood_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_boneyard_brotherhood_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_boneyard_brotherhood_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BON }
		add_to_array = { GLOBAL.boneyard_brotherhood_members = THIS }
		add_boneyard_brotherhood_ally_strategies = yes
		#add_boneyard_brotherhood_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_boneyard_brotherhood_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_boneyard_brotherhood_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_boneyard_brotherhood_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_boneyard_brotherhood_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_boneyard_brotherhood_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_boneyard_brotherhood_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_boneyard_brotherhood_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_boneyard_brotherhood_member = yes }
		remove_boneyard_brotherhood_ally_strategies = yes
		#remove_boneyard_brotherhood_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.boneyard_brotherhood_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_boneyard_brotherhood_member = yes
			}
			unmark_as_boneyard_brotherhood_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_boneyard_brotherhood_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_boneyard_brotherhood_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_boneyard_brotherhood_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_boneyard_brotherhood_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_boneyard_brotherhood_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_boneyard_brotherhood_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_boneyard_brotherhood_ally_strategies (scripted_effect) exited"
	}
}

remove_boneyard_brotherhood_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_boneyard_brotherhood_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_boneyard_brotherhood_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_boneyard_brotherhood_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_united_front = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_united_front (scripted_effect) entered"
	}
	if = {
		limit = {
			united_front_exists = no
		}
		leave_current_faction = yes
		create_faction = united_front
		mark_as_united_front_member = yes
		set_variable = { GLOBAL.united_front_leader = THIS }
	}
	else = {
		join_united_front = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_united_front (scripted_effect) exited"
	}
}

d_join_united_front = {
	log = "[GetDateText]: Adding [This.GetNameDef] to united_front..."
	create_or_join_united_front = yes
}

ask_to_join_united_front = {
	custom_effect_tooltip = ask_to_join_united_front_tt
	hidden_effect = {
		var:GLOBAL.united_front_leader = {
			country_event = {
				id = united_front_faction_events.1
			}
		}
	}
}

invite_to_united_front = {
	custom_effect_tooltip = invite_to_united_front_tt
	hidden_effect = {
		country_event = {
			id = united_front_faction_events.5
		}
	}
}

join_united_front = {
	custom_effect_tooltip = join_united_front_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_united_front (scripted_effect) entered"
		}
		if = {
			limit = { is_united_front_member = no }
			leave_current_faction = yes
			var:GLOBAL.united_front_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_united_front - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_united_front - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_united_front_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_united_front (scripted_effect) exited"
		}
	}
}

leave_united_front = {
	custom_effect_tooltip = leave_united_front_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_united_front (scripted_effect) entered"
		}
		if = {
			limit = { is_united_front_member = yes }
			unmark_as_united_front_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_united_front (scripted_effect) exited"
		}
	}
}

mark_as_united_front_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_united_front_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_united_front_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = HXL }
		add_to_array = { GLOBAL.united_front_members = THIS }
		add_united_front_ally_strategies = yes
		#add_united_front_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_united_front_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_united_front_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_united_front_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_united_front_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_united_front_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_united_front_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_united_front_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_united_front_member = yes }
		remove_united_front_ally_strategies = yes
		#remove_united_front_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.united_front_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_united_front_member = yes
			}
			unmark_as_united_front_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_united_front_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_united_front_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_united_front_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_united_front_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_united_front_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_united_front_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_united_front_ally_strategies (scripted_effect) exited"
	}
}

remove_united_front_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_united_front_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_united_front_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_united_front_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_western_brotherhood_of_steel = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_western_brotherhood_of_steel (scripted_effect) entered"
	}
	if = {
		limit = {
			western_brotherhood_of_steel_exists = no
		}
		leave_current_faction = yes
		create_faction = western_brotherhood_of_steel
		mark_as_western_brotherhood_of_steel_member = yes
		set_variable = { GLOBAL.western_brotherhood_of_steel_leader = THIS }
	}
	else = {
		join_western_brotherhood_of_steel = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_western_brotherhood_of_steel (scripted_effect) exited"
	}
}

d_join_western_brotherhood_of_steel = {
	log = "[GetDateText]: Adding [This.GetNameDef] to western_brotherhood_of_steel..."
	create_or_join_western_brotherhood_of_steel = yes
}

ask_to_join_western_brotherhood_of_steel = {
	custom_effect_tooltip = ask_to_join_western_brotherhood_of_steel_tt
	hidden_effect = {
		var:GLOBAL.western_brotherhood_of_steel_leader = {
			country_event = {
				id = western_brotherhood_of_steel_faction_events.1
			}
		}
	}
}

invite_to_western_brotherhood_of_steel = {
	custom_effect_tooltip = invite_to_western_brotherhood_of_steel_tt
	hidden_effect = {
		country_event = {
			id = western_brotherhood_of_steel_faction_events.5
		}
	}
}

join_western_brotherhood_of_steel = {
	custom_effect_tooltip = join_western_brotherhood_of_steel_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_western_brotherhood_of_steel (scripted_effect) entered"
		}
		if = {
			limit = { is_western_brotherhood_of_steel_member = no }
			leave_current_faction = yes
			var:GLOBAL.western_brotherhood_of_steel_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_western_brotherhood_of_steel - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_western_brotherhood_of_steel - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_western_brotherhood_of_steel_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_western_brotherhood_of_steel (scripted_effect) exited"
		}
	}
}

leave_western_brotherhood_of_steel = {
	custom_effect_tooltip = leave_western_brotherhood_of_steel_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_western_brotherhood_of_steel (scripted_effect) entered"
		}
		if = {
			limit = { is_western_brotherhood_of_steel_member = yes }
			unmark_as_western_brotherhood_of_steel_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_western_brotherhood_of_steel (scripted_effect) exited"
		}
	}
}

mark_as_western_brotherhood_of_steel_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_western_brotherhood_of_steel_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_western_brotherhood_of_steel_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BOS }
		add_to_array = { GLOBAL.western_brotherhood_of_steel_members = THIS }
		add_western_brotherhood_of_steel_ally_strategies = yes
		#add_western_brotherhood_of_steel_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_western_brotherhood_of_steel_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_western_brotherhood_of_steel_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_western_brotherhood_of_steel_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_western_brotherhood_of_steel_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_western_brotherhood_of_steel_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_western_brotherhood_of_steel_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_western_brotherhood_of_steel_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_western_brotherhood_of_steel_member = yes }
		remove_western_brotherhood_of_steel_ally_strategies = yes
		#remove_western_brotherhood_of_steel_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.western_brotherhood_of_steel_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_western_brotherhood_of_steel_member = yes
			}
			unmark_as_western_brotherhood_of_steel_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_western_brotherhood_of_steel_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_western_brotherhood_of_steel_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_western_brotherhood_of_steel_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_western_brotherhood_of_steel_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_western_brotherhood_of_steel_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_western_brotherhood_of_steel_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_western_brotherhood_of_steel_ally_strategies (scripted_effect) exited"
	}
}

remove_western_brotherhood_of_steel_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_western_brotherhood_of_steel_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_western_brotherhood_of_steel_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_western_brotherhood_of_steel_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_caesars_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_caesars_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			caesars_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = caesars_legion
		mark_as_caesars_legion_member = yes
		set_variable = { GLOBAL.caesars_legion_leader = THIS }
	}
	else = {
		join_caesars_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_caesars_legion (scripted_effect) exited"
	}
}

d_join_caesars_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to caesars_legion..."
	create_or_join_caesars_legion = yes
}

ask_to_join_caesars_legion = {
	custom_effect_tooltip = ask_to_join_caesars_legion_tt
	hidden_effect = {
		var:GLOBAL.caesars_legion_leader = {
			country_event = {
				id = caesars_legion_faction_events.1
			}
		}
	}
}

invite_to_caesars_legion = {
	custom_effect_tooltip = invite_to_caesars_legion_tt
	hidden_effect = {
		country_event = {
			id = caesars_legion_faction_events.5
		}
	}
}

join_caesars_legion = {
	custom_effect_tooltip = join_caesars_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_caesars_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_caesars_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.caesars_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_caesars_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_caesars_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_caesars_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_caesars_legion (scripted_effect) exited"
		}
	}
}

leave_caesars_legion = {
	custom_effect_tooltip = leave_caesars_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_caesars_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_caesars_legion_member = yes }
			unmark_as_caesars_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_caesars_legion (scripted_effect) exited"
		}
	}
}

mark_as_caesars_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_caesars_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_caesars_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = CES }
		add_to_array = { GLOBAL.caesars_legion_members = THIS }
		add_caesars_legion_ally_strategies = yes
		#add_caesars_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_caesars_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_caesars_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_caesars_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_caesars_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_caesars_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_caesars_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_caesars_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_caesars_legion_member = yes }
		remove_caesars_legion_ally_strategies = yes
		#remove_caesars_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.caesars_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_caesars_legion_member = yes
			}
			unmark_as_caesars_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_caesars_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_caesars_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_caesars_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_caesars_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_caesars_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_caesars_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_caesars_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_caesars_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_caesars_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_caesars_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_caesars_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_children_of_mexico = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_children_of_mexico (scripted_effect) entered"
	}
	if = {
		limit = {
			children_of_mexico_exists = no
		}
		leave_current_faction = yes
		create_faction = children_of_mexico
		mark_as_children_of_mexico_member = yes
		set_variable = { GLOBAL.children_of_mexico_leader = THIS }
	}
	else = {
		join_children_of_mexico = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_children_of_mexico (scripted_effect) exited"
	}
}

d_join_children_of_mexico = {
	log = "[GetDateText]: Adding [This.GetNameDef] to children_of_mexico..."
	create_or_join_children_of_mexico = yes
}

ask_to_join_children_of_mexico = {
	custom_effect_tooltip = ask_to_join_children_of_mexico_tt
	hidden_effect = {
		var:GLOBAL.children_of_mexico_leader = {
			country_event = {
				id = children_of_mexico_faction_events.1
			}
		}
	}
}

invite_to_children_of_mexico = {
	custom_effect_tooltip = invite_to_children_of_mexico_tt
	hidden_effect = {
		country_event = {
			id = children_of_mexico_faction_events.5
		}
	}
}

join_children_of_mexico = {
	custom_effect_tooltip = join_children_of_mexico_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_children_of_mexico (scripted_effect) entered"
		}
		if = {
			limit = { is_children_of_mexico_member = no }
			leave_current_faction = yes
			var:GLOBAL.children_of_mexico_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_children_of_mexico - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_children_of_mexico - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_children_of_mexico_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_children_of_mexico (scripted_effect) exited"
		}
	}
}

leave_children_of_mexico = {
	custom_effect_tooltip = leave_children_of_mexico_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_children_of_mexico (scripted_effect) entered"
		}
		if = {
			limit = { is_children_of_mexico_member = yes }
			unmark_as_children_of_mexico_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_children_of_mexico (scripted_effect) exited"
		}
	}
}

mark_as_children_of_mexico_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_children_of_mexico_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_children_of_mexico_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = ARM }
		add_to_array = { GLOBAL.children_of_mexico_members = THIS }
		add_children_of_mexico_ally_strategies = yes
		#add_children_of_mexico_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_children_of_mexico_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_children_of_mexico_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_children_of_mexico_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_children_of_mexico_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_children_of_mexico_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_children_of_mexico_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_children_of_mexico_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_children_of_mexico_member = yes }
		remove_children_of_mexico_ally_strategies = yes
		#remove_children_of_mexico_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.children_of_mexico_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_children_of_mexico_member = yes
			}
			unmark_as_children_of_mexico_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_children_of_mexico_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_children_of_mexico_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_children_of_mexico_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_children_of_mexico_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_children_of_mexico_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_children_of_mexico_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_children_of_mexico_ally_strategies (scripted_effect) exited"
	}
}

remove_children_of_mexico_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_children_of_mexico_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_children_of_mexico_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_children_of_mexico_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_children_of_the_gate = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_children_of_the_gate (scripted_effect) entered"
	}
	if = {
		limit = {
			children_of_the_gate_exists = no
		}
		leave_current_faction = yes
		create_faction = children_of_the_gate
		mark_as_children_of_the_gate_member = yes
		set_variable = { GLOBAL.children_of_the_gate_leader = THIS }
	}
	else = {
		join_children_of_the_gate = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_children_of_the_gate (scripted_effect) exited"
	}
}

d_join_children_of_the_gate = {
	log = "[GetDateText]: Adding [This.GetNameDef] to children_of_the_gate..."
	create_or_join_children_of_the_gate = yes
}

ask_to_join_children_of_the_gate = {
	custom_effect_tooltip = ask_to_join_children_of_the_gate_tt
	hidden_effect = {
		var:GLOBAL.children_of_the_gate_leader = {
			country_event = {
				id = children_of_the_gate_faction_events.1
			}
		}
	}
}

invite_to_children_of_the_gate = {
	custom_effect_tooltip = invite_to_children_of_the_gate_tt
	hidden_effect = {
		country_event = {
			id = children_of_the_gate_faction_events.5
		}
	}
}

join_children_of_the_gate = {
	custom_effect_tooltip = join_children_of_the_gate_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_children_of_the_gate (scripted_effect) entered"
		}
		if = {
			limit = { is_children_of_the_gate_member = no }
			leave_current_faction = yes
			var:GLOBAL.children_of_the_gate_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_children_of_the_gate - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_children_of_the_gate - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_children_of_the_gate_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_children_of_the_gate (scripted_effect) exited"
		}
	}
}

leave_children_of_the_gate = {
	custom_effect_tooltip = leave_children_of_the_gate_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_children_of_the_gate (scripted_effect) entered"
		}
		if = {
			limit = { is_children_of_the_gate_member = yes }
			unmark_as_children_of_the_gate_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_children_of_the_gate (scripted_effect) exited"
		}
	}
}

mark_as_children_of_the_gate_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_children_of_the_gate_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_children_of_the_gate_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = HEA }
		add_to_array = { GLOBAL.children_of_the_gate_members = THIS }
		add_children_of_the_gate_ally_strategies = yes
		#add_children_of_the_gate_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_children_of_the_gate_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_children_of_the_gate_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_children_of_the_gate_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_children_of_the_gate_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_children_of_the_gate_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_children_of_the_gate_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_children_of_the_gate_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_children_of_the_gate_member = yes }
		remove_children_of_the_gate_ally_strategies = yes
		#remove_children_of_the_gate_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.children_of_the_gate_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_children_of_the_gate_member = yes
			}
			unmark_as_children_of_the_gate_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_children_of_the_gate_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_children_of_the_gate_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_children_of_the_gate_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_children_of_the_gate_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_children_of_the_gate_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_children_of_the_gate_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_children_of_the_gate_ally_strategies (scripted_effect) exited"
	}
}

remove_children_of_the_gate_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_children_of_the_gate_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_children_of_the_gate_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_children_of_the_gate_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_daikatana = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_daikatana (scripted_effect) entered"
	}
	if = {
		limit = {
			daikatana_exists = no
		}
		leave_current_faction = yes
		create_faction = daikatana
		mark_as_daikatana_member = yes
		set_variable = { GLOBAL.daikatana_leader = THIS }
	}
	else = {
		join_daikatana = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_daikatana (scripted_effect) exited"
	}
}

d_join_daikatana = {
	log = "[GetDateText]: Adding [This.GetNameDef] to daikatana..."
	create_or_join_daikatana = yes
}

ask_to_join_daikatana = {
	custom_effect_tooltip = ask_to_join_daikatana_tt
	hidden_effect = {
		var:GLOBAL.daikatana_leader = {
			country_event = {
				id = daikatana_faction_events.1
			}
		}
	}
}

invite_to_daikatana = {
	custom_effect_tooltip = invite_to_daikatana_tt
	hidden_effect = {
		country_event = {
			id = daikatana_faction_events.5
		}
	}
}

join_daikatana = {
	custom_effect_tooltip = join_daikatana_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_daikatana (scripted_effect) entered"
		}
		if = {
			limit = { is_daikatana_member = no }
			leave_current_faction = yes
			var:GLOBAL.daikatana_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_daikatana - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_daikatana - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_daikatana_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_daikatana (scripted_effect) exited"
		}
	}
}

leave_daikatana = {
	custom_effect_tooltip = leave_daikatana_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_daikatana (scripted_effect) entered"
		}
		if = {
			limit = { is_daikatana_member = yes }
			unmark_as_daikatana_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_daikatana (scripted_effect) exited"
		}
	}
}

mark_as_daikatana_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_daikatana_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_daikatana_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = YKZ }
		add_to_array = { GLOBAL.daikatana_members = THIS }
		add_daikatana_ally_strategies = yes
		#add_daikatana_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_daikatana_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_daikatana_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_daikatana_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_daikatana_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_daikatana_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_daikatana_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_daikatana_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_daikatana_member = yes }
		remove_daikatana_ally_strategies = yes
		#remove_daikatana_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.daikatana_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_daikatana_member = yes
			}
			unmark_as_daikatana_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_daikatana_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_daikatana_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_daikatana_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_daikatana_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_daikatana_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_daikatana_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_daikatana_ally_strategies (scripted_effect) exited"
	}
}

remove_daikatana_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_daikatana_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_daikatana_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_daikatana_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_daughters_of_hecate = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_daughters_of_hecate (scripted_effect) entered"
	}
	if = {
		limit = {
			daughters_of_hecate_exists = no
		}
		leave_current_faction = yes
		create_faction = daughters_of_hecate
		mark_as_daughters_of_hecate_member = yes
		set_variable = { GLOBAL.daughters_of_hecate_leader = THIS }
	}
	else = {
		join_daughters_of_hecate = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_daughters_of_hecate (scripted_effect) exited"
	}
}

d_join_daughters_of_hecate = {
	log = "[GetDateText]: Adding [This.GetNameDef] to daughters_of_hecate..."
	create_or_join_daughters_of_hecate = yes
}

ask_to_join_daughters_of_hecate = {
	custom_effect_tooltip = ask_to_join_daughters_of_hecate_tt
	hidden_effect = {
		var:GLOBAL.daughters_of_hecate_leader = {
			country_event = {
				id = daughters_of_hecate_faction_events.1
			}
		}
	}
}

invite_to_daughters_of_hecate = {
	custom_effect_tooltip = invite_to_daughters_of_hecate_tt
	hidden_effect = {
		country_event = {
			id = daughters_of_hecate_faction_events.5
		}
	}
}

join_daughters_of_hecate = {
	custom_effect_tooltip = join_daughters_of_hecate_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_daughters_of_hecate (scripted_effect) entered"
		}
		if = {
			limit = { is_daughters_of_hecate_member = no }
			leave_current_faction = yes
			var:GLOBAL.daughters_of_hecate_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_daughters_of_hecate - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_daughters_of_hecate - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_daughters_of_hecate_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_daughters_of_hecate (scripted_effect) exited"
		}
	}
}

leave_daughters_of_hecate = {
	custom_effect_tooltip = leave_daughters_of_hecate_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_daughters_of_hecate (scripted_effect) entered"
		}
		if = {
			limit = { is_daughters_of_hecate_member = yes }
			unmark_as_daughters_of_hecate_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_daughters_of_hecate (scripted_effect) exited"
		}
	}
}

mark_as_daughters_of_hecate_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_daughters_of_hecate_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_daughters_of_hecate_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = ORO }
		add_to_array = { GLOBAL.daughters_of_hecate_members = THIS }
		add_daughters_of_hecate_ally_strategies = yes
		#add_daughters_of_hecate_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_daughters_of_hecate_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_daughters_of_hecate_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_daughters_of_hecate_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_daughters_of_hecate_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_daughters_of_hecate_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_daughters_of_hecate_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_daughters_of_hecate_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_daughters_of_hecate_member = yes }
		remove_daughters_of_hecate_ally_strategies = yes
		#remove_daughters_of_hecate_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.daughters_of_hecate_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_daughters_of_hecate_member = yes
			}
			unmark_as_daughters_of_hecate_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_daughters_of_hecate_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_daughters_of_hecate_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_daughters_of_hecate_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_daughters_of_hecate_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_daughters_of_hecate_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_daughters_of_hecate_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_daughters_of_hecate_ally_strategies (scripted_effect) exited"
	}
}

remove_daughters_of_hecate_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_daughters_of_hecate_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_daughters_of_hecate_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_daughters_of_hecate_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_denver_defense_network = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_denver_defense_network (scripted_effect) entered"
	}
	if = {
		limit = {
			denver_defense_network_exists = no
		}
		leave_current_faction = yes
		create_faction = denver_defense_network
		mark_as_denver_defense_network_member = yes
		set_variable = { GLOBAL.denver_defense_network_leader = THIS }
	}
	else = {
		join_denver_defense_network = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_denver_defense_network (scripted_effect) exited"
	}
}

d_join_denver_defense_network = {
	log = "[GetDateText]: Adding [This.GetNameDef] to denver_defense_network..."
	create_or_join_denver_defense_network = yes
}

ask_to_join_denver_defense_network = {
	custom_effect_tooltip = ask_to_join_denver_defense_network_tt
	hidden_effect = {
		var:GLOBAL.denver_defense_network_leader = {
			country_event = {
				id = denver_defense_network_faction_events.1
			}
		}
	}
}

invite_to_denver_defense_network = {
	custom_effect_tooltip = invite_to_denver_defense_network_tt
	hidden_effect = {
		country_event = {
			id = denver_defense_network_faction_events.5
		}
	}
}

join_denver_defense_network = {
	custom_effect_tooltip = join_denver_defense_network_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_denver_defense_network (scripted_effect) entered"
		}
		if = {
			limit = { is_denver_defense_network_member = no }
			leave_current_faction = yes
			var:GLOBAL.denver_defense_network_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_denver_defense_network - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_denver_defense_network - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_denver_defense_network_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_denver_defense_network (scripted_effect) exited"
		}
	}
}

leave_denver_defense_network = {
	custom_effect_tooltip = leave_denver_defense_network_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_denver_defense_network (scripted_effect) entered"
		}
		if = {
			limit = { is_denver_defense_network_member = yes }
			unmark_as_denver_defense_network_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_denver_defense_network (scripted_effect) exited"
		}
	}
}

mark_as_denver_defense_network_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_denver_defense_network_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_denver_defense_network_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = HAN }
		add_to_array = { GLOBAL.denver_defense_network_members = THIS }
		add_denver_defense_network_ally_strategies = yes
		#add_denver_defense_network_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_denver_defense_network_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_denver_defense_network_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_denver_defense_network_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_denver_defense_network_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_denver_defense_network_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_denver_defense_network_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_denver_defense_network_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_denver_defense_network_member = yes }
		remove_denver_defense_network_ally_strategies = yes
		#remove_denver_defense_network_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.denver_defense_network_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_denver_defense_network_member = yes
			}
			unmark_as_denver_defense_network_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_denver_defense_network_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_denver_defense_network_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_denver_defense_network_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_denver_defense_network_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_denver_defense_network_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_denver_defense_network_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_denver_defense_network_ally_strategies (scripted_effect) exited"
	}
}

remove_denver_defense_network_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_denver_defense_network_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_denver_defense_network_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_denver_defense_network_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_earth_and_sky = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_earth_and_sky (scripted_effect) entered"
	}
	if = {
		limit = {
			earth_and_sky_exists = no
		}
		leave_current_faction = yes
		create_faction = earth_and_sky
		mark_as_earth_and_sky_member = yes
		set_variable = { GLOBAL.earth_and_sky_leader = THIS }
	}
	else = {
		join_earth_and_sky = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_earth_and_sky (scripted_effect) exited"
	}
}

d_join_earth_and_sky = {
	log = "[GetDateText]: Adding [This.GetNameDef] to earth_and_sky..."
	create_or_join_earth_and_sky = yes
}

ask_to_join_earth_and_sky = {
	custom_effect_tooltip = ask_to_join_earth_and_sky_tt
	hidden_effect = {
		var:GLOBAL.earth_and_sky_leader = {
			country_event = {
				id = earth_and_sky_faction_events.1
			}
		}
	}
}

invite_to_earth_and_sky = {
	custom_effect_tooltip = invite_to_earth_and_sky_tt
	hidden_effect = {
		country_event = {
			id = earth_and_sky_faction_events.5
		}
	}
}

join_earth_and_sky = {
	custom_effect_tooltip = join_earth_and_sky_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_earth_and_sky (scripted_effect) entered"
		}
		if = {
			limit = { is_earth_and_sky_member = no }
			leave_current_faction = yes
			var:GLOBAL.earth_and_sky_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_earth_and_sky - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_earth_and_sky - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_earth_and_sky_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_earth_and_sky (scripted_effect) exited"
		}
	}
}

leave_earth_and_sky = {
	custom_effect_tooltip = leave_earth_and_sky_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_earth_and_sky (scripted_effect) entered"
		}
		if = {
			limit = { is_earth_and_sky_member = yes }
			unmark_as_earth_and_sky_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_earth_and_sky (scripted_effect) exited"
		}
	}
}

mark_as_earth_and_sky_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_earth_and_sky_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_earth_and_sky_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = SKY }
		add_to_array = { GLOBAL.earth_and_sky_members = THIS }
		add_earth_and_sky_ally_strategies = yes
		#add_earth_and_sky_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_earth_and_sky_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_earth_and_sky_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_earth_and_sky_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_earth_and_sky_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_earth_and_sky_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_earth_and_sky_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_earth_and_sky_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_earth_and_sky_member = yes }
		remove_earth_and_sky_ally_strategies = yes
		#remove_earth_and_sky_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.earth_and_sky_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_earth_and_sky_member = yes
			}
			unmark_as_earth_and_sky_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_earth_and_sky_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_earth_and_sky_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_earth_and_sky_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_earth_and_sky_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_earth_and_sky_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_earth_and_sky_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_earth_and_sky_ally_strategies (scripted_effect) exited"
	}
}

remove_earth_and_sky_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_earth_and_sky_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_earth_and_sky_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_earth_and_sky_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_empire_of_salt = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_empire_of_salt (scripted_effect) entered"
	}
	if = {
		limit = {
			empire_of_salt_exists = no
		}
		leave_current_faction = yes
		create_faction = empire_of_salt
		mark_as_empire_of_salt_member = yes
		set_variable = { GLOBAL.empire_of_salt_leader = THIS }
	}
	else = {
		join_empire_of_salt = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_empire_of_salt (scripted_effect) exited"
	}
}

d_join_empire_of_salt = {
	log = "[GetDateText]: Adding [This.GetNameDef] to empire_of_salt..."
	create_or_join_empire_of_salt = yes
}

ask_to_join_empire_of_salt = {
	custom_effect_tooltip = ask_to_join_empire_of_salt_tt
	hidden_effect = {
		var:GLOBAL.empire_of_salt_leader = {
			country_event = {
				id = empire_of_salt_faction_events.1
			}
		}
	}
}

invite_to_empire_of_salt = {
	custom_effect_tooltip = invite_to_empire_of_salt_tt
	hidden_effect = {
		country_event = {
			id = empire_of_salt_faction_events.5
		}
	}
}

join_empire_of_salt = {
	custom_effect_tooltip = join_empire_of_salt_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_empire_of_salt (scripted_effect) entered"
		}
		if = {
			limit = { is_empire_of_salt_member = no }
			leave_current_faction = yes
			var:GLOBAL.empire_of_salt_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_empire_of_salt - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_empire_of_salt - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_empire_of_salt_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_empire_of_salt (scripted_effect) exited"
		}
	}
}

leave_empire_of_salt = {
	custom_effect_tooltip = leave_empire_of_salt_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_empire_of_salt (scripted_effect) entered"
		}
		if = {
			limit = { is_empire_of_salt_member = yes }
			unmark_as_empire_of_salt_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_empire_of_salt (scripted_effect) exited"
		}
	}
}

mark_as_empire_of_salt_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_empire_of_salt_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_empire_of_salt_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = EHT }
		add_to_array = { GLOBAL.empire_of_salt_members = THIS }
		add_empire_of_salt_ally_strategies = yes
		#add_empire_of_salt_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_empire_of_salt_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_empire_of_salt_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_empire_of_salt_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_empire_of_salt_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_empire_of_salt_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_empire_of_salt_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_empire_of_salt_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_empire_of_salt_member = yes }
		remove_empire_of_salt_ally_strategies = yes
		#remove_empire_of_salt_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.empire_of_salt_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_empire_of_salt_member = yes
			}
			unmark_as_empire_of_salt_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_empire_of_salt_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_empire_of_salt_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_empire_of_salt_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_empire_of_salt_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_empire_of_salt_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_empire_of_salt_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_empire_of_salt_ally_strategies (scripted_effect) exited"
	}
}

remove_empire_of_salt_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_empire_of_salt_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_empire_of_salt_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_empire_of_salt_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_equestria = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_equestria (scripted_effect) entered"
	}
	if = {
		limit = {
			equestria_exists = no
		}
		leave_current_faction = yes
		create_faction = equestria
		mark_as_equestria_member = yes
		set_variable = { GLOBAL.equestria_leader = THIS }
	}
	else = {
		join_equestria = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_equestria (scripted_effect) exited"
	}
}

d_join_equestria = {
	log = "[GetDateText]: Adding [This.GetNameDef] to equestria..."
	create_or_join_equestria = yes
}

ask_to_join_equestria = {
	custom_effect_tooltip = ask_to_join_equestria_tt
	hidden_effect = {
		var:GLOBAL.equestria_leader = {
			country_event = {
				id = equestria_faction_events.1
			}
		}
	}
}

invite_to_equestria = {
	custom_effect_tooltip = invite_to_equestria_tt
	hidden_effect = {
		country_event = {
			id = equestria_faction_events.5
		}
	}
}

join_equestria = {
	custom_effect_tooltip = join_equestria_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_equestria (scripted_effect) entered"
		}
		if = {
			limit = { is_equestria_member = no }
			leave_current_faction = yes
			var:GLOBAL.equestria_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_equestria - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_equestria - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_equestria_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_equestria (scripted_effect) exited"
		}
	}
}

leave_equestria = {
	custom_effect_tooltip = leave_equestria_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_equestria (scripted_effect) entered"
		}
		if = {
			limit = { is_equestria_member = yes }
			unmark_as_equestria_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_equestria (scripted_effect) exited"
		}
	}
}

mark_as_equestria_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_equestria_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_equestria_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = DEA }
		add_to_array = { GLOBAL.equestria_members = THIS }
		add_equestria_ally_strategies = yes
		#add_equestria_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_equestria_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_equestria_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_equestria_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_equestria_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_equestria_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_equestria_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_equestria_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_equestria_member = yes }
		remove_equestria_ally_strategies = yes
		#remove_equestria_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.equestria_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_equestria_member = yes
			}
			unmark_as_equestria_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_equestria_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_equestria_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_equestria_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_equestria_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_equestria_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_equestria_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_equestria_ally_strategies (scripted_effect) exited"
	}
}

remove_equestria_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_equestria_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_equestria_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_equestria_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_faithful = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_faithful (scripted_effect) entered"
	}
	if = {
		limit = {
			faithful_exists = no
		}
		leave_current_faction = yes
		create_faction = faithful
		mark_as_faithful_member = yes
		set_variable = { GLOBAL.faithful_leader = THIS }
	}
	else = {
		join_faithful = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_faithful (scripted_effect) exited"
	}
}

d_join_faithful = {
	log = "[GetDateText]: Adding [This.GetNameDef] to faithful..."
	create_or_join_faithful = yes
}

ask_to_join_faithful = {
	custom_effect_tooltip = ask_to_join_faithful_tt
	hidden_effect = {
		var:GLOBAL.faithful_leader = {
			country_event = {
				id = faithful_faction_events.1
			}
		}
	}
}

invite_to_faithful = {
	custom_effect_tooltip = invite_to_faithful_tt
	hidden_effect = {
		country_event = {
			id = faithful_faction_events.5
		}
	}
}

join_faithful = {
	custom_effect_tooltip = join_faithful_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_faithful (scripted_effect) entered"
		}
		if = {
			limit = { is_faithful_member = no }
			leave_current_faction = yes
			var:GLOBAL.faithful_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_faithful - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_faithful - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_faithful_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_faithful (scripted_effect) exited"
		}
	}
}

leave_faithful = {
	custom_effect_tooltip = leave_faithful_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_faithful (scripted_effect) entered"
		}
		if = {
			limit = { is_faithful_member = yes }
			unmark_as_faithful_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_faithful (scripted_effect) exited"
		}
	}
}

mark_as_faithful_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_faithful_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_faithful_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = MUR }
		add_to_array = { GLOBAL.faithful_members = THIS }
		add_faithful_ally_strategies = yes
		#add_faithful_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_faithful_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_faithful_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_faithful_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_faithful_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_faithful_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_faithful_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_faithful_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_faithful_member = yes }
		remove_faithful_ally_strategies = yes
		#remove_faithful_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.faithful_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_faithful_member = yes
			}
			unmark_as_faithful_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_faithful_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_faithful_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_faithful_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_faithful_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_faithful_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_faithful_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_faithful_ally_strategies (scripted_effect) exited"
	}
}

remove_faithful_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_faithful_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_faithful_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_faithful_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_fantasma_cartel = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_fantasma_cartel (scripted_effect) entered"
	}
	if = {
		limit = {
			fantasma_cartel_exists = no
		}
		leave_current_faction = yes
		create_faction = fantasma_cartel
		mark_as_fantasma_cartel_member = yes
		set_variable = { GLOBAL.fantasma_cartel_leader = THIS }
	}
	else = {
		join_fantasma_cartel = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_fantasma_cartel (scripted_effect) exited"
	}
}

d_join_fantasma_cartel = {
	log = "[GetDateText]: Adding [This.GetNameDef] to fantasma_cartel..."
	create_or_join_fantasma_cartel = yes
}

ask_to_join_fantasma_cartel = {
	custom_effect_tooltip = ask_to_join_fantasma_cartel_tt
	hidden_effect = {
		var:GLOBAL.fantasma_cartel_leader = {
			country_event = {
				id = fantasma_cartel_faction_events.1
			}
		}
	}
}

invite_to_fantasma_cartel = {
	custom_effect_tooltip = invite_to_fantasma_cartel_tt
	hidden_effect = {
		country_event = {
			id = fantasma_cartel_faction_events.5
		}
	}
}

join_fantasma_cartel = {
	custom_effect_tooltip = join_fantasma_cartel_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_fantasma_cartel (scripted_effect) entered"
		}
		if = {
			limit = { is_fantasma_cartel_member = no }
			leave_current_faction = yes
			var:GLOBAL.fantasma_cartel_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_fantasma_cartel - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_fantasma_cartel - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_fantasma_cartel_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_fantasma_cartel (scripted_effect) exited"
		}
	}
}

leave_fantasma_cartel = {
	custom_effect_tooltip = leave_fantasma_cartel_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_fantasma_cartel (scripted_effect) entered"
		}
		if = {
			limit = { is_fantasma_cartel_member = yes }
			unmark_as_fantasma_cartel_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_fantasma_cartel (scripted_effect) exited"
		}
	}
}

mark_as_fantasma_cartel_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_fantasma_cartel_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_fantasma_cartel_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BVC }
		add_to_array = { GLOBAL.fantasma_cartel_members = THIS }
		add_fantasma_cartel_ally_strategies = yes
		#add_fantasma_cartel_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_fantasma_cartel_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_fantasma_cartel_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_fantasma_cartel_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_fantasma_cartel_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_fantasma_cartel_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_fantasma_cartel_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_fantasma_cartel_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_fantasma_cartel_member = yes }
		remove_fantasma_cartel_ally_strategies = yes
		#remove_fantasma_cartel_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.fantasma_cartel_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_fantasma_cartel_member = yes
			}
			unmark_as_fantasma_cartel_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_fantasma_cartel_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_fantasma_cartel_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_fantasma_cartel_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_fantasma_cartel_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_fantasma_cartel_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_fantasma_cartel_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_fantasma_cartel_ally_strategies (scripted_effect) exited"
	}
}

remove_fantasma_cartel_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_fantasma_cartel_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_fantasma_cartel_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_fantasma_cartel_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_glass_league = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_glass_league (scripted_effect) entered"
	}
	if = {
		limit = {
			glass_league_exists = no
		}
		leave_current_faction = yes
		create_faction = glass_league
		mark_as_glass_league_member = yes
		set_variable = { GLOBAL.glass_league_leader = THIS }
	}
	else = {
		join_glass_league = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_glass_league (scripted_effect) exited"
	}
}

d_join_glass_league = {
	log = "[GetDateText]: Adding [This.GetNameDef] to glass_league..."
	create_or_join_glass_league = yes
}

ask_to_join_glass_league = {
	custom_effect_tooltip = ask_to_join_glass_league_tt
	hidden_effect = {
		var:GLOBAL.glass_league_leader = {
			country_event = {
				id = glass_league_faction_events.1
			}
		}
	}
}

invite_to_glass_league = {
	custom_effect_tooltip = invite_to_glass_league_tt
	hidden_effect = {
		country_event = {
			id = glass_league_faction_events.5
		}
	}
}

join_glass_league = {
	custom_effect_tooltip = join_glass_league_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_glass_league (scripted_effect) entered"
		}
		if = {
			limit = { is_glass_league_member = no }
			leave_current_faction = yes
			var:GLOBAL.glass_league_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_glass_league - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_glass_league - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_glass_league_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_glass_league (scripted_effect) exited"
		}
	}
}

leave_glass_league = {
	custom_effect_tooltip = leave_glass_league_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_glass_league (scripted_effect) entered"
		}
		if = {
			limit = { is_glass_league_member = yes }
			unmark_as_glass_league_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_glass_league (scripted_effect) exited"
		}
	}
}

mark_as_glass_league_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_glass_league_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_glass_league_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = HAM }
		add_to_array = { GLOBAL.glass_league_members = THIS }
		add_glass_league_ally_strategies = yes
		#add_glass_league_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_glass_league_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_glass_league_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_glass_league_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_glass_league_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_glass_league_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_glass_league_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_glass_league_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_glass_league_member = yes }
		remove_glass_league_ally_strategies = yes
		#remove_glass_league_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.glass_league_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_glass_league_member = yes
			}
			unmark_as_glass_league_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_glass_league_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_glass_league_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_glass_league_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_glass_league_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_glass_league_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_glass_league_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_glass_league_ally_strategies (scripted_effect) exited"
	}
}

remove_glass_league_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_glass_league_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_glass_league_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_glass_league_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_great_federation = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_great_federation (scripted_effect) entered"
	}
	if = {
		limit = {
			great_federation_exists = no
		}
		leave_current_faction = yes
		create_faction = great_federation
		mark_as_great_federation_member = yes
		set_variable = { GLOBAL.great_federation_leader = THIS }
	}
	else = {
		join_great_federation = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_great_federation (scripted_effect) exited"
	}
}

d_join_great_federation = {
	log = "[GetDateText]: Adding [This.GetNameDef] to great_federation..."
	create_or_join_great_federation = yes
}

ask_to_join_great_federation = {
	custom_effect_tooltip = ask_to_join_great_federation_tt
	hidden_effect = {
		var:GLOBAL.great_federation_leader = {
			country_event = {
				id = great_federation_faction_events.1
			}
		}
	}
}

invite_to_great_federation = {
	custom_effect_tooltip = invite_to_great_federation_tt
	hidden_effect = {
		country_event = {
			id = great_federation_faction_events.5
		}
	}
}

join_great_federation = {
	custom_effect_tooltip = join_great_federation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_great_federation (scripted_effect) entered"
		}
		if = {
			limit = { is_great_federation_member = no }
			leave_current_faction = yes
			var:GLOBAL.great_federation_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_great_federation - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_great_federation - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_great_federation_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_great_federation (scripted_effect) exited"
		}
	}
}

leave_great_federation = {
	custom_effect_tooltip = leave_great_federation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_great_federation (scripted_effect) entered"
		}
		if = {
			limit = { is_great_federation_member = yes }
			unmark_as_great_federation_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_great_federation (scripted_effect) exited"
		}
	}
}

mark_as_great_federation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_great_federation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_great_federation_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = FFI }
		add_to_array = { GLOBAL.great_federation_members = THIS }
		add_great_federation_ally_strategies = yes
		#add_great_federation_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_great_federation_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_great_federation_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_great_federation_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_great_federation_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_great_federation_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_great_federation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_great_federation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_great_federation_member = yes }
		remove_great_federation_ally_strategies = yes
		#remove_great_federation_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.great_federation_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_great_federation_member = yes
			}
			unmark_as_great_federation_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_great_federation_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_great_federation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_great_federation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_great_federation_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_great_federation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_great_federation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_great_federation_ally_strategies (scripted_effect) exited"
	}
}

remove_great_federation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_great_federation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_great_federation_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_great_federation_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_great_plains_federation = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_great_plains_federation (scripted_effect) entered"
	}
	if = {
		limit = {
			great_plains_federation_exists = no
		}
		leave_current_faction = yes
		create_faction = great_plains_federation
		mark_as_great_plains_federation_member = yes
		set_variable = { GLOBAL.great_plains_federation_leader = THIS }
	}
	else = {
		join_great_plains_federation = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_great_plains_federation (scripted_effect) exited"
	}
}

d_join_great_plains_federation = {
	log = "[GetDateText]: Adding [This.GetNameDef] to great_plains_federation..."
	create_or_join_great_plains_federation = yes
}

ask_to_join_great_plains_federation = {
	custom_effect_tooltip = ask_to_join_great_plains_federation_tt
	hidden_effect = {
		var:GLOBAL.great_plains_federation_leader = {
			country_event = {
				id = great_plains_federation_faction_events.1
			}
		}
	}
}

invite_to_great_plains_federation = {
	custom_effect_tooltip = invite_to_great_plains_federation_tt
	hidden_effect = {
		country_event = {
			id = great_plains_federation_faction_events.5
		}
	}
}

join_great_plains_federation = {
	custom_effect_tooltip = join_great_plains_federation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_great_plains_federation (scripted_effect) entered"
		}
		if = {
			limit = { is_great_plains_federation_member = no }
			leave_current_faction = yes
			var:GLOBAL.great_plains_federation_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_great_plains_federation - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_great_plains_federation - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_great_plains_federation_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_great_plains_federation (scripted_effect) exited"
		}
	}
}

leave_great_plains_federation = {
	custom_effect_tooltip = leave_great_plains_federation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_great_plains_federation (scripted_effect) entered"
		}
		if = {
			limit = { is_great_plains_federation_member = yes }
			unmark_as_great_plains_federation_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_great_plains_federation (scripted_effect) exited"
		}
	}
}

mark_as_great_plains_federation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_great_plains_federation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_great_plains_federation_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = CMD }
		add_to_array = { GLOBAL.great_plains_federation_members = THIS }
		add_great_plains_federation_ally_strategies = yes
		#add_great_plains_federation_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_great_plains_federation_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_great_plains_federation_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_great_plains_federation_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_great_plains_federation_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_great_plains_federation_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_great_plains_federation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_great_plains_federation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_great_plains_federation_member = yes }
		remove_great_plains_federation_ally_strategies = yes
		#remove_great_plains_federation_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.great_plains_federation_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_great_plains_federation_member = yes
			}
			unmark_as_great_plains_federation_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_great_plains_federation_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_great_plains_federation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_great_plains_federation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_great_plains_federation_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_great_plains_federation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_great_plains_federation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_great_plains_federation_ally_strategies (scripted_effect) exited"
	}
}

remove_great_plains_federation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_great_plains_federation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_great_plains_federation_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_great_plains_federation_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_jungle_pact = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_jungle_pact (scripted_effect) entered"
	}
	if = {
		limit = {
			jungle_pact_exists = no
		}
		leave_current_faction = yes
		create_faction = jungle_pact
		mark_as_jungle_pact_member = yes
		set_variable = { GLOBAL.jungle_pact_leader = THIS }
	}
	else = {
		join_jungle_pact = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_jungle_pact (scripted_effect) exited"
	}
}

d_join_jungle_pact = {
	log = "[GetDateText]: Adding [This.GetNameDef] to jungle_pact..."
	create_or_join_jungle_pact = yes
}

ask_to_join_jungle_pact = {
	custom_effect_tooltip = ask_to_join_jungle_pact_tt
	hidden_effect = {
		var:GLOBAL.jungle_pact_leader = {
			country_event = {
				id = jungle_pact_faction_events.1
			}
		}
	}
}

invite_to_jungle_pact = {
	custom_effect_tooltip = invite_to_jungle_pact_tt
	hidden_effect = {
		country_event = {
			id = jungle_pact_faction_events.5
		}
	}
}

join_jungle_pact = {
	custom_effect_tooltip = join_jungle_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_jungle_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_jungle_pact_member = no }
			leave_current_faction = yes
			var:GLOBAL.jungle_pact_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_jungle_pact - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_jungle_pact - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_jungle_pact_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_jungle_pact (scripted_effect) exited"
		}
	}
}

leave_jungle_pact = {
	custom_effect_tooltip = leave_jungle_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_jungle_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_jungle_pact_member = yes }
			unmark_as_jungle_pact_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_jungle_pact (scripted_effect) exited"
		}
	}
}

mark_as_jungle_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_jungle_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_jungle_pact_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TDT }
		add_to_array = { GLOBAL.jungle_pact_members = THIS }
		add_jungle_pact_ally_strategies = yes
		#add_jungle_pact_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_jungle_pact_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_jungle_pact_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_jungle_pact_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_jungle_pact_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_jungle_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_jungle_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_jungle_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_jungle_pact_member = yes }
		remove_jungle_pact_ally_strategies = yes
		#remove_jungle_pact_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.jungle_pact_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_jungle_pact_member = yes
			}
			unmark_as_jungle_pact_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_jungle_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_jungle_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_jungle_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_jungle_pact_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_jungle_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_jungle_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_jungle_pact_ally_strategies (scripted_effect) exited"
	}
}

remove_jungle_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_jungle_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_jungle_pact_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_jungle_pact_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_kaisers_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_kaisers_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			kaisers_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = kaisers_legion
		mark_as_kaisers_legion_member = yes
		set_variable = { GLOBAL.kaisers_legion_leader = THIS }
	}
	else = {
		join_kaisers_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_kaisers_legion (scripted_effect) exited"
	}
}

d_join_kaisers_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to kaisers_legion..."
	create_or_join_kaisers_legion = yes
}

ask_to_join_kaisers_legion = {
	custom_effect_tooltip = ask_to_join_kaisers_legion_tt
	hidden_effect = {
		var:GLOBAL.kaisers_legion_leader = {
			country_event = {
				id = kaisers_legion_faction_events.1
			}
		}
	}
}

invite_to_kaisers_legion = {
	custom_effect_tooltip = invite_to_kaisers_legion_tt
	hidden_effect = {
		country_event = {
			id = kaisers_legion_faction_events.5
		}
	}
}

join_kaisers_legion = {
	custom_effect_tooltip = join_kaisers_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_kaisers_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_kaisers_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.kaisers_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_kaisers_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_kaisers_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_kaisers_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_kaisers_legion (scripted_effect) exited"
		}
	}
}

leave_kaisers_legion = {
	custom_effect_tooltip = leave_kaisers_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_kaisers_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_kaisers_legion_member = yes }
			unmark_as_kaisers_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_kaisers_legion (scripted_effect) exited"
		}
	}
}

mark_as_kaisers_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_kaisers_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_kaisers_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TWI }
		add_to_array = { GLOBAL.kaisers_legion_members = THIS }
		add_kaisers_legion_ally_strategies = yes
		#add_kaisers_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_kaisers_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_kaisers_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_kaisers_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_kaisers_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_kaisers_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_kaisers_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_kaisers_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_kaisers_legion_member = yes }
		remove_kaisers_legion_ally_strategies = yes
		#remove_kaisers_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.kaisers_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_kaisers_legion_member = yes
			}
			unmark_as_kaisers_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_kaisers_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_kaisers_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_kaisers_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_kaisers_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_kaisers_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_kaisers_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_kaisers_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_kaisers_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_kaisers_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_kaisers_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_kaisers_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_masters_new_army = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_masters_new_army (scripted_effect) entered"
	}
	if = {
		limit = {
			masters_new_army_exists = no
		}
		leave_current_faction = yes
		create_faction = masters_new_army
		mark_as_masters_new_army_member = yes
		set_variable = { GLOBAL.masters_new_army_leader = THIS }
	}
	else = {
		join_masters_new_army = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_masters_new_army (scripted_effect) exited"
	}
}

d_join_masters_new_army = {
	log = "[GetDateText]: Adding [This.GetNameDef] to masters_new_army..."
	create_or_join_masters_new_army = yes
}

ask_to_join_masters_new_army = {
	custom_effect_tooltip = ask_to_join_masters_new_army_tt
	hidden_effect = {
		var:GLOBAL.masters_new_army_leader = {
			country_event = {
				id = masters_new_army_faction_events.1
			}
		}
	}
}

invite_to_masters_new_army = {
	custom_effect_tooltip = invite_to_masters_new_army_tt
	hidden_effect = {
		country_event = {
			id = masters_new_army_faction_events.5
		}
	}
}

join_masters_new_army = {
	custom_effect_tooltip = join_masters_new_army_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_masters_new_army (scripted_effect) entered"
		}
		if = {
			limit = { is_masters_new_army_member = no }
			leave_current_faction = yes
			var:GLOBAL.masters_new_army_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_masters_new_army - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_masters_new_army - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_masters_new_army_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_masters_new_army (scripted_effect) exited"
		}
	}
}

leave_masters_new_army = {
	custom_effect_tooltip = leave_masters_new_army_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_masters_new_army (scripted_effect) entered"
		}
		if = {
			limit = { is_masters_new_army_member = yes }
			unmark_as_masters_new_army_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_masters_new_army (scripted_effect) exited"
		}
	}
}

mark_as_masters_new_army_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_masters_new_army_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_masters_new_army_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TRL }
		add_to_array = { GLOBAL.masters_new_army_members = THIS }
		add_masters_new_army_ally_strategies = yes
		#add_masters_new_army_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_masters_new_army_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_masters_new_army_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_masters_new_army_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_masters_new_army_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_masters_new_army_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_masters_new_army_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_masters_new_army_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_masters_new_army_member = yes }
		remove_masters_new_army_ally_strategies = yes
		#remove_masters_new_army_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.masters_new_army_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_masters_new_army_member = yes
			}
			unmark_as_masters_new_army_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_masters_new_army_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_masters_new_army_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_masters_new_army_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_masters_new_army_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_masters_new_army_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_masters_new_army_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_masters_new_army_ally_strategies (scripted_effect) exited"
	}
}

remove_masters_new_army_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_masters_new_army_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_masters_new_army_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_masters_new_army_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_mesoamerican_alliance = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mesoamerican_alliance (scripted_effect) entered"
	}
	if = {
		limit = {
			mesoamerican_alliance_exists = no
		}
		leave_current_faction = yes
		create_faction = mesoamerican_alliance
		mark_as_mesoamerican_alliance_member = yes
		set_variable = { GLOBAL.mesoamerican_alliance_leader = THIS }
	}
	else = {
		join_mesoamerican_alliance = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mesoamerican_alliance (scripted_effect) exited"
	}
}

d_join_mesoamerican_alliance = {
	log = "[GetDateText]: Adding [This.GetNameDef] to mesoamerican_alliance..."
	create_or_join_mesoamerican_alliance = yes
}

ask_to_join_mesoamerican_alliance = {
	custom_effect_tooltip = ask_to_join_mesoamerican_alliance_tt
	hidden_effect = {
		var:GLOBAL.mesoamerican_alliance_leader = {
			country_event = {
				id = mesoamerican_alliance_faction_events.1
			}
		}
	}
}

invite_to_mesoamerican_alliance = {
	custom_effect_tooltip = invite_to_mesoamerican_alliance_tt
	hidden_effect = {
		country_event = {
			id = mesoamerican_alliance_faction_events.5
		}
	}
}

join_mesoamerican_alliance = {
	custom_effect_tooltip = join_mesoamerican_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mesoamerican_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_mesoamerican_alliance_member = no }
			leave_current_faction = yes
			var:GLOBAL.mesoamerican_alliance_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mesoamerican_alliance - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mesoamerican_alliance - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_mesoamerican_alliance_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mesoamerican_alliance (scripted_effect) exited"
		}
	}
}

leave_mesoamerican_alliance = {
	custom_effect_tooltip = leave_mesoamerican_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mesoamerican_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_mesoamerican_alliance_member = yes }
			unmark_as_mesoamerican_alliance_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mesoamerican_alliance (scripted_effect) exited"
		}
	}
}

mark_as_mesoamerican_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mesoamerican_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mesoamerican_alliance_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = ITZ }
		add_to_array = { GLOBAL.mesoamerican_alliance_members = THIS }
		add_mesoamerican_alliance_ally_strategies = yes
		#add_mesoamerican_alliance_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mesoamerican_alliance_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mesoamerican_alliance_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_mesoamerican_alliance_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mesoamerican_alliance_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mesoamerican_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_mesoamerican_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mesoamerican_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mesoamerican_alliance_member = yes }
		remove_mesoamerican_alliance_ally_strategies = yes
		#remove_mesoamerican_alliance_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.mesoamerican_alliance_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mesoamerican_alliance_member = yes
			}
			unmark_as_mesoamerican_alliance_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mesoamerican_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_mesoamerican_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mesoamerican_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_mesoamerican_alliance_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_mesoamerican_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_mesoamerican_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mesoamerican_alliance_ally_strategies (scripted_effect) exited"
	}
}

remove_mesoamerican_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mesoamerican_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_mesoamerican_alliance_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mesoamerican_alliance_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_the_fire_council = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_the_fire_council (scripted_effect) entered"
	}
	if = {
		limit = {
			the_fire_council_exists = no
		}
		leave_current_faction = yes
		create_faction = the_fire_council
		mark_as_the_fire_council_member = yes
		set_variable = { GLOBAL.the_fire_council_leader = THIS }
	}
	else = {
		join_the_fire_council = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_the_fire_council (scripted_effect) exited"
	}
}

d_join_the_fire_council = {
	log = "[GetDateText]: Adding [This.GetNameDef] to the_fire_council..."
	create_or_join_the_fire_council = yes
}

ask_to_join_the_fire_council = {
	custom_effect_tooltip = ask_to_join_the_fire_council_tt
	hidden_effect = {
		var:GLOBAL.the_fire_council_leader = {
			country_event = {
				id = the_fire_council_faction_events.1
			}
		}
	}
}

invite_to_the_fire_council = {
	custom_effect_tooltip = invite_to_the_fire_council_tt
	hidden_effect = {
		country_event = {
			id = the_fire_council_faction_events.5
		}
	}
}

join_the_fire_council = {
	custom_effect_tooltip = join_the_fire_council_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_the_fire_council (scripted_effect) entered"
		}
		if = {
			limit = { is_the_fire_council_member = no }
			leave_current_faction = yes
			var:GLOBAL.the_fire_council_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_the_fire_council - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_the_fire_council - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_the_fire_council_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_the_fire_council (scripted_effect) exited"
		}
	}
}

leave_the_fire_council = {
	custom_effect_tooltip = leave_the_fire_council_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_the_fire_council (scripted_effect) entered"
		}
		if = {
			limit = { is_the_fire_council_member = yes }
			unmark_as_the_fire_council_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_the_fire_council (scripted_effect) exited"
		}
	}
}

mark_as_the_fire_council_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_the_fire_council_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_the_fire_council_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = FRC }
		add_to_array = { GLOBAL.the_fire_council_members = THIS }
		add_the_fire_council_ally_strategies = yes
		#add_the_fire_council_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_the_fire_council_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_the_fire_council_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_the_fire_council_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_the_fire_council_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_the_fire_council_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_the_fire_council_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_the_fire_council_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_the_fire_council_member = yes }
		remove_the_fire_council_ally_strategies = yes
		#remove_the_fire_council_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.the_fire_council_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_the_fire_council_member = yes
			}
			unmark_as_the_fire_council_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_the_fire_council_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_the_fire_council_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_the_fire_council_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_the_fire_council_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_the_fire_council_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_the_fire_council_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_the_fire_council_ally_strategies (scripted_effect) exited"
	}
}

remove_the_fire_council_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_the_fire_council_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_the_fire_council_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_the_fire_council_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_mojave_alliance = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mojave_alliance (scripted_effect) entered"
	}
	if = {
		limit = {
			mojave_alliance_exists = no
		}
		leave_current_faction = yes
		create_faction = mojave_alliance
		mark_as_mojave_alliance_member = yes
		set_variable = { GLOBAL.mojave_alliance_leader = THIS }
	}
	else = {
		join_mojave_alliance = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mojave_alliance (scripted_effect) exited"
	}
}

d_join_mojave_alliance = {
	log = "[GetDateText]: Adding [This.GetNameDef] to mojave_alliance..."
	create_or_join_mojave_alliance = yes
}

ask_to_join_mojave_alliance = {
	custom_effect_tooltip = ask_to_join_mojave_alliance_tt
	hidden_effect = {
		var:GLOBAL.mojave_alliance_leader = {
			country_event = {
				id = mojave_alliance_faction_events.1
			}
		}
	}
}

invite_to_mojave_alliance = {
	custom_effect_tooltip = invite_to_mojave_alliance_tt
	hidden_effect = {
		country_event = {
			id = mojave_alliance_faction_events.5
		}
	}
}

join_mojave_alliance = {
	custom_effect_tooltip = join_mojave_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mojave_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_mojave_alliance_member = no }
			leave_current_faction = yes
			var:GLOBAL.mojave_alliance_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mojave_alliance - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mojave_alliance - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_mojave_alliance_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mojave_alliance (scripted_effect) exited"
		}
	}
}

leave_mojave_alliance = {
	custom_effect_tooltip = leave_mojave_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mojave_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_mojave_alliance_member = yes }
			unmark_as_mojave_alliance_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mojave_alliance (scripted_effect) exited"
		}
	}
}

mark_as_mojave_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mojave_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mojave_alliance_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = MOJ }
		add_to_array = { GLOBAL.mojave_alliance_members = THIS }
		add_mojave_alliance_ally_strategies = yes
		#add_mojave_alliance_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mojave_alliance_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mojave_alliance_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_mojave_alliance_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mojave_alliance_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mojave_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_mojave_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mojave_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mojave_alliance_member = yes }
		remove_mojave_alliance_ally_strategies = yes
		#remove_mojave_alliance_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.mojave_alliance_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mojave_alliance_member = yes
			}
			unmark_as_mojave_alliance_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mojave_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_mojave_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mojave_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_mojave_alliance_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_mojave_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_mojave_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mojave_alliance_ally_strategies (scripted_effect) exited"
	}
}

remove_mojave_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mojave_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_mojave_alliance_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mojave_alliance_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_mormon_alliance = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mormon_alliance (scripted_effect) entered"
	}
	if = {
		limit = {
			mormon_alliance_exists = no
		}
		leave_current_faction = yes
		create_faction = mormon_alliance
		mark_as_mormon_alliance_member = yes
		set_variable = { GLOBAL.mormon_alliance_leader = THIS }
	}
	else = {
		join_mormon_alliance = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mormon_alliance (scripted_effect) exited"
	}
}

d_join_mormon_alliance = {
	log = "[GetDateText]: Adding [This.GetNameDef] to mormon_alliance..."
	create_or_join_mormon_alliance = yes
}

ask_to_join_mormon_alliance = {
	custom_effect_tooltip = ask_to_join_mormon_alliance_tt
	hidden_effect = {
		var:GLOBAL.mormon_alliance_leader = {
			country_event = {
				id = mormon_alliance_faction_events.1
			}
		}
	}
}

invite_to_mormon_alliance = {
	custom_effect_tooltip = invite_to_mormon_alliance_tt
	hidden_effect = {
		country_event = {
			id = mormon_alliance_faction_events.5
		}
	}
}

join_mormon_alliance = {
	custom_effect_tooltip = join_mormon_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mormon_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_mormon_alliance_member = no }
			leave_current_faction = yes
			var:GLOBAL.mormon_alliance_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mormon_alliance - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mormon_alliance - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_mormon_alliance_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mormon_alliance (scripted_effect) exited"
		}
	}
}

leave_mormon_alliance = {
	custom_effect_tooltip = leave_mormon_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mormon_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_mormon_alliance_member = yes }
			unmark_as_mormon_alliance_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mormon_alliance (scripted_effect) exited"
		}
	}
}

mark_as_mormon_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mormon_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mormon_alliance_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NCN }
		add_to_array = { GLOBAL.mormon_alliance_members = THIS }
		add_mormon_alliance_ally_strategies = yes
		#add_mormon_alliance_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mormon_alliance_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mormon_alliance_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_mormon_alliance_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mormon_alliance_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mormon_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_mormon_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mormon_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mormon_alliance_member = yes }
		remove_mormon_alliance_ally_strategies = yes
		#remove_mormon_alliance_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.mormon_alliance_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mormon_alliance_member = yes
			}
			unmark_as_mormon_alliance_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mormon_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_mormon_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mormon_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_mormon_alliance_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_mormon_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_mormon_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mormon_alliance_ally_strategies (scripted_effect) exited"
	}
}

remove_mormon_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mormon_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_mormon_alliance_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mormon_alliance_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_nevada_enclave = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_nevada_enclave (scripted_effect) entered"
	}
	if = {
		limit = {
			nevada_enclave_exists = no
		}
		leave_current_faction = yes
		create_faction = nevada_enclave
		mark_as_nevada_enclave_member = yes
		set_variable = { GLOBAL.nevada_enclave_leader = THIS }
	}
	else = {
		join_nevada_enclave = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_nevada_enclave (scripted_effect) exited"
	}
}

d_join_nevada_enclave = {
	log = "[GetDateText]: Adding [This.GetNameDef] to nevada_enclave..."
	create_or_join_nevada_enclave = yes
}

ask_to_join_nevada_enclave = {
	custom_effect_tooltip = ask_to_join_nevada_enclave_tt
	hidden_effect = {
		var:GLOBAL.nevada_enclave_leader = {
			country_event = {
				id = nevada_enclave_faction_events.1
			}
		}
	}
}

invite_to_nevada_enclave = {
	custom_effect_tooltip = invite_to_nevada_enclave_tt
	hidden_effect = {
		country_event = {
			id = nevada_enclave_faction_events.5
		}
	}
}

join_nevada_enclave = {
	custom_effect_tooltip = join_nevada_enclave_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_nevada_enclave (scripted_effect) entered"
		}
		if = {
			limit = { is_nevada_enclave_member = no }
			leave_current_faction = yes
			var:GLOBAL.nevada_enclave_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_nevada_enclave - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_nevada_enclave - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_nevada_enclave_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_nevada_enclave (scripted_effect) exited"
		}
	}
}

leave_nevada_enclave = {
	custom_effect_tooltip = leave_nevada_enclave_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_nevada_enclave (scripted_effect) entered"
		}
		if = {
			limit = { is_nevada_enclave_member = yes }
			unmark_as_nevada_enclave_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_nevada_enclave (scripted_effect) exited"
		}
	}
}

mark_as_nevada_enclave_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_nevada_enclave_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_nevada_enclave_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NEW }
		add_to_array = { GLOBAL.nevada_enclave_members = THIS }
		add_nevada_enclave_ally_strategies = yes
		#add_nevada_enclave_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_nevada_enclave_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_nevada_enclave_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_nevada_enclave_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_nevada_enclave_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_nevada_enclave_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_nevada_enclave_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_nevada_enclave_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_nevada_enclave_member = yes }
		remove_nevada_enclave_ally_strategies = yes
		#remove_nevada_enclave_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.nevada_enclave_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_nevada_enclave_member = yes
			}
			unmark_as_nevada_enclave_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_nevada_enclave_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_nevada_enclave_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_nevada_enclave_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_nevada_enclave_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_nevada_enclave_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_nevada_enclave_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_nevada_enclave_ally_strategies (scripted_effect) exited"
	}
}

remove_nevada_enclave_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_nevada_enclave_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_nevada_enclave_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_nevada_enclave_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_nevada_pact = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_nevada_pact (scripted_effect) entered"
	}
	if = {
		limit = {
			nevada_pact_exists = no
		}
		leave_current_faction = yes
		create_faction = nevada_pact
		mark_as_nevada_pact_member = yes
		set_variable = { GLOBAL.nevada_pact_leader = THIS }
	}
	else = {
		join_nevada_pact = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_nevada_pact (scripted_effect) exited"
	}
}

d_join_nevada_pact = {
	log = "[GetDateText]: Adding [This.GetNameDef] to nevada_pact..."
	create_or_join_nevada_pact = yes
}

ask_to_join_nevada_pact = {
	custom_effect_tooltip = ask_to_join_nevada_pact_tt
	hidden_effect = {
		var:GLOBAL.nevada_pact_leader = {
			country_event = {
				id = nevada_pact_faction_events.1
			}
		}
	}
}

invite_to_nevada_pact = {
	custom_effect_tooltip = invite_to_nevada_pact_tt
	hidden_effect = {
		country_event = {
			id = nevada_pact_faction_events.5
		}
	}
}

join_nevada_pact = {
	custom_effect_tooltip = join_nevada_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_nevada_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_nevada_pact_member = no }
			leave_current_faction = yes
			var:GLOBAL.nevada_pact_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_nevada_pact - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_nevada_pact - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_nevada_pact_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_nevada_pact (scripted_effect) exited"
		}
	}
}

leave_nevada_pact = {
	custom_effect_tooltip = leave_nevada_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_nevada_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_nevada_pact_member = yes }
			unmark_as_nevada_pact_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_nevada_pact (scripted_effect) exited"
		}
	}
}

mark_as_nevada_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_nevada_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_nevada_pact_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = DES }
		add_to_array = { GLOBAL.nevada_pact_members = THIS }
		add_nevada_pact_ally_strategies = yes
		#add_nevada_pact_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_nevada_pact_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_nevada_pact_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_nevada_pact_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_nevada_pact_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_nevada_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_nevada_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_nevada_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_nevada_pact_member = yes }
		remove_nevada_pact_ally_strategies = yes
		#remove_nevada_pact_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.nevada_pact_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_nevada_pact_member = yes
			}
			unmark_as_nevada_pact_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_nevada_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_nevada_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_nevada_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_nevada_pact_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_nevada_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_nevada_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_nevada_pact_ally_strategies (scripted_effect) exited"
	}
}

remove_nevada_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_nevada_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_nevada_pact_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_nevada_pact_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_northern_league = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_league (scripted_effect) entered"
	}
	if = {
		limit = {
			northern_league_exists = no
		}
		leave_current_faction = yes
		create_faction = northern_league
		mark_as_northern_league_member = yes
		set_variable = { GLOBAL.northern_league_leader = THIS }
	}
	else = {
		join_northern_league = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_league (scripted_effect) exited"
	}
}

d_join_northern_league = {
	log = "[GetDateText]: Adding [This.GetNameDef] to northern_league..."
	create_or_join_northern_league = yes
}

ask_to_join_northern_league = {
	custom_effect_tooltip = ask_to_join_northern_league_tt
	hidden_effect = {
		var:GLOBAL.northern_league_leader = {
			country_event = {
				id = northern_league_faction_events.1
			}
		}
	}
}

invite_to_northern_league = {
	custom_effect_tooltip = invite_to_northern_league_tt
	hidden_effect = {
		country_event = {
			id = northern_league_faction_events.5
		}
	}
}

join_northern_league = {
	custom_effect_tooltip = join_northern_league_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_league (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_league_member = no }
			leave_current_faction = yes
			var:GLOBAL.northern_league_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_league - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_league - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_northern_league_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_league (scripted_effect) exited"
		}
	}
}

leave_northern_league = {
	custom_effect_tooltip = leave_northern_league_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_league (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_league_member = yes }
			unmark_as_northern_league_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_league (scripted_effect) exited"
		}
	}
}

mark_as_northern_league_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_league_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_league_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = WBH }
		add_to_array = { GLOBAL.northern_league_members = THIS }
		add_northern_league_ally_strategies = yes
		#add_northern_league_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_league_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_league_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_northern_league_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_league_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_league_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_northern_league_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_league_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_league_member = yes }
		remove_northern_league_ally_strategies = yes
		#remove_northern_league_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.northern_league_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_league_member = yes
			}
			unmark_as_northern_league_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_league_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_northern_league_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_league_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_northern_league_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_northern_league_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_northern_league_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_league_ally_strategies (scripted_effect) exited"
	}
}

remove_northern_league_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_league_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_northern_league_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_league_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_northern_mojave_pact = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_mojave_pact (scripted_effect) entered"
	}
	if = {
		limit = {
			northern_mojave_pact_exists = no
		}
		leave_current_faction = yes
		create_faction = northern_mojave_pact
		mark_as_northern_mojave_pact_member = yes
		set_variable = { GLOBAL.northern_mojave_pact_leader = THIS }
	}
	else = {
		join_northern_mojave_pact = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_mojave_pact (scripted_effect) exited"
	}
}

d_join_northern_mojave_pact = {
	log = "[GetDateText]: Adding [This.GetNameDef] to northern_mojave_pact..."
	create_or_join_northern_mojave_pact = yes
}

ask_to_join_northern_mojave_pact = {
	custom_effect_tooltip = ask_to_join_northern_mojave_pact_tt
	hidden_effect = {
		var:GLOBAL.northern_mojave_pact_leader = {
			country_event = {
				id = northern_mojave_pact_faction_events.1
			}
		}
	}
}

invite_to_northern_mojave_pact = {
	custom_effect_tooltip = invite_to_northern_mojave_pact_tt
	hidden_effect = {
		country_event = {
			id = northern_mojave_pact_faction_events.5
		}
	}
}

join_northern_mojave_pact = {
	custom_effect_tooltip = join_northern_mojave_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_mojave_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_mojave_pact_member = no }
			leave_current_faction = yes
			var:GLOBAL.northern_mojave_pact_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_mojave_pact - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_mojave_pact - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_northern_mojave_pact_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_mojave_pact (scripted_effect) exited"
		}
	}
}

leave_northern_mojave_pact = {
	custom_effect_tooltip = leave_northern_mojave_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_mojave_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_mojave_pact_member = yes }
			unmark_as_northern_mojave_pact_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_mojave_pact (scripted_effect) exited"
		}
	}
}

mark_as_northern_mojave_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_mojave_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_mojave_pact_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = KHA }
		add_to_array = { GLOBAL.northern_mojave_pact_members = THIS }
		add_northern_mojave_pact_ally_strategies = yes
		#add_northern_mojave_pact_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_mojave_pact_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_mojave_pact_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_northern_mojave_pact_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_mojave_pact_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_mojave_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_northern_mojave_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_mojave_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_mojave_pact_member = yes }
		remove_northern_mojave_pact_ally_strategies = yes
		#remove_northern_mojave_pact_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.northern_mojave_pact_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_mojave_pact_member = yes
			}
			unmark_as_northern_mojave_pact_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_mojave_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_northern_mojave_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_mojave_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_northern_mojave_pact_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_northern_mojave_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_northern_mojave_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_mojave_pact_ally_strategies (scripted_effect) exited"
	}
}

remove_northern_mojave_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_mojave_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_northern_mojave_pact_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_mojave_pact_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_phoenix_federation = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_phoenix_federation (scripted_effect) entered"
	}
	if = {
		limit = {
			phoenix_federation_exists = no
		}
		leave_current_faction = yes
		create_faction = phoenix_federation
		mark_as_phoenix_federation_member = yes
		set_variable = { GLOBAL.phoenix_federation_leader = THIS }
	}
	else = {
		join_phoenix_federation = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_phoenix_federation (scripted_effect) exited"
	}
}

d_join_phoenix_federation = {
	log = "[GetDateText]: Adding [This.GetNameDef] to phoenix_federation..."
	create_or_join_phoenix_federation = yes
}

ask_to_join_phoenix_federation = {
	custom_effect_tooltip = ask_to_join_phoenix_federation_tt
	hidden_effect = {
		var:GLOBAL.phoenix_federation_leader = {
			country_event = {
				id = phoenix_federation_faction_events.1
			}
		}
	}
}

invite_to_phoenix_federation = {
	custom_effect_tooltip = invite_to_phoenix_federation_tt
	hidden_effect = {
		country_event = {
			id = phoenix_federation_faction_events.5
		}
	}
}

join_phoenix_federation = {
	custom_effect_tooltip = join_phoenix_federation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_phoenix_federation (scripted_effect) entered"
		}
		if = {
			limit = { is_phoenix_federation_member = no }
			leave_current_faction = yes
			var:GLOBAL.phoenix_federation_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_phoenix_federation - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_phoenix_federation - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_phoenix_federation_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_phoenix_federation (scripted_effect) exited"
		}
	}
}

leave_phoenix_federation = {
	custom_effect_tooltip = leave_phoenix_federation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_phoenix_federation (scripted_effect) entered"
		}
		if = {
			limit = { is_phoenix_federation_member = yes }
			unmark_as_phoenix_federation_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_phoenix_federation (scripted_effect) exited"
		}
	}
}

mark_as_phoenix_federation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_phoenix_federation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_phoenix_federation_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = PHR }
		add_to_array = { GLOBAL.phoenix_federation_members = THIS }
		add_phoenix_federation_ally_strategies = yes
		#add_phoenix_federation_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_phoenix_federation_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_phoenix_federation_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_phoenix_federation_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_phoenix_federation_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_phoenix_federation_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_phoenix_federation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_phoenix_federation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_phoenix_federation_member = yes }
		remove_phoenix_federation_ally_strategies = yes
		#remove_phoenix_federation_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.phoenix_federation_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_phoenix_federation_member = yes
			}
			unmark_as_phoenix_federation_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_phoenix_federation_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_phoenix_federation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_phoenix_federation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_phoenix_federation_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_phoenix_federation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_phoenix_federation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_phoenix_federation_ally_strategies (scripted_effect) exited"
	}
}

remove_phoenix_federation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_phoenix_federation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_phoenix_federation_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_phoenix_federation_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_rio_pact = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_rio_pact (scripted_effect) entered"
	}
	if = {
		limit = {
			rio_pact_exists = no
		}
		leave_current_faction = yes
		create_faction = rio_pact
		mark_as_rio_pact_member = yes
		set_variable = { GLOBAL.rio_pact_leader = THIS }
	}
	else = {
		join_rio_pact = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_rio_pact (scripted_effect) exited"
	}
}

d_join_rio_pact = {
	log = "[GetDateText]: Adding [This.GetNameDef] to rio_pact..."
	create_or_join_rio_pact = yes
}

ask_to_join_rio_pact = {
	custom_effect_tooltip = ask_to_join_rio_pact_tt
	hidden_effect = {
		var:GLOBAL.rio_pact_leader = {
			country_event = {
				id = rio_pact_faction_events.1
			}
		}
	}
}

invite_to_rio_pact = {
	custom_effect_tooltip = invite_to_rio_pact_tt
	hidden_effect = {
		country_event = {
			id = rio_pact_faction_events.5
		}
	}
}

join_rio_pact = {
	custom_effect_tooltip = join_rio_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_rio_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_rio_pact_member = no }
			leave_current_faction = yes
			var:GLOBAL.rio_pact_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_rio_pact - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_rio_pact - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_rio_pact_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_rio_pact (scripted_effect) exited"
		}
	}
}

leave_rio_pact = {
	custom_effect_tooltip = leave_rio_pact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_rio_pact (scripted_effect) entered"
		}
		if = {
			limit = { is_rio_pact_member = yes }
			unmark_as_rio_pact_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_rio_pact (scripted_effect) exited"
		}
	}
}

mark_as_rio_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_rio_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_rio_pact_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = RRG }
		add_to_array = { GLOBAL.rio_pact_members = THIS }
		add_rio_pact_ally_strategies = yes
		#add_rio_pact_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_rio_pact_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_rio_pact_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_rio_pact_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_rio_pact_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_rio_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_rio_pact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_rio_pact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_rio_pact_member = yes }
		remove_rio_pact_ally_strategies = yes
		#remove_rio_pact_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.rio_pact_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_rio_pact_member = yes
			}
			unmark_as_rio_pact_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_rio_pact_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_rio_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_rio_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_rio_pact_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_rio_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_rio_pact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_rio_pact_ally_strategies (scripted_effect) exited"
	}
}

remove_rio_pact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_rio_pact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_rio_pact_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_rio_pact_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_senators_little_helpers = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_senators_little_helpers (scripted_effect) entered"
	}
	if = {
		limit = {
			senators_little_helpers_exists = no
		}
		leave_current_faction = yes
		create_faction = senators_little_helpers
		mark_as_senators_little_helpers_member = yes
		set_variable = { GLOBAL.senators_little_helpers_leader = THIS }
	}
	else = {
		join_senators_little_helpers = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_senators_little_helpers (scripted_effect) exited"
	}
}

d_join_senators_little_helpers = {
	log = "[GetDateText]: Adding [This.GetNameDef] to senators_little_helpers..."
	create_or_join_senators_little_helpers = yes
}

ask_to_join_senators_little_helpers = {
	custom_effect_tooltip = ask_to_join_senators_little_helpers_tt
	hidden_effect = {
		var:GLOBAL.senators_little_helpers_leader = {
			country_event = {
				id = senators_little_helpers_faction_events.1
			}
		}
	}
}

invite_to_senators_little_helpers = {
	custom_effect_tooltip = invite_to_senators_little_helpers_tt
	hidden_effect = {
		country_event = {
			id = senators_little_helpers_faction_events.5
		}
	}
}

join_senators_little_helpers = {
	custom_effect_tooltip = join_senators_little_helpers_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_senators_little_helpers (scripted_effect) entered"
		}
		if = {
			limit = { is_senators_little_helpers_member = no }
			leave_current_faction = yes
			var:GLOBAL.senators_little_helpers_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_senators_little_helpers - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_senators_little_helpers - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_senators_little_helpers_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_senators_little_helpers (scripted_effect) exited"
		}
	}
}

leave_senators_little_helpers = {
	custom_effect_tooltip = leave_senators_little_helpers_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_senators_little_helpers (scripted_effect) entered"
		}
		if = {
			limit = { is_senators_little_helpers_member = yes }
			unmark_as_senators_little_helpers_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_senators_little_helpers (scripted_effect) exited"
		}
	}
}

mark_as_senators_little_helpers_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_senators_little_helpers_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_senators_little_helpers_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NPE }
		add_to_array = { GLOBAL.senators_little_helpers_members = THIS }
		add_senators_little_helpers_ally_strategies = yes
		#add_senators_little_helpers_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_senators_little_helpers_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_senators_little_helpers_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_senators_little_helpers_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_senators_little_helpers_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_senators_little_helpers_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_senators_little_helpers_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_senators_little_helpers_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_senators_little_helpers_member = yes }
		remove_senators_little_helpers_ally_strategies = yes
		#remove_senators_little_helpers_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.senators_little_helpers_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_senators_little_helpers_member = yes
			}
			unmark_as_senators_little_helpers_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_senators_little_helpers_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_senators_little_helpers_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_senators_little_helpers_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_senators_little_helpers_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_senators_little_helpers_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_senators_little_helpers_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_senators_little_helpers_ally_strategies (scripted_effect) exited"
	}
}

remove_senators_little_helpers_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_senators_little_helpers_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_senators_little_helpers_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_senators_little_helpers_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_great_confederation = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_great_confederation (scripted_effect) entered"
	}
	if = {
		limit = {
			great_confederation_exists = no
		}
		leave_current_faction = yes
		create_faction = great_confederation
		mark_as_great_confederation_member = yes
		set_variable = { GLOBAL.great_confederation_leader = THIS }
	}
	else = {
		join_great_confederation = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_great_confederation (scripted_effect) exited"
	}
}

d_join_great_confederation = {
	log = "[GetDateText]: Adding [This.GetNameDef] to great_confederation..."
	create_or_join_great_confederation = yes
}

ask_to_join_great_confederation = {
	custom_effect_tooltip = ask_to_join_great_confederation_tt
	hidden_effect = {
		var:GLOBAL.great_confederation_leader = {
			country_event = {
				id = great_confederation_faction_events.1
			}
		}
	}
}

invite_to_great_confederation = {
	custom_effect_tooltip = invite_to_great_confederation_tt
	hidden_effect = {
		country_event = {
			id = great_confederation_faction_events.5
		}
	}
}

join_great_confederation = {
	custom_effect_tooltip = join_great_confederation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_great_confederation (scripted_effect) entered"
		}
		if = {
			limit = { is_great_confederation_member = no }
			leave_current_faction = yes
			var:GLOBAL.great_confederation_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_great_confederation - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_great_confederation - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_great_confederation_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_great_confederation (scripted_effect) exited"
		}
	}
}

leave_great_confederation = {
	custom_effect_tooltip = leave_great_confederation_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_great_confederation (scripted_effect) entered"
		}
		if = {
			limit = { is_great_confederation_member = yes }
			unmark_as_great_confederation_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_great_confederation (scripted_effect) exited"
		}
	}
}

mark_as_great_confederation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_great_confederation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_great_confederation_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TAR }
		add_to_array = { GLOBAL.great_confederation_members = THIS }
		add_great_confederation_ally_strategies = yes
		#add_great_confederation_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_great_confederation_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_great_confederation_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_great_confederation_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_great_confederation_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_great_confederation_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_great_confederation_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_great_confederation_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_great_confederation_member = yes }
		remove_great_confederation_ally_strategies = yes
		#remove_great_confederation_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.great_confederation_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_great_confederation_member = yes
			}
			unmark_as_great_confederation_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_great_confederation_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_great_confederation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_great_confederation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_great_confederation_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_great_confederation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_great_confederation_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_great_confederation_ally_strategies (scripted_effect) exited"
	}
}

remove_great_confederation_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_great_confederation_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_great_confederation_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_great_confederation_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_texan_economic_union = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_texan_economic_union (scripted_effect) entered"
	}
	if = {
		limit = {
			texan_economic_union_exists = no
		}
		leave_current_faction = yes
		create_faction = texan_economic_union
		mark_as_texan_economic_union_member = yes
		set_variable = { GLOBAL.texan_economic_union_leader = THIS }
	}
	else = {
		join_texan_economic_union = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_texan_economic_union (scripted_effect) exited"
	}
}

d_join_texan_economic_union = {
	log = "[GetDateText]: Adding [This.GetNameDef] to texan_economic_union..."
	create_or_join_texan_economic_union = yes
}

ask_to_join_texan_economic_union = {
	custom_effect_tooltip = ask_to_join_texan_economic_union_tt
	hidden_effect = {
		var:GLOBAL.texan_economic_union_leader = {
			country_event = {
				id = texan_economic_union_faction_events.1
			}
		}
	}
}

invite_to_texan_economic_union = {
	custom_effect_tooltip = invite_to_texan_economic_union_tt
	hidden_effect = {
		country_event = {
			id = texan_economic_union_faction_events.5
		}
	}
}

join_texan_economic_union = {
	custom_effect_tooltip = join_texan_economic_union_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_texan_economic_union (scripted_effect) entered"
		}
		if = {
			limit = { is_texan_economic_union_member = no }
			leave_current_faction = yes
			var:GLOBAL.texan_economic_union_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_texan_economic_union - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_texan_economic_union - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_texan_economic_union_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_texan_economic_union (scripted_effect) exited"
		}
	}
}

leave_texan_economic_union = {
	custom_effect_tooltip = leave_texan_economic_union_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_texan_economic_union (scripted_effect) entered"
		}
		if = {
			limit = { is_texan_economic_union_member = yes }
			unmark_as_texan_economic_union_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_texan_economic_union (scripted_effect) exited"
		}
	}
}

mark_as_texan_economic_union_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_texan_economic_union_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_texan_economic_union_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TBH }
		add_to_array = { GLOBAL.texan_economic_union_members = THIS }
		add_texan_economic_union_ally_strategies = yes
		#add_texan_economic_union_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_texan_economic_union_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_texan_economic_union_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_texan_economic_union_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_texan_economic_union_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_texan_economic_union_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_texan_economic_union_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_texan_economic_union_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_texan_economic_union_member = yes }
		remove_texan_economic_union_ally_strategies = yes
		#remove_texan_economic_union_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.texan_economic_union_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_texan_economic_union_member = yes
			}
			unmark_as_texan_economic_union_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_texan_economic_union_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_texan_economic_union_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_texan_economic_union_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_texan_economic_union_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_texan_economic_union_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_texan_economic_union_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_texan_economic_union_ally_strategies (scripted_effect) exited"
	}
}

remove_texan_economic_union_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_texan_economic_union_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_texan_economic_union_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_texan_economic_union_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_unbroken_coast = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_unbroken_coast (scripted_effect) entered"
	}
	if = {
		limit = {
			unbroken_coast_exists = no
		}
		leave_current_faction = yes
		create_faction = unbroken_coast
		mark_as_unbroken_coast_member = yes
		set_variable = { GLOBAL.unbroken_coast_leader = THIS }
	}
	else = {
		join_unbroken_coast = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_unbroken_coast (scripted_effect) exited"
	}
}

d_join_unbroken_coast = {
	log = "[GetDateText]: Adding [This.GetNameDef] to unbroken_coast..."
	create_or_join_unbroken_coast = yes
}

ask_to_join_unbroken_coast = {
	custom_effect_tooltip = ask_to_join_unbroken_coast_tt
	hidden_effect = {
		var:GLOBAL.unbroken_coast_leader = {
			country_event = {
				id = unbroken_coast_faction_events.1
			}
		}
	}
}

invite_to_unbroken_coast = {
	custom_effect_tooltip = invite_to_unbroken_coast_tt
	hidden_effect = {
		country_event = {
			id = unbroken_coast_faction_events.5
		}
	}
}

join_unbroken_coast = {
	custom_effect_tooltip = join_unbroken_coast_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_unbroken_coast (scripted_effect) entered"
		}
		if = {
			limit = { is_unbroken_coast_member = no }
			leave_current_faction = yes
			var:GLOBAL.unbroken_coast_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_unbroken_coast - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_unbroken_coast - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_unbroken_coast_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_unbroken_coast (scripted_effect) exited"
		}
	}
}

leave_unbroken_coast = {
	custom_effect_tooltip = leave_unbroken_coast_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_unbroken_coast (scripted_effect) entered"
		}
		if = {
			limit = { is_unbroken_coast_member = yes }
			unmark_as_unbroken_coast_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_unbroken_coast (scripted_effect) exited"
		}
	}
}

mark_as_unbroken_coast_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_unbroken_coast_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_unbroken_coast_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = VIC }
		add_to_array = { GLOBAL.unbroken_coast_members = THIS }
		add_unbroken_coast_ally_strategies = yes
		#add_unbroken_coast_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_unbroken_coast_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_unbroken_coast_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_unbroken_coast_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_unbroken_coast_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_unbroken_coast_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_unbroken_coast_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_unbroken_coast_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_unbroken_coast_member = yes }
		remove_unbroken_coast_ally_strategies = yes
		#remove_unbroken_coast_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.unbroken_coast_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_unbroken_coast_member = yes
			}
			unmark_as_unbroken_coast_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_unbroken_coast_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_unbroken_coast_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_unbroken_coast_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_unbroken_coast_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_unbroken_coast_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_unbroken_coast_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_unbroken_coast_ally_strategies (scripted_effect) exited"
	}
}

remove_unbroken_coast_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_unbroken_coast_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_unbroken_coast_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_unbroken_coast_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_western_enclave = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_western_enclave (scripted_effect) entered"
	}
	if = {
		limit = {
			western_enclave_exists = no
		}
		leave_current_faction = yes
		create_faction = western_enclave
		mark_as_western_enclave_member = yes
		set_variable = { GLOBAL.western_enclave_leader = THIS }
	}
	else = {
		join_western_enclave = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_western_enclave (scripted_effect) exited"
	}
}

d_join_western_enclave = {
	log = "[GetDateText]: Adding [This.GetNameDef] to western_enclave..."
	create_or_join_western_enclave = yes
}

ask_to_join_western_enclave = {
	custom_effect_tooltip = ask_to_join_western_enclave_tt
	hidden_effect = {
		var:GLOBAL.western_enclave_leader = {
			country_event = {
				id = western_enclave_faction_events.1
			}
		}
	}
}

invite_to_western_enclave = {
	custom_effect_tooltip = invite_to_western_enclave_tt
	hidden_effect = {
		country_event = {
			id = western_enclave_faction_events.5
		}
	}
}

join_western_enclave = {
	custom_effect_tooltip = join_western_enclave_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_western_enclave (scripted_effect) entered"
		}
		if = {
			limit = { is_western_enclave_member = no }
			leave_current_faction = yes
			var:GLOBAL.western_enclave_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_western_enclave - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_western_enclave - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_western_enclave_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_western_enclave (scripted_effect) exited"
		}
	}
}

leave_western_enclave = {
	custom_effect_tooltip = leave_western_enclave_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_western_enclave (scripted_effect) entered"
		}
		if = {
			limit = { is_western_enclave_member = yes }
			unmark_as_western_enclave_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_western_enclave (scripted_effect) exited"
		}
	}
}

mark_as_western_enclave_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_western_enclave_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_western_enclave_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = ENC }
		add_to_array = { GLOBAL.western_enclave_members = THIS }
		add_western_enclave_ally_strategies = yes
		#add_western_enclave_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_western_enclave_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_western_enclave_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_western_enclave_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_western_enclave_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_western_enclave_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_western_enclave_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_western_enclave_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_western_enclave_member = yes }
		remove_western_enclave_ally_strategies = yes
		#remove_western_enclave_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.western_enclave_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_western_enclave_member = yes
			}
			unmark_as_western_enclave_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_western_enclave_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_western_enclave_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_western_enclave_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_western_enclave_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_western_enclave_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_western_enclave_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_western_enclave_ally_strategies (scripted_effect) exited"
	}
}

remove_western_enclave_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_western_enclave_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_western_enclave_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_western_enclave_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_order_of_st_joseph = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_order_of_st_joseph (scripted_effect) entered"
	}
	if = {
		limit = {
			order_of_st_joseph_exists = no
		}
		leave_current_faction = yes
		create_faction = order_of_st_joseph
		mark_as_order_of_st_joseph_member = yes
		set_variable = { GLOBAL.order_of_st_joseph_leader = THIS }
	}
	else = {
		join_order_of_st_joseph = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_order_of_st_joseph (scripted_effect) exited"
	}
}

d_join_order_of_st_joseph = {
	log = "[GetDateText]: Adding [This.GetNameDef] to order_of_st_joseph..."
	create_or_join_order_of_st_joseph = yes
}

ask_to_join_order_of_st_joseph = {
	custom_effect_tooltip = ask_to_join_order_of_st_joseph_tt
	hidden_effect = {
		var:GLOBAL.order_of_st_joseph_leader = {
			country_event = {
				id = order_of_st_joseph_faction_events.1
			}
		}
	}
}

invite_to_order_of_st_joseph = {
	custom_effect_tooltip = invite_to_order_of_st_joseph_tt
	hidden_effect = {
		country_event = {
			id = order_of_st_joseph_faction_events.5
		}
	}
}

join_order_of_st_joseph = {
	custom_effect_tooltip = join_order_of_st_joseph_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_order_of_st_joseph (scripted_effect) entered"
		}
		if = {
			limit = { is_order_of_st_joseph_member = no }
			leave_current_faction = yes
			var:GLOBAL.order_of_st_joseph_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_order_of_st_joseph - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_order_of_st_joseph - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_order_of_st_joseph_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_order_of_st_joseph (scripted_effect) exited"
		}
	}
}

leave_order_of_st_joseph = {
	custom_effect_tooltip = leave_order_of_st_joseph_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_order_of_st_joseph (scripted_effect) entered"
		}
		if = {
			limit = { is_order_of_st_joseph_member = yes }
			unmark_as_order_of_st_joseph_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_order_of_st_joseph (scripted_effect) exited"
		}
	}
}

mark_as_order_of_st_joseph_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_order_of_st_joseph_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_order_of_st_joseph_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = OST }
		add_to_array = { GLOBAL.order_of_st_joseph_members = THIS }
		add_order_of_st_joseph_ally_strategies = yes
		#add_order_of_st_joseph_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_order_of_st_joseph_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_order_of_st_joseph_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_order_of_st_joseph_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_order_of_st_joseph_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_order_of_st_joseph_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_order_of_st_joseph_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_order_of_st_joseph_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_order_of_st_joseph_member = yes }
		remove_order_of_st_joseph_ally_strategies = yes
		#remove_order_of_st_joseph_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.order_of_st_joseph_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_order_of_st_joseph_member = yes
			}
			unmark_as_order_of_st_joseph_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_order_of_st_joseph_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_order_of_st_joseph_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_order_of_st_joseph_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_order_of_st_joseph_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_order_of_st_joseph_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_order_of_st_joseph_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_order_of_st_joseph_ally_strategies (scripted_effect) exited"
	}
}

remove_order_of_st_joseph_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_order_of_st_joseph_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_order_of_st_joseph_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_order_of_st_joseph_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_breach_ferals = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_breach_ferals (scripted_effect) entered"
	}
	if = {
		limit = {
			breach_ferals_exists = no
		}
		leave_current_faction = yes
		create_faction = breach_ferals
		mark_as_breach_ferals_member = yes
		set_variable = { GLOBAL.breach_ferals_leader = THIS }
	}
	else = {
		join_breach_ferals = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_breach_ferals (scripted_effect) exited"
	}
}

d_join_breach_ferals = {
	log = "[GetDateText]: Adding [This.GetNameDef] to breach_ferals..."
	create_or_join_breach_ferals = yes
}

ask_to_join_breach_ferals = {
	custom_effect_tooltip = ask_to_join_breach_ferals_tt
	hidden_effect = {
		var:GLOBAL.breach_ferals_leader = {
			country_event = {
				id = breach_ferals_faction_events.1
			}
		}
	}
}

invite_to_breach_ferals = {
	custom_effect_tooltip = invite_to_breach_ferals_tt
	hidden_effect = {
		country_event = {
			id = breach_ferals_faction_events.5
		}
	}
}

join_breach_ferals = {
	custom_effect_tooltip = join_breach_ferals_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_breach_ferals (scripted_effect) entered"
		}
		if = {
			limit = { is_breach_ferals_member = no }
			leave_current_faction = yes
			var:GLOBAL.breach_ferals_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_breach_ferals - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_breach_ferals - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_breach_ferals_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_breach_ferals (scripted_effect) exited"
		}
	}
}

leave_breach_ferals = {
	custom_effect_tooltip = leave_breach_ferals_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_breach_ferals (scripted_effect) entered"
		}
		if = {
			limit = { is_breach_ferals_member = yes }
			unmark_as_breach_ferals_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_breach_ferals (scripted_effect) exited"
		}
	}
}

mark_as_breach_ferals_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_breach_ferals_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_breach_ferals_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BRE }
		add_to_array = { GLOBAL.breach_ferals_members = THIS }
		add_breach_ferals_ally_strategies = yes
		#add_breach_ferals_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_breach_ferals_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_breach_ferals_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_breach_ferals_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_breach_ferals_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_breach_ferals_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_breach_ferals_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_breach_ferals_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_breach_ferals_member = yes }
		remove_breach_ferals_ally_strategies = yes
		#remove_breach_ferals_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.breach_ferals_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_breach_ferals_member = yes
			}
			unmark_as_breach_ferals_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_breach_ferals_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_breach_ferals_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_breach_ferals_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_breach_ferals_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_breach_ferals_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_breach_ferals_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_breach_ferals_ally_strategies (scripted_effect) exited"
	}
}

remove_breach_ferals_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_breach_ferals_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_breach_ferals_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_breach_ferals_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_white_sands_compact = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_white_sands_compact (scripted_effect) entered"
	}
	if = {
		limit = {
			white_sands_compact_exists = no
		}
		leave_current_faction = yes
		create_faction = white_sands_compact
		mark_as_white_sands_compact_member = yes
		set_variable = { GLOBAL.white_sands_compact_leader = THIS }
	}
	else = {
		join_white_sands_compact = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_white_sands_compact (scripted_effect) exited"
	}
}

d_join_white_sands_compact = {
	log = "[GetDateText]: Adding [This.GetNameDef] to white_sands_compact..."
	create_or_join_white_sands_compact = yes
}

ask_to_join_white_sands_compact = {
	custom_effect_tooltip = ask_to_join_white_sands_compact_tt
	hidden_effect = {
		var:GLOBAL.white_sands_compact_leader = {
			country_event = {
				id = white_sands_compact_faction_events.1
			}
		}
	}
}

invite_to_white_sands_compact = {
	custom_effect_tooltip = invite_to_white_sands_compact_tt
	hidden_effect = {
		country_event = {
			id = white_sands_compact_faction_events.5
		}
	}
}

join_white_sands_compact = {
	custom_effect_tooltip = join_white_sands_compact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_white_sands_compact (scripted_effect) entered"
		}
		if = {
			limit = { is_white_sands_compact_member = no }
			leave_current_faction = yes
			var:GLOBAL.white_sands_compact_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_white_sands_compact - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_white_sands_compact - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_white_sands_compact_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_white_sands_compact (scripted_effect) exited"
		}
	}
}

leave_white_sands_compact = {
	custom_effect_tooltip = leave_white_sands_compact_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_white_sands_compact (scripted_effect) entered"
		}
		if = {
			limit = { is_white_sands_compact_member = yes }
			unmark_as_white_sands_compact_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_white_sands_compact (scripted_effect) exited"
		}
	}
}

mark_as_white_sands_compact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_white_sands_compact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_white_sands_compact_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = RSR }
		add_to_array = { GLOBAL.white_sands_compact_members = THIS }
		add_white_sands_compact_ally_strategies = yes
		#add_white_sands_compact_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_white_sands_compact_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_white_sands_compact_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_white_sands_compact_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_white_sands_compact_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_white_sands_compact_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_white_sands_compact_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_white_sands_compact_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_white_sands_compact_member = yes }
		remove_white_sands_compact_ally_strategies = yes
		#remove_white_sands_compact_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.white_sands_compact_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_white_sands_compact_member = yes
			}
			unmark_as_white_sands_compact_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_white_sands_compact_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_white_sands_compact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_white_sands_compact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_white_sands_compact_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_white_sands_compact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_white_sands_compact_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_white_sands_compact_ally_strategies (scripted_effect) exited"
	}
}

remove_white_sands_compact_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_white_sands_compact_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_white_sands_compact_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_white_sands_compact_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_cartel_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_cartel_faction (scripted_effect) entered"
	}
	if = {
		limit = {
			cartel_faction_exists = no
		}
		leave_current_faction = yes
		create_faction = cartel_faction
		mark_as_cartel_faction_member = yes
		set_variable = { GLOBAL.cartel_faction_leader = THIS }
	}
	else = {
		join_cartel_faction = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_cartel_faction (scripted_effect) exited"
	}
}

d_join_cartel_faction = {
	log = "[GetDateText]: Adding [This.GetNameDef] to cartel_faction..."
	create_or_join_cartel_faction = yes
}

ask_to_join_cartel_faction = {
	custom_effect_tooltip = ask_to_join_cartel_faction_tt
	hidden_effect = {
		var:GLOBAL.cartel_faction_leader = {
			country_event = {
				id = cartel_faction_faction_events.1
			}
		}
	}
}

invite_to_cartel_faction = {
	custom_effect_tooltip = invite_to_cartel_faction_tt
	hidden_effect = {
		country_event = {
			id = cartel_faction_faction_events.5
		}
	}
}

join_cartel_faction = {
	custom_effect_tooltip = join_cartel_faction_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_cartel_faction (scripted_effect) entered"
		}
		if = {
			limit = { is_cartel_faction_member = no }
			leave_current_faction = yes
			var:GLOBAL.cartel_faction_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_cartel_faction - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_cartel_faction - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_cartel_faction_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_cartel_faction (scripted_effect) exited"
		}
	}
}

leave_cartel_faction = {
	custom_effect_tooltip = leave_cartel_faction_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_cartel_faction (scripted_effect) entered"
		}
		if = {
			limit = { is_cartel_faction_member = yes }
			unmark_as_cartel_faction_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_cartel_faction (scripted_effect) exited"
		}
	}
}

mark_as_cartel_faction_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_cartel_faction_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_cartel_faction_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = SIN }
		add_to_array = { GLOBAL.cartel_faction_members = THIS }
		add_cartel_faction_ally_strategies = yes
		#add_cartel_faction_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_cartel_faction_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_cartel_faction_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_cartel_faction_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_cartel_faction_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_cartel_faction_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_cartel_faction_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_cartel_faction_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_cartel_faction_member = yes }
		remove_cartel_faction_ally_strategies = yes
		#remove_cartel_faction_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.cartel_faction_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_cartel_faction_member = yes
			}
			unmark_as_cartel_faction_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_cartel_faction_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_cartel_faction_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_cartel_faction_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_cartel_faction_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_cartel_faction_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_cartel_faction_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_cartel_faction_ally_strategies (scripted_effect) exited"
	}
}

remove_cartel_faction_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_cartel_faction_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_cartel_faction_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_cartel_faction_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_cascadia_pirates = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_cascadia_pirates (scripted_effect) entered"
	}
	if = {
		limit = {
			cascadia_pirates_exists = no
		}
		leave_current_faction = yes
		create_faction = cascadia_pirates
		mark_as_cascadia_pirates_member = yes
		set_variable = { GLOBAL.cascadia_pirates_leader = THIS }
	}
	else = {
		join_cascadia_pirates = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_cascadia_pirates (scripted_effect) exited"
	}
}

d_join_cascadia_pirates = {
	log = "[GetDateText]: Adding [This.GetNameDef] to cascadia_pirates..."
	create_or_join_cascadia_pirates = yes
}

ask_to_join_cascadia_pirates = {
	custom_effect_tooltip = ask_to_join_cascadia_pirates_tt
	hidden_effect = {
		var:GLOBAL.cascadia_pirates_leader = {
			country_event = {
				id = cascadia_pirates_faction_events.1
			}
		}
	}
}

invite_to_cascadia_pirates = {
	custom_effect_tooltip = invite_to_cascadia_pirates_tt
	hidden_effect = {
		country_event = {
			id = cascadia_pirates_faction_events.5
		}
	}
}

join_cascadia_pirates = {
	custom_effect_tooltip = join_cascadia_pirates_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_cascadia_pirates (scripted_effect) entered"
		}
		if = {
			limit = { is_cascadia_pirates_member = no }
			leave_current_faction = yes
			var:GLOBAL.cascadia_pirates_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_cascadia_pirates - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_cascadia_pirates - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_cascadia_pirates_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_cascadia_pirates (scripted_effect) exited"
		}
	}
}

leave_cascadia_pirates = {
	custom_effect_tooltip = leave_cascadia_pirates_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_cascadia_pirates (scripted_effect) entered"
		}
		if = {
			limit = { is_cascadia_pirates_member = yes }
			unmark_as_cascadia_pirates_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_cascadia_pirates (scripted_effect) exited"
		}
	}
}

mark_as_cascadia_pirates_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_cascadia_pirates_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_cascadia_pirates_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = HAI }
		add_to_array = { GLOBAL.cascadia_pirates_members = THIS }
		add_cascadia_pirates_ally_strategies = yes
		#add_cascadia_pirates_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_cascadia_pirates_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_cascadia_pirates_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_cascadia_pirates_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_cascadia_pirates_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_cascadia_pirates_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_cascadia_pirates_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_cascadia_pirates_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_cascadia_pirates_member = yes }
		remove_cascadia_pirates_ally_strategies = yes
		#remove_cascadia_pirates_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.cascadia_pirates_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_cascadia_pirates_member = yes
			}
			unmark_as_cascadia_pirates_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_cascadia_pirates_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_cascadia_pirates_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_cascadia_pirates_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_cascadia_pirates_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_cascadia_pirates_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_cascadia_pirates_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_cascadia_pirates_ally_strategies (scripted_effect) exited"
	}
}

remove_cascadia_pirates_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_cascadia_pirates_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_cascadia_pirates_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_cascadia_pirates_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_transcascadia_republic = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_transcascadia_republic (scripted_effect) entered"
	}
	if = {
		limit = {
			transcascadia_republic_exists = no
		}
		leave_current_faction = yes
		create_faction = transcascadia_republic
		mark_as_transcascadia_republic_member = yes
		set_variable = { GLOBAL.transcascadia_republic_leader = THIS }
	}
	else = {
		join_transcascadia_republic = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_transcascadia_republic (scripted_effect) exited"
	}
}

d_join_transcascadia_republic = {
	log = "[GetDateText]: Adding [This.GetNameDef] to transcascadia_republic..."
	create_or_join_transcascadia_republic = yes
}

ask_to_join_transcascadia_republic = {
	custom_effect_tooltip = ask_to_join_transcascadia_republic_tt
	hidden_effect = {
		var:GLOBAL.transcascadia_republic_leader = {
			country_event = {
				id = transcascadia_republic_faction_events.1
			}
		}
	}
}

invite_to_transcascadia_republic = {
	custom_effect_tooltip = invite_to_transcascadia_republic_tt
	hidden_effect = {
		country_event = {
			id = transcascadia_republic_faction_events.5
		}
	}
}

join_transcascadia_republic = {
	custom_effect_tooltip = join_transcascadia_republic_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_transcascadia_republic (scripted_effect) entered"
		}
		if = {
			limit = { is_transcascadia_republic_member = no }
			leave_current_faction = yes
			var:GLOBAL.transcascadia_republic_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_transcascadia_republic - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_transcascadia_republic - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_transcascadia_republic_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_transcascadia_republic (scripted_effect) exited"
		}
	}
}

leave_transcascadia_republic = {
	custom_effect_tooltip = leave_transcascadia_republic_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_transcascadia_republic (scripted_effect) entered"
		}
		if = {
			limit = { is_transcascadia_republic_member = yes }
			unmark_as_transcascadia_republic_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_transcascadia_republic (scripted_effect) exited"
		}
	}
}

mark_as_transcascadia_republic_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_transcascadia_republic_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_transcascadia_republic_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = HAI }
		add_to_array = { GLOBAL.transcascadia_republic_members = THIS }
		add_transcascadia_republic_ally_strategies = yes
		#add_transcascadia_republic_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_transcascadia_republic_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_transcascadia_republic_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_transcascadia_republic_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_transcascadia_republic_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_transcascadia_republic_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_transcascadia_republic_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_transcascadia_republic_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_transcascadia_republic_member = yes }
		remove_transcascadia_republic_ally_strategies = yes
		#remove_transcascadia_republic_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.transcascadia_republic_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_transcascadia_republic_member = yes
			}
			unmark_as_transcascadia_republic_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_transcascadia_republic_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_transcascadia_republic_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_transcascadia_republic_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_transcascadia_republic_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_transcascadia_republic_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_transcascadia_republic_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_transcascadia_republic_ally_strategies (scripted_effect) exited"
	}
}

remove_transcascadia_republic_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_transcascadia_republic_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_transcascadia_republic_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_transcascadia_republic_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_new_california = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_new_california (scripted_effect) entered"
	}
	if = {
		limit = {
			new_california_exists = no
		}
		leave_current_faction = yes
		create_faction = new_california
		mark_as_new_california_member = yes
		set_variable = { GLOBAL.new_california_leader = THIS }
	}
	else = {
		join_new_california = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_new_california (scripted_effect) exited"
	}
}

d_join_new_california = {
	log = "[GetDateText]: Adding [This.GetNameDef] to new_california..."
	create_or_join_new_california = yes
}

ask_to_join_new_california = {
	custom_effect_tooltip = ask_to_join_new_california_tt
	hidden_effect = {
		var:GLOBAL.new_california_leader = {
			country_event = {
				id = new_california_faction_events.1
			}
		}
	}
}

invite_to_new_california = {
	custom_effect_tooltip = invite_to_new_california_tt
	hidden_effect = {
		country_event = {
			id = new_california_faction_events.5
		}
	}
}

join_new_california = {
	custom_effect_tooltip = join_new_california_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_new_california (scripted_effect) entered"
		}
		if = {
			limit = { is_new_california_member = no }
			leave_current_faction = yes
			var:GLOBAL.new_california_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_new_california - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_new_california - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_new_california_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_new_california (scripted_effect) exited"
		}
	}
}

leave_new_california = {
	custom_effect_tooltip = leave_new_california_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_new_california (scripted_effect) entered"
		}
		if = {
			limit = { is_new_california_member = yes }
			unmark_as_new_california_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_new_california (scripted_effect) exited"
		}
	}
}

mark_as_new_california_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_new_california_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_new_california_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NCR }
		add_to_array = { GLOBAL.new_california_members = THIS }
		add_new_california_ally_strategies = yes
		#add_new_california_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_new_california_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_new_california_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_new_california_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_new_california_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_new_california_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_new_california_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_new_california_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_new_california_member = yes }
		remove_new_california_ally_strategies = yes
		#remove_new_california_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.new_california_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_new_california_member = yes
			}
			unmark_as_new_california_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_new_california_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_new_california_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_new_california_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_new_california_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_new_california_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_new_california_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_new_california_ally_strategies (scripted_effect) exited"
	}
}

remove_new_california_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_new_california_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_new_california_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_new_california_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_the_second_coalition = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_the_second_coalition (scripted_effect) entered"
	}
	if = {
		limit = {
			the_second_coalition_exists = no
		}
		leave_current_faction = yes
		create_faction = the_second_coalition
		mark_as_the_second_coalition_member = yes
		set_variable = { GLOBAL.the_second_coalition_leader = THIS }
	}
	else = {
		join_the_second_coalition = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_the_second_coalition (scripted_effect) exited"
	}
}

d_join_the_second_coalition = {
	log = "[GetDateText]: Adding [This.GetNameDef] to the_second_coalition..."
	create_or_join_the_second_coalition = yes
}

ask_to_join_the_second_coalition = {
	custom_effect_tooltip = ask_to_join_the_second_coalition_tt
	hidden_effect = {
		var:GLOBAL.the_second_coalition_leader = {
			country_event = {
				id = the_second_coalition_faction_events.1
			}
		}
	}
}

invite_to_the_second_coalition = {
	custom_effect_tooltip = invite_to_the_second_coalition_tt
	hidden_effect = {
		country_event = {
			id = the_second_coalition_faction_events.5
		}
	}
}

join_the_second_coalition = {
	custom_effect_tooltip = join_the_second_coalition_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_the_second_coalition (scripted_effect) entered"
		}
		if = {
			limit = { is_the_second_coalition_member = no }
			leave_current_faction = yes
			var:GLOBAL.the_second_coalition_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_the_second_coalition - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_the_second_coalition - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_the_second_coalition_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_the_second_coalition (scripted_effect) exited"
		}
	}
}

leave_the_second_coalition = {
	custom_effect_tooltip = leave_the_second_coalition_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_the_second_coalition (scripted_effect) entered"
		}
		if = {
			limit = { is_the_second_coalition_member = yes }
			unmark_as_the_second_coalition_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_the_second_coalition (scripted_effect) exited"
		}
	}
}

mark_as_the_second_coalition_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_the_second_coalition_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_the_second_coalition_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = WPG }
		add_to_array = { GLOBAL.the_second_coalition_members = THIS }
		add_the_second_coalition_ally_strategies = yes
		#add_the_second_coalition_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_the_second_coalition_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_the_second_coalition_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_the_second_coalition_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_the_second_coalition_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_the_second_coalition_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_the_second_coalition_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_the_second_coalition_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_the_second_coalition_member = yes }
		remove_the_second_coalition_ally_strategies = yes
		#remove_the_second_coalition_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.the_second_coalition_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_the_second_coalition_member = yes
			}
			unmark_as_the_second_coalition_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_the_second_coalition_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_the_second_coalition_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_the_second_coalition_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_the_second_coalition_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_the_second_coalition_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_the_second_coalition_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_the_second_coalition_ally_strategies (scripted_effect) exited"
	}
}

remove_the_second_coalition_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_the_second_coalition_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_the_second_coalition_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_the_second_coalition_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_imperium_mexicanum = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_imperium_mexicanum (scripted_effect) entered"
	}
	if = {
		limit = {
			imperium_mexicanum_exists = no
		}
		leave_current_faction = yes
		create_faction = imperium_mexicanum
		mark_as_imperium_mexicanum_member = yes
		set_variable = { GLOBAL.imperium_mexicanum_leader = THIS }
	}
	else = {
		join_imperium_mexicanum = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_imperium_mexicanum (scripted_effect) exited"
	}
}

d_join_imperium_mexicanum = {
	log = "[GetDateText]: Adding [This.GetNameDef] to imperium_mexicanum..."
	create_or_join_imperium_mexicanum = yes
}

ask_to_join_imperium_mexicanum = {
	custom_effect_tooltip = ask_to_join_imperium_mexicanum_tt
	hidden_effect = {
		var:GLOBAL.imperium_mexicanum_leader = {
			country_event = {
				id = imperium_mexicanum_faction_events.1
			}
		}
	}
}

invite_to_imperium_mexicanum = {
	custom_effect_tooltip = invite_to_imperium_mexicanum_tt
	hidden_effect = {
		country_event = {
			id = imperium_mexicanum_faction_events.5
		}
	}
}

join_imperium_mexicanum = {
	custom_effect_tooltip = join_imperium_mexicanum_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_imperium_mexicanum (scripted_effect) entered"
		}
		if = {
			limit = { is_imperium_mexicanum_member = no }
			leave_current_faction = yes
			var:GLOBAL.imperium_mexicanum_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_imperium_mexicanum - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_imperium_mexicanum - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_imperium_mexicanum_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_imperium_mexicanum (scripted_effect) exited"
		}
	}
}

leave_imperium_mexicanum = {
	custom_effect_tooltip = leave_imperium_mexicanum_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_imperium_mexicanum (scripted_effect) entered"
		}
		if = {
			limit = { is_imperium_mexicanum_member = yes }
			unmark_as_imperium_mexicanum_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_imperium_mexicanum (scripted_effect) exited"
		}
	}
}

mark_as_imperium_mexicanum_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_imperium_mexicanum_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_imperium_mexicanum_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = PLS }
		add_to_array = { GLOBAL.imperium_mexicanum_members = THIS }
		add_imperium_mexicanum_ally_strategies = yes
		#add_imperium_mexicanum_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_imperium_mexicanum_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_imperium_mexicanum_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_imperium_mexicanum_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_imperium_mexicanum_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_imperium_mexicanum_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_imperium_mexicanum_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_imperium_mexicanum_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_imperium_mexicanum_member = yes }
		remove_imperium_mexicanum_ally_strategies = yes
		#remove_imperium_mexicanum_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.imperium_mexicanum_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_imperium_mexicanum_member = yes
			}
			unmark_as_imperium_mexicanum_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_imperium_mexicanum_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_imperium_mexicanum_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_imperium_mexicanum_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_imperium_mexicanum_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_imperium_mexicanum_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_imperium_mexicanum_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_imperium_mexicanum_ally_strategies (scripted_effect) exited"
	}
}

remove_imperium_mexicanum_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_imperium_mexicanum_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_imperium_mexicanum_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_imperium_mexicanum_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_mexican_league = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mexican_league (scripted_effect) entered"
	}
	if = {
		limit = {
			mexican_league_exists = no
		}
		leave_current_faction = yes
		create_faction = mexican_league
		mark_as_mexican_league_member = yes
		set_variable = { GLOBAL.mexican_league_leader = THIS }
	}
	else = {
		join_mexican_league = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_mexican_league (scripted_effect) exited"
	}
}

d_join_mexican_league = {
	log = "[GetDateText]: Adding [This.GetNameDef] to mexican_league..."
	create_or_join_mexican_league = yes
}

ask_to_join_mexican_league = {
	custom_effect_tooltip = ask_to_join_mexican_league_tt
	hidden_effect = {
		var:GLOBAL.mexican_league_leader = {
			country_event = {
				id = mexican_league_faction_events.1
			}
		}
	}
}

invite_to_mexican_league = {
	custom_effect_tooltip = invite_to_mexican_league_tt
	hidden_effect = {
		country_event = {
			id = mexican_league_faction_events.5
		}
	}
}

join_mexican_league = {
	custom_effect_tooltip = join_mexican_league_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mexican_league (scripted_effect) entered"
		}
		if = {
			limit = { is_mexican_league_member = no }
			leave_current_faction = yes
			var:GLOBAL.mexican_league_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mexican_league - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_mexican_league - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_mexican_league_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_mexican_league (scripted_effect) exited"
		}
	}
}

leave_mexican_league = {
	custom_effect_tooltip = leave_mexican_league_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mexican_league (scripted_effect) entered"
		}
		if = {
			limit = { is_mexican_league_member = yes }
			unmark_as_mexican_league_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_mexican_league (scripted_effect) exited"
		}
	}
}

mark_as_mexican_league_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mexican_league_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mexican_league_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = PLS }
		add_to_array = { GLOBAL.mexican_league_members = THIS }
		add_mexican_league_ally_strategies = yes
		#add_mexican_league_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mexican_league_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mexican_league_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_mexican_league_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_mexican_league_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_mexican_league_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_mexican_league_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mexican_league_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_mexican_league_member = yes }
		remove_mexican_league_ally_strategies = yes
		#remove_mexican_league_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.mexican_league_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_mexican_league_member = yes
			}
			unmark_as_mexican_league_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_mexican_league_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_mexican_league_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mexican_league_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_mexican_league_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_mexican_league_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_mexican_league_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_mexican_league_ally_strategies (scripted_effect) exited"
	}
}

remove_mexican_league_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mexican_league_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_mexican_league_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_mexican_league_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_midnight_union = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_midnight_union (scripted_effect) entered"
	}
	if = {
		limit = {
			midnight_union_exists = no
		}
		leave_current_faction = yes
		create_faction = midnight_union
		mark_as_midnight_union_member = yes
		set_variable = { GLOBAL.midnight_union_leader = THIS }
	}
	else = {
		join_midnight_union = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_midnight_union (scripted_effect) exited"
	}
}

d_join_midnight_union = {
	log = "[GetDateText]: Adding [This.GetNameDef] to midnight_union..."
	create_or_join_midnight_union = yes
}

ask_to_join_midnight_union = {
	custom_effect_tooltip = ask_to_join_midnight_union_tt
	hidden_effect = {
		var:GLOBAL.midnight_union_leader = {
			country_event = {
				id = midnight_union_faction_events.1
			}
		}
	}
}

invite_to_midnight_union = {
	custom_effect_tooltip = invite_to_midnight_union_tt
	hidden_effect = {
		country_event = {
			id = midnight_union_faction_events.5
		}
	}
}

join_midnight_union = {
	custom_effect_tooltip = join_midnight_union_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_midnight_union (scripted_effect) entered"
		}
		if = {
			limit = { is_midnight_union_member = no }
			leave_current_faction = yes
			var:GLOBAL.midnight_union_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_midnight_union - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_midnight_union - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_midnight_union_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_midnight_union (scripted_effect) exited"
		}
	}
}

leave_midnight_union = {
	custom_effect_tooltip = leave_midnight_union_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_midnight_union (scripted_effect) entered"
		}
		if = {
			limit = { is_midnight_union_member = yes }
			unmark_as_midnight_union_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_midnight_union (scripted_effect) exited"
		}
	}
}

mark_as_midnight_union_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_midnight_union_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_midnight_union_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = ROT }
		add_to_array = { GLOBAL.midnight_union_members = THIS }
		add_midnight_union_ally_strategies = yes
		#add_midnight_union_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_midnight_union_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_midnight_union_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_midnight_union_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_midnight_union_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_midnight_union_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_midnight_union_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_midnight_union_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_midnight_union_member = yes }
		remove_midnight_union_ally_strategies = yes
		#remove_midnight_union_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.midnight_union_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_midnight_union_member = yes
			}
			unmark_as_midnight_union_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_midnight_union_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_midnight_union_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_midnight_union_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_midnight_union_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_midnight_union_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_midnight_union_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_midnight_union_ally_strategies (scripted_effect) exited"
	}
}

remove_midnight_union_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_midnight_union_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_midnight_union_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_midnight_union_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_big_circle = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_big_circle (scripted_effect) entered"
	}
	if = {
		limit = {
			big_circle_exists = no
		}
		leave_current_faction = yes
		create_faction = big_circle
		mark_as_big_circle_member = yes
		set_variable = { GLOBAL.big_circle_leader = THIS }
	}
	else = {
		join_big_circle = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_big_circle (scripted_effect) exited"
	}
}

d_join_big_circle = {
	log = "[GetDateText]: Adding [This.GetNameDef] to big_circle..."
	create_or_join_big_circle = yes
}

ask_to_join_big_circle = {
	custom_effect_tooltip = ask_to_join_big_circle_tt
	hidden_effect = {
		var:GLOBAL.big_circle_leader = {
			country_event = {
				id = big_circle_faction_events.1
			}
		}
	}
}

invite_to_big_circle = {
	custom_effect_tooltip = invite_to_big_circle_tt
	hidden_effect = {
		country_event = {
			id = big_circle_faction_events.5
		}
	}
}

join_big_circle = {
	custom_effect_tooltip = join_big_circle_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_big_circle (scripted_effect) entered"
		}
		if = {
			limit = { is_big_circle_member = no }
			leave_current_faction = yes
			var:GLOBAL.big_circle_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_big_circle - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_big_circle - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_big_circle_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_big_circle (scripted_effect) exited"
		}
	}
}

leave_big_circle = {
	custom_effect_tooltip = leave_big_circle_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_big_circle (scripted_effect) entered"
		}
		if = {
			limit = { is_big_circle_member = yes }
			unmark_as_big_circle_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_big_circle (scripted_effect) exited"
		}
	}
}

mark_as_big_circle_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_big_circle_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_big_circle_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = RBD }
		add_to_array = { GLOBAL.big_circle_members = THIS }
		add_big_circle_ally_strategies = yes
		#add_big_circle_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_big_circle_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_big_circle_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_big_circle_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_big_circle_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_big_circle_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_big_circle_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_big_circle_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_big_circle_member = yes }
		remove_big_circle_ally_strategies = yes
		#remove_big_circle_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.big_circle_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_big_circle_member = yes
			}
			unmark_as_big_circle_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_big_circle_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_big_circle_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_big_circle_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_big_circle_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_big_circle_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_big_circle_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_big_circle_ally_strategies (scripted_effect) exited"
	}
}

remove_big_circle_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_big_circle_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_big_circle_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_big_circle_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_dharma_way = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_dharma_way (scripted_effect) entered"
	}
	if = {
		limit = {
			dharma_way_exists = no
		}
		leave_current_faction = yes
		create_faction = dharma_way
		mark_as_dharma_way_member = yes
		set_variable = { GLOBAL.dharma_way_leader = THIS }
	}
	else = {
		join_dharma_way = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_dharma_way (scripted_effect) exited"
	}
}

d_join_dharma_way = {
	log = "[GetDateText]: Adding [This.GetNameDef] to dharma_way..."
	create_or_join_dharma_way = yes
}

ask_to_join_dharma_way = {
	custom_effect_tooltip = ask_to_join_dharma_way_tt
	hidden_effect = {
		var:GLOBAL.dharma_way_leader = {
			country_event = {
				id = dharma_way_faction_events.1
			}
		}
	}
}

invite_to_dharma_way = {
	custom_effect_tooltip = invite_to_dharma_way_tt
	hidden_effect = {
		country_event = {
			id = dharma_way_faction_events.5
		}
	}
}

join_dharma_way = {
	custom_effect_tooltip = join_dharma_way_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_dharma_way (scripted_effect) entered"
		}
		if = {
			limit = { is_dharma_way_member = no }
			leave_current_faction = yes
			var:GLOBAL.dharma_way_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_dharma_way - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_dharma_way - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_dharma_way_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_dharma_way (scripted_effect) exited"
		}
	}
}

leave_dharma_way = {
	custom_effect_tooltip = leave_dharma_way_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_dharma_way (scripted_effect) entered"
		}
		if = {
			limit = { is_dharma_way_member = yes }
			unmark_as_dharma_way_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_dharma_way (scripted_effect) exited"
		}
	}
}

mark_as_dharma_way_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_dharma_way_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_dharma_way_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BON }
		add_to_array = { GLOBAL.dharma_way_members = THIS }
		add_dharma_way_ally_strategies = yes
		#add_dharma_way_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_dharma_way_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_dharma_way_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_dharma_way_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_dharma_way_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_dharma_way_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_dharma_way_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_dharma_way_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_dharma_way_member = yes }
		remove_dharma_way_ally_strategies = yes
		#remove_dharma_way_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.dharma_way_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_dharma_way_member = yes
			}
			unmark_as_dharma_way_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_dharma_way_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_dharma_way_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_dharma_way_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_dharma_way_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_dharma_way_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_dharma_way_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_dharma_way_ally_strategies (scripted_effect) exited"
	}
}

remove_dharma_way_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_dharma_way_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_dharma_way_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_dharma_way_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_californian_hegemony = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_californian_hegemony (scripted_effect) entered"
	}
	if = {
		limit = {
			californian_hegemony_exists = no
		}
		leave_current_faction = yes
		create_faction = californian_hegemony
		mark_as_californian_hegemony_member = yes
		set_variable = { GLOBAL.californian_hegemony_leader = THIS }
	}
	else = {
		join_californian_hegemony = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_californian_hegemony (scripted_effect) exited"
	}
}

d_join_californian_hegemony = {
	log = "[GetDateText]: Adding [This.GetNameDef] to californian_hegemony..."
	create_or_join_californian_hegemony = yes
}

ask_to_join_californian_hegemony = {
	custom_effect_tooltip = ask_to_join_californian_hegemony_tt
	hidden_effect = {
		var:GLOBAL.californian_hegemony_leader = {
			country_event = {
				id = californian_hegemony_faction_events.1
			}
		}
	}
}

invite_to_californian_hegemony = {
	custom_effect_tooltip = invite_to_californian_hegemony_tt
	hidden_effect = {
		country_event = {
			id = californian_hegemony_faction_events.5
		}
	}
}

join_californian_hegemony = {
	custom_effect_tooltip = join_californian_hegemony_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_californian_hegemony (scripted_effect) entered"
		}
		if = {
			limit = { is_californian_hegemony_member = no }
			leave_current_faction = yes
			var:GLOBAL.californian_hegemony_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_californian_hegemony - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_californian_hegemony - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_californian_hegemony_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_californian_hegemony (scripted_effect) exited"
		}
	}
}

leave_californian_hegemony = {
	custom_effect_tooltip = leave_californian_hegemony_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_californian_hegemony (scripted_effect) entered"
		}
		if = {
			limit = { is_californian_hegemony_member = yes }
			unmark_as_californian_hegemony_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_californian_hegemony (scripted_effect) exited"
		}
	}
}

mark_as_californian_hegemony_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_californian_hegemony_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_californian_hegemony_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NCR }
		add_to_array = { GLOBAL.californian_hegemony_members = THIS }
		add_californian_hegemony_ally_strategies = yes
		#add_californian_hegemony_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_californian_hegemony_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_californian_hegemony_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_californian_hegemony_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_californian_hegemony_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_californian_hegemony_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_californian_hegemony_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_californian_hegemony_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_californian_hegemony_member = yes }
		remove_californian_hegemony_ally_strategies = yes
		#remove_californian_hegemony_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.californian_hegemony_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_californian_hegemony_member = yes
			}
			unmark_as_californian_hegemony_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_californian_hegemony_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_californian_hegemony_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_californian_hegemony_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_californian_hegemony_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_californian_hegemony_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_californian_hegemony_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_californian_hegemony_ally_strategies (scripted_effect) exited"
	}
}

remove_californian_hegemony_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_californian_hegemony_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_californian_hegemony_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_californian_hegemony_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_northern_congress = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_congress (scripted_effect) entered"
	}
	if = {
		limit = {
			northern_congress_exists = no
		}
		leave_current_faction = yes
		create_faction = northern_congress
		mark_as_northern_congress_member = yes
		set_variable = { GLOBAL.northern_congress_leader = THIS }
	}
	else = {
		join_northern_congress = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_congress (scripted_effect) exited"
	}
}

d_join_northern_congress = {
	log = "[GetDateText]: Adding [This.GetNameDef] to northern_congress..."
	create_or_join_northern_congress = yes
}

ask_to_join_northern_congress = {
	custom_effect_tooltip = ask_to_join_northern_congress_tt
	hidden_effect = {
		var:GLOBAL.northern_congress_leader = {
			country_event = {
				id = northern_congress_faction_events.1
			}
		}
	}
}

invite_to_northern_congress = {
	custom_effect_tooltip = invite_to_northern_congress_tt
	hidden_effect = {
		country_event = {
			id = northern_congress_faction_events.5
		}
	}
}

join_northern_congress = {
	custom_effect_tooltip = join_northern_congress_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_congress (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_congress_member = no }
			leave_current_faction = yes
			var:GLOBAL.northern_congress_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_congress - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_congress - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_northern_congress_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_congress (scripted_effect) exited"
		}
	}
}

leave_northern_congress = {
	custom_effect_tooltip = leave_northern_congress_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_congress (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_congress_member = yes }
			unmark_as_northern_congress_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_congress (scripted_effect) exited"
		}
	}
}

mark_as_northern_congress_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_congress_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_congress_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = MTC }
		add_to_array = { GLOBAL.northern_congress_members = THIS }
		add_northern_congress_ally_strategies = yes
		#add_northern_congress_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_congress_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_congress_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_northern_congress_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_congress_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_congress_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_northern_congress_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_congress_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_congress_member = yes }
		remove_northern_congress_ally_strategies = yes
		#remove_northern_congress_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.northern_congress_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_congress_member = yes
			}
			unmark_as_northern_congress_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_congress_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_northern_congress_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_congress_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_northern_congress_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_northern_congress_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_northern_congress_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_congress_ally_strategies (scripted_effect) exited"
	}
}

remove_northern_congress_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_congress_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_northern_congress_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_congress_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_road_warriors = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_road_warriors (scripted_effect) entered"
	}
	if = {
		limit = {
			road_warriors_exists = no
		}
		leave_current_faction = yes
		create_faction = road_warriors
		mark_as_road_warriors_member = yes
		set_variable = { GLOBAL.road_warriors_leader = THIS }
	}
	else = {
		join_road_warriors = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_road_warriors (scripted_effect) exited"
	}
}

d_join_road_warriors = {
	log = "[GetDateText]: Adding [This.GetNameDef] to road_warriors..."
	create_or_join_road_warriors = yes
}

ask_to_join_road_warriors = {
	custom_effect_tooltip = ask_to_join_road_warriors_tt
	hidden_effect = {
		var:GLOBAL.road_warriors_leader = {
			country_event = {
				id = road_warriors_faction_events.1
			}
		}
	}
}

invite_to_road_warriors = {
	custom_effect_tooltip = invite_to_road_warriors_tt
	hidden_effect = {
		country_event = {
			id = road_warriors_faction_events.5
		}
	}
}

join_road_warriors = {
	custom_effect_tooltip = join_road_warriors_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_road_warriors (scripted_effect) entered"
		}
		if = {
			limit = { is_road_warriors_member = no }
			leave_current_faction = yes
			var:GLOBAL.road_warriors_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_road_warriors - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_road_warriors - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_road_warriors_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_road_warriors (scripted_effect) exited"
		}
	}
}

leave_road_warriors = {
	custom_effect_tooltip = leave_road_warriors_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_road_warriors (scripted_effect) entered"
		}
		if = {
			limit = { is_road_warriors_member = yes }
			unmark_as_road_warriors_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_road_warriors (scripted_effect) exited"
		}
	}
}

mark_as_road_warriors_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_road_warriors_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_road_warriors_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = EHT }
		add_to_array = { GLOBAL.road_warriors_members = THIS }
		add_road_warriors_ally_strategies = yes
		#add_road_warriors_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_road_warriors_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_road_warriors_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_road_warriors_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_road_warriors_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_road_warriors_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_road_warriors_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_road_warriors_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_road_warriors_member = yes }
		remove_road_warriors_ally_strategies = yes
		#remove_road_warriors_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.road_warriors_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_road_warriors_member = yes
			}
			unmark_as_road_warriors_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_road_warriors_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_road_warriors_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_road_warriors_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_road_warriors_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_road_warriors_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_road_warriors_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_road_warriors_ally_strategies (scripted_effect) exited"
	}
}

remove_road_warriors_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_road_warriors_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_road_warriors_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_road_warriors_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_synergy_alliance = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_synergy_alliance (scripted_effect) entered"
	}
	if = {
		limit = {
			synergy_alliance_exists = no
		}
		leave_current_faction = yes
		create_faction = synergy_alliance
		mark_as_synergy_alliance_member = yes
		set_variable = { GLOBAL.synergy_alliance_leader = THIS }
	}
	else = {
		join_synergy_alliance = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_synergy_alliance (scripted_effect) exited"
	}
}

d_join_synergy_alliance = {
	log = "[GetDateText]: Adding [This.GetNameDef] to synergy_alliance..."
	create_or_join_synergy_alliance = yes
}

ask_to_join_synergy_alliance = {
	custom_effect_tooltip = ask_to_join_synergy_alliance_tt
	hidden_effect = {
		var:GLOBAL.synergy_alliance_leader = {
			country_event = {
				id = synergy_alliance_faction_events.1
			}
		}
	}
}

invite_to_synergy_alliance = {
	custom_effect_tooltip = invite_to_synergy_alliance_tt
	hidden_effect = {
		country_event = {
			id = synergy_alliance_faction_events.5
		}
	}
}

join_synergy_alliance = {
	custom_effect_tooltip = join_synergy_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_synergy_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_synergy_alliance_member = no }
			leave_current_faction = yes
			var:GLOBAL.synergy_alliance_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_synergy_alliance - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_synergy_alliance - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_synergy_alliance_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_synergy_alliance (scripted_effect) exited"
		}
	}
}

leave_synergy_alliance = {
	custom_effect_tooltip = leave_synergy_alliance_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_synergy_alliance (scripted_effect) entered"
		}
		if = {
			limit = { is_synergy_alliance_member = yes }
			unmark_as_synergy_alliance_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_synergy_alliance (scripted_effect) exited"
		}
	}
}

mark_as_synergy_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_synergy_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_synergy_alliance_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = CLK }
		add_to_array = { GLOBAL.synergy_alliance_members = THIS }
		add_synergy_alliance_ally_strategies = yes
		#add_synergy_alliance_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_synergy_alliance_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_synergy_alliance_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_synergy_alliance_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_synergy_alliance_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_synergy_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_synergy_alliance_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_synergy_alliance_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_synergy_alliance_member = yes }
		remove_synergy_alliance_ally_strategies = yes
		#remove_synergy_alliance_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.synergy_alliance_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_synergy_alliance_member = yes
			}
			unmark_as_synergy_alliance_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_synergy_alliance_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_synergy_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_synergy_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_synergy_alliance_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_synergy_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_synergy_alliance_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_synergy_alliance_ally_strategies (scripted_effect) exited"
	}
}

remove_synergy_alliance_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_synergy_alliance_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_synergy_alliance_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_synergy_alliance_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_vulpes_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_vulpes_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			vulpes_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = vulpes_legion
		mark_as_vulpes_legion_member = yes
		set_variable = { GLOBAL.vulpes_legion_leader = THIS }
	}
	else = {
		join_vulpes_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_vulpes_legion (scripted_effect) exited"
	}
}

d_join_vulpes_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to vulpes_legion..."
	create_or_join_vulpes_legion = yes
}

ask_to_join_vulpes_legion = {
	custom_effect_tooltip = ask_to_join_vulpes_legion_tt
	hidden_effect = {
		var:GLOBAL.vulpes_legion_leader = {
			country_event = {
				id = vulpes_legion_faction_events.1
			}
		}
	}
}

invite_to_vulpes_legion = {
	custom_effect_tooltip = invite_to_vulpes_legion_tt
	hidden_effect = {
		country_event = {
			id = vulpes_legion_faction_events.5
		}
	}
}

join_vulpes_legion = {
	custom_effect_tooltip = join_vulpes_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_vulpes_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_vulpes_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.vulpes_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_vulpes_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_vulpes_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_vulpes_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_vulpes_legion (scripted_effect) exited"
		}
	}
}

leave_vulpes_legion = {
	custom_effect_tooltip = leave_vulpes_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_vulpes_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_vulpes_legion_member = yes }
			unmark_as_vulpes_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_vulpes_legion (scripted_effect) exited"
		}
	}
}

mark_as_vulpes_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_vulpes_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_vulpes_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = VLP }
		add_to_array = { GLOBAL.vulpes_legion_members = THIS }
		add_vulpes_legion_ally_strategies = yes
		#add_vulpes_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_vulpes_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_vulpes_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_vulpes_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_vulpes_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_vulpes_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_vulpes_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_vulpes_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_vulpes_legion_member = yes }
		remove_vulpes_legion_ally_strategies = yes
		#remove_vulpes_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.vulpes_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_vulpes_legion_member = yes
			}
			unmark_as_vulpes_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_vulpes_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_vulpes_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_vulpes_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_vulpes_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_vulpes_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_vulpes_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_vulpes_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_vulpes_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_vulpes_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_vulpes_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_vulpes_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_aurelius_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_aurelius_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			aurelius_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = aurelius_legion
		mark_as_aurelius_legion_member = yes
		set_variable = { GLOBAL.aurelius_legion_leader = THIS }
	}
	else = {
		join_aurelius_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_aurelius_legion (scripted_effect) exited"
	}
}

d_join_aurelius_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to aurelius_legion..."
	create_or_join_aurelius_legion = yes
}

ask_to_join_aurelius_legion = {
	custom_effect_tooltip = ask_to_join_aurelius_legion_tt
	hidden_effect = {
		var:GLOBAL.aurelius_legion_leader = {
			country_event = {
				id = aurelius_legion_faction_events.1
			}
		}
	}
}

invite_to_aurelius_legion = {
	custom_effect_tooltip = invite_to_aurelius_legion_tt
	hidden_effect = {
		country_event = {
			id = aurelius_legion_faction_events.5
		}
	}
}

join_aurelius_legion = {
	custom_effect_tooltip = join_aurelius_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_aurelius_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_aurelius_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.aurelius_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_aurelius_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_aurelius_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_aurelius_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_aurelius_legion (scripted_effect) exited"
		}
	}
}

leave_aurelius_legion = {
	custom_effect_tooltip = leave_aurelius_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_aurelius_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_aurelius_legion_member = yes }
			unmark_as_aurelius_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_aurelius_legion (scripted_effect) exited"
		}
	}
}

mark_as_aurelius_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_aurelius_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_aurelius_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = AUR }
		add_to_array = { GLOBAL.aurelius_legion_members = THIS }
		add_aurelius_legion_ally_strategies = yes
		#add_aurelius_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_aurelius_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_aurelius_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_aurelius_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_aurelius_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_aurelius_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_aurelius_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_aurelius_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_aurelius_legion_member = yes }
		remove_aurelius_legion_ally_strategies = yes
		#remove_aurelius_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.aurelius_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_aurelius_legion_member = yes
			}
			unmark_as_aurelius_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_aurelius_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_aurelius_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_aurelius_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_aurelius_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_aurelius_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_aurelius_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_aurelius_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_aurelius_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_aurelius_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_aurelius_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_aurelius_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_lanius_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_lanius_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			lanius_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = lanius_legion
		mark_as_lanius_legion_member = yes
		set_variable = { GLOBAL.lanius_legion_leader = THIS }
	}
	else = {
		join_lanius_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_lanius_legion (scripted_effect) exited"
	}
}

d_join_lanius_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to lanius_legion..."
	create_or_join_lanius_legion = yes
}

ask_to_join_lanius_legion = {
	custom_effect_tooltip = ask_to_join_lanius_legion_tt
	hidden_effect = {
		var:GLOBAL.lanius_legion_leader = {
			country_event = {
				id = lanius_legion_faction_events.1
			}
		}
	}
}

invite_to_lanius_legion = {
	custom_effect_tooltip = invite_to_lanius_legion_tt
	hidden_effect = {
		country_event = {
			id = lanius_legion_faction_events.5
		}
	}
}

join_lanius_legion = {
	custom_effect_tooltip = join_lanius_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_lanius_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_lanius_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.lanius_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_lanius_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_lanius_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_lanius_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_lanius_legion (scripted_effect) exited"
		}
	}
}

leave_lanius_legion = {
	custom_effect_tooltip = leave_lanius_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_lanius_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_lanius_legion_member = yes }
			unmark_as_lanius_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_lanius_legion (scripted_effect) exited"
		}
	}
}

mark_as_lanius_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_lanius_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_lanius_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = LAN }
		add_to_array = { GLOBAL.lanius_legion_members = THIS }
		add_lanius_legion_ally_strategies = yes
		#add_lanius_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_lanius_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_lanius_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_lanius_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_lanius_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_lanius_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_lanius_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_lanius_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_lanius_legion_member = yes }
		remove_lanius_legion_ally_strategies = yes
		#remove_lanius_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.lanius_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_lanius_legion_member = yes
			}
			unmark_as_lanius_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_lanius_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_lanius_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_lanius_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_lanius_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_lanius_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_lanius_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_lanius_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_lanius_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_lanius_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_lanius_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_lanius_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_hades_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_hades_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			hades_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = hades_legion
		mark_as_hades_legion_member = yes
		set_variable = { GLOBAL.hades_legion_leader = THIS }
	}
	else = {
		join_hades_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_hades_legion (scripted_effect) exited"
	}
}

d_join_hades_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to hades_legion..."
	create_or_join_hades_legion = yes
}

ask_to_join_hades_legion = {
	custom_effect_tooltip = ask_to_join_hades_legion_tt
	hidden_effect = {
		var:GLOBAL.hades_legion_leader = {
			country_event = {
				id = hades_legion_faction_events.1
			}
		}
	}
}

invite_to_hades_legion = {
	custom_effect_tooltip = invite_to_hades_legion_tt
	hidden_effect = {
		country_event = {
			id = hades_legion_faction_events.5
		}
	}
}

join_hades_legion = {
	custom_effect_tooltip = join_hades_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_hades_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_hades_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.hades_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_hades_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_hades_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_hades_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_hades_legion (scripted_effect) exited"
		}
	}
}

leave_hades_legion = {
	custom_effect_tooltip = leave_hades_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_hades_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_hades_legion_member = yes }
			unmark_as_hades_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_hades_legion (scripted_effect) exited"
		}
	}
}

mark_as_hades_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_hades_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_hades_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = CAU }
		add_to_array = { GLOBAL.hades_legion_members = THIS }
		add_hades_legion_ally_strategies = yes
		#add_hades_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_hades_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_hades_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_hades_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_hades_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_hades_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_hades_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_hades_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_hades_legion_member = yes }
		remove_hades_legion_ally_strategies = yes
		#remove_hades_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.hades_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_hades_legion_member = yes
			}
			unmark_as_hades_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_hades_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_hades_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_hades_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_hades_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_hades_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_hades_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_hades_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_hades_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_hades_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_hades_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_hades_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_lucius_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_lucius_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			lucius_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = lucius_legion
		mark_as_lucius_legion_member = yes
		set_variable = { GLOBAL.lucius_legion_leader = THIS }
	}
	else = {
		join_lucius_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_lucius_legion (scripted_effect) exited"
	}
}

d_join_lucius_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to lucius_legion..."
	create_or_join_lucius_legion = yes
}

ask_to_join_lucius_legion = {
	custom_effect_tooltip = ask_to_join_lucius_legion_tt
	hidden_effect = {
		var:GLOBAL.lucius_legion_leader = {
			country_event = {
				id = lucius_legion_faction_events.1
			}
		}
	}
}

invite_to_lucius_legion = {
	custom_effect_tooltip = invite_to_lucius_legion_tt
	hidden_effect = {
		country_event = {
			id = lucius_legion_faction_events.5
		}
	}
}

join_lucius_legion = {
	custom_effect_tooltip = join_lucius_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_lucius_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_lucius_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.lucius_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_lucius_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_lucius_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_lucius_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_lucius_legion (scripted_effect) exited"
		}
	}
}

leave_lucius_legion = {
	custom_effect_tooltip = leave_lucius_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_lucius_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_lucius_legion_member = yes }
			unmark_as_lucius_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_lucius_legion (scripted_effect) exited"
		}
	}
}

mark_as_lucius_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_lucius_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_lucius_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = LUC }
		add_to_array = { GLOBAL.lucius_legion_members = THIS }
		add_lucius_legion_ally_strategies = yes
		#add_lucius_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_lucius_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_lucius_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_lucius_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_lucius_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_lucius_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_lucius_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_lucius_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_lucius_legion_member = yes }
		remove_lucius_legion_ally_strategies = yes
		#remove_lucius_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.lucius_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_lucius_legion_member = yes
			}
			unmark_as_lucius_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_lucius_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_lucius_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_lucius_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_lucius_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_lucius_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_lucius_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_lucius_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_lucius_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_lucius_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_lucius_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_lucius_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_malpais_legion = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_malpais_legion (scripted_effect) entered"
	}
	if = {
		limit = {
			malpais_legion_exists = no
		}
		leave_current_faction = yes
		create_faction = malpais_legion
		mark_as_malpais_legion_member = yes
		set_variable = { GLOBAL.malpais_legion_leader = THIS }
	}
	else = {
		join_malpais_legion = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_malpais_legion (scripted_effect) exited"
	}
}

d_join_malpais_legion = {
	log = "[GetDateText]: Adding [This.GetNameDef] to malpais_legion..."
	create_or_join_malpais_legion = yes
}

ask_to_join_malpais_legion = {
	custom_effect_tooltip = ask_to_join_malpais_legion_tt
	hidden_effect = {
		var:GLOBAL.malpais_legion_leader = {
			country_event = {
				id = malpais_legion_faction_events.1
			}
		}
	}
}

invite_to_malpais_legion = {
	custom_effect_tooltip = invite_to_malpais_legion_tt
	hidden_effect = {
		country_event = {
			id = malpais_legion_faction_events.5
		}
	}
}

join_malpais_legion = {
	custom_effect_tooltip = join_malpais_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_malpais_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_malpais_legion_member = no }
			leave_current_faction = yes
			var:GLOBAL.malpais_legion_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_malpais_legion - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_malpais_legion - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_malpais_legion_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_malpais_legion (scripted_effect) exited"
		}
	}
}

leave_malpais_legion = {
	custom_effect_tooltip = leave_malpais_legion_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_malpais_legion (scripted_effect) entered"
		}
		if = {
			limit = { is_malpais_legion_member = yes }
			unmark_as_malpais_legion_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_malpais_legion (scripted_effect) exited"
		}
	}
}

mark_as_malpais_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_malpais_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_malpais_legion_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = MAL }
		add_to_array = { GLOBAL.malpais_legion_members = THIS }
		add_malpais_legion_ally_strategies = yes
		#add_malpais_legion_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_malpais_legion_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_malpais_legion_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_malpais_legion_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_malpais_legion_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_malpais_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_malpais_legion_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_malpais_legion_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_malpais_legion_member = yes }
		remove_malpais_legion_ally_strategies = yes
		#remove_malpais_legion_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.malpais_legion_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_malpais_legion_member = yes
			}
			unmark_as_malpais_legion_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_malpais_legion_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_malpais_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_malpais_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_malpais_legion_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_malpais_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_malpais_legion_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_malpais_legion_ally_strategies (scripted_effect) exited"
	}
}

remove_malpais_legion_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_malpais_legion_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_malpais_legion_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_malpais_legion_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_northern_union = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_union (scripted_effect) entered"
	}
	if = {
		limit = {
			northern_union_exists = no
		}
		leave_current_faction = yes
		create_faction = northern_union
		mark_as_northern_union_member = yes
		set_variable = { GLOBAL.northern_union_leader = THIS }
	}
	else = {
		join_northern_union = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_union (scripted_effect) exited"
	}
}

d_join_northern_union = {
	log = "[GetDateText]: Adding [This.GetNameDef] to northern_union..."
	create_or_join_northern_union = yes
}

ask_to_join_northern_union = {
	custom_effect_tooltip = ask_to_join_northern_union_tt
	hidden_effect = {
		var:GLOBAL.northern_union_leader = {
			country_event = {
				id = northern_union_faction_events.1
			}
		}
	}
}

invite_to_northern_union = {
	custom_effect_tooltip = invite_to_northern_union_tt
	hidden_effect = {
		country_event = {
			id = northern_union_faction_events.5
		}
	}
}

join_northern_union = {
	custom_effect_tooltip = join_northern_union_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_union (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_union_member = no }
			leave_current_faction = yes
			var:GLOBAL.northern_union_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_union - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_union - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_northern_union_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_union (scripted_effect) exited"
		}
	}
}

leave_northern_union = {
	custom_effect_tooltip = leave_northern_union_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_union (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_union_member = yes }
			unmark_as_northern_union_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_union (scripted_effect) exited"
		}
	}
}

mark_as_northern_union_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_union_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_union_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TOC }
		add_to_array = { GLOBAL.northern_union_members = THIS }
		add_northern_union_ally_strategies = yes
		#add_northern_union_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_union_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_union_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_northern_union_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_union_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_union_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_northern_union_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_union_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_union_member = yes }
		remove_northern_union_ally_strategies = yes
		#remove_northern_union_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.northern_union_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_union_member = yes
			}
			unmark_as_northern_union_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_union_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_northern_union_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_union_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_northern_union_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_northern_union_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_northern_union_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_union_ally_strategies (scripted_effect) exited"
	}
}

remove_northern_union_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_union_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_northern_union_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_union_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_bloody_electorals = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_bloody_electorals (scripted_effect) entered"
	}
	if = {
		limit = {
			bloody_electorals_exists = no
		}
		leave_current_faction = yes
		create_faction = bloody_electorals
		mark_as_bloody_electorals_member = yes
		set_variable = { GLOBAL.bloody_electorals_leader = THIS }
	}
	else = {
		join_bloody_electorals = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_bloody_electorals (scripted_effect) exited"
	}
}

d_join_bloody_electorals = {
	log = "[GetDateText]: Adding [This.GetNameDef] to bloody_electorals..."
	create_or_join_bloody_electorals = yes
}

ask_to_join_bloody_electorals = {
	custom_effect_tooltip = ask_to_join_bloody_electorals_tt
	hidden_effect = {
		var:GLOBAL.bloody_electorals_leader = {
			country_event = {
				id = bloody_electorals_faction_events.1
			}
		}
	}
}

invite_to_bloody_electorals = {
	custom_effect_tooltip = invite_to_bloody_electorals_tt
	hidden_effect = {
		country_event = {
			id = bloody_electorals_faction_events.5
		}
	}
}

join_bloody_electorals = {
	custom_effect_tooltip = join_bloody_electorals_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_bloody_electorals (scripted_effect) entered"
		}
		if = {
			limit = { is_bloody_electorals_member = no }
			leave_current_faction = yes
			var:GLOBAL.bloody_electorals_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_bloody_electorals - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_bloody_electorals - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_bloody_electorals_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_bloody_electorals (scripted_effect) exited"
		}
	}
}

leave_bloody_electorals = {
	custom_effect_tooltip = leave_bloody_electorals_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_bloody_electorals (scripted_effect) entered"
		}
		if = {
			limit = { is_bloody_electorals_member = yes }
			unmark_as_bloody_electorals_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_bloody_electorals (scripted_effect) exited"
		}
	}
}

mark_as_bloody_electorals_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_bloody_electorals_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_bloody_electorals_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = STN }
		add_to_array = { GLOBAL.bloody_electorals_members = THIS }
		add_bloody_electorals_ally_strategies = yes
		#add_bloody_electorals_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_bloody_electorals_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_bloody_electorals_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_bloody_electorals_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_bloody_electorals_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_bloody_electorals_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_bloody_electorals_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_bloody_electorals_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_bloody_electorals_member = yes }
		remove_bloody_electorals_ally_strategies = yes
		#remove_bloody_electorals_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.bloody_electorals_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_bloody_electorals_member = yes
			}
			unmark_as_bloody_electorals_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_bloody_electorals_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_bloody_electorals_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_bloody_electorals_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_bloody_electorals_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_bloody_electorals_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_bloody_electorals_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_bloody_electorals_ally_strategies (scripted_effect) exited"
	}
}

remove_bloody_electorals_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_bloody_electorals_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_bloody_electorals_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_bloody_electorals_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_canadian_watchdogs = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_canadian_watchdogs (scripted_effect) entered"
	}
	if = {
		limit = {
			canadian_watchdogs_exists = no
		}
		leave_current_faction = yes
		create_faction = canadian_watchdogs
		mark_as_canadian_watchdogs_member = yes
		set_variable = { GLOBAL.canadian_watchdogs_leader = THIS }
	}
	else = {
		join_canadian_watchdogs = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_canadian_watchdogs (scripted_effect) exited"
	}
}

d_join_canadian_watchdogs = {
	log = "[GetDateText]: Adding [This.GetNameDef] to canadian_watchdogs..."
	create_or_join_canadian_watchdogs = yes
}

ask_to_join_canadian_watchdogs = {
	custom_effect_tooltip = ask_to_join_canadian_watchdogs_tt
	hidden_effect = {
		var:GLOBAL.canadian_watchdogs_leader = {
			country_event = {
				id = canadian_watchdogs_faction_events.1
			}
		}
	}
}

invite_to_canadian_watchdogs = {
	custom_effect_tooltip = invite_to_canadian_watchdogs_tt
	hidden_effect = {
		country_event = {
			id = canadian_watchdogs_faction_events.5
		}
	}
}

join_canadian_watchdogs = {
	custom_effect_tooltip = join_canadian_watchdogs_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_canadian_watchdogs (scripted_effect) entered"
		}
		if = {
			limit = { is_canadian_watchdogs_member = no }
			leave_current_faction = yes
			var:GLOBAL.canadian_watchdogs_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_canadian_watchdogs - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_canadian_watchdogs - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_canadian_watchdogs_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_canadian_watchdogs (scripted_effect) exited"
		}
	}
}

leave_canadian_watchdogs = {
	custom_effect_tooltip = leave_canadian_watchdogs_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_canadian_watchdogs (scripted_effect) entered"
		}
		if = {
			limit = { is_canadian_watchdogs_member = yes }
			unmark_as_canadian_watchdogs_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_canadian_watchdogs (scripted_effect) exited"
		}
	}
}

mark_as_canadian_watchdogs_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_canadian_watchdogs_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_canadian_watchdogs_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BRA }
		add_to_array = { GLOBAL.canadian_watchdogs_members = THIS }
		add_canadian_watchdogs_ally_strategies = yes
		#add_canadian_watchdogs_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_canadian_watchdogs_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_canadian_watchdogs_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_canadian_watchdogs_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_canadian_watchdogs_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_canadian_watchdogs_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_canadian_watchdogs_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_canadian_watchdogs_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_canadian_watchdogs_member = yes }
		remove_canadian_watchdogs_ally_strategies = yes
		#remove_canadian_watchdogs_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.canadian_watchdogs_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_canadian_watchdogs_member = yes
			}
			unmark_as_canadian_watchdogs_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_canadian_watchdogs_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_canadian_watchdogs_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_canadian_watchdogs_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_canadian_watchdogs_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_canadian_watchdogs_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_canadian_watchdogs_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_canadian_watchdogs_ally_strategies (scripted_effect) exited"
	}
}

remove_canadian_watchdogs_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_canadian_watchdogs_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_canadian_watchdogs_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_canadian_watchdogs_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_kingdom_of_manitoba = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_kingdom_of_manitoba (scripted_effect) entered"
	}
	if = {
		limit = {
			kingdom_of_manitoba_exists = no
		}
		leave_current_faction = yes
		create_faction = kingdom_of_manitoba
		mark_as_kingdom_of_manitoba_member = yes
		set_variable = { GLOBAL.kingdom_of_manitoba_leader = THIS }
	}
	else = {
		join_kingdom_of_manitoba = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_kingdom_of_manitoba (scripted_effect) exited"
	}
}

d_join_kingdom_of_manitoba = {
	log = "[GetDateText]: Adding [This.GetNameDef] to kingdom_of_manitoba..."
	create_or_join_kingdom_of_manitoba = yes
}

ask_to_join_kingdom_of_manitoba = {
	custom_effect_tooltip = ask_to_join_kingdom_of_manitoba_tt
	hidden_effect = {
		var:GLOBAL.kingdom_of_manitoba_leader = {
			country_event = {
				id = kingdom_of_manitoba_faction_events.1
			}
		}
	}
}

invite_to_kingdom_of_manitoba = {
	custom_effect_tooltip = invite_to_kingdom_of_manitoba_tt
	hidden_effect = {
		country_event = {
			id = kingdom_of_manitoba_faction_events.5
		}
	}
}

join_kingdom_of_manitoba = {
	custom_effect_tooltip = join_kingdom_of_manitoba_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_kingdom_of_manitoba (scripted_effect) entered"
		}
		if = {
			limit = { is_kingdom_of_manitoba_member = no }
			leave_current_faction = yes
			var:GLOBAL.kingdom_of_manitoba_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_kingdom_of_manitoba - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_kingdom_of_manitoba - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_kingdom_of_manitoba_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_kingdom_of_manitoba (scripted_effect) exited"
		}
	}
}

leave_kingdom_of_manitoba = {
	custom_effect_tooltip = leave_kingdom_of_manitoba_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_kingdom_of_manitoba (scripted_effect) entered"
		}
		if = {
			limit = { is_kingdom_of_manitoba_member = yes }
			unmark_as_kingdom_of_manitoba_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_kingdom_of_manitoba (scripted_effect) exited"
		}
	}
}

mark_as_kingdom_of_manitoba_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_kingdom_of_manitoba_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_kingdom_of_manitoba_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = BRA }
		add_to_array = { GLOBAL.kingdom_of_manitoba_members = THIS }
		add_kingdom_of_manitoba_ally_strategies = yes
		#add_kingdom_of_manitoba_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_kingdom_of_manitoba_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_kingdom_of_manitoba_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_kingdom_of_manitoba_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_kingdom_of_manitoba_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_kingdom_of_manitoba_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_kingdom_of_manitoba_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_kingdom_of_manitoba_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_kingdom_of_manitoba_member = yes }
		remove_kingdom_of_manitoba_ally_strategies = yes
		#remove_kingdom_of_manitoba_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.kingdom_of_manitoba_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_kingdom_of_manitoba_member = yes
			}
			unmark_as_kingdom_of_manitoba_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_kingdom_of_manitoba_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_kingdom_of_manitoba_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_kingdom_of_manitoba_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_kingdom_of_manitoba_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_kingdom_of_manitoba_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_kingdom_of_manitoba_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_kingdom_of_manitoba_ally_strategies (scripted_effect) exited"
	}
}

remove_kingdom_of_manitoba_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_kingdom_of_manitoba_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_kingdom_of_manitoba_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_kingdom_of_manitoba_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_united_wallers = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_united_wallers (scripted_effect) entered"
	}
	if = {
		limit = {
			united_wallers_exists = no
		}
		leave_current_faction = yes
		create_faction = united_wallers
		mark_as_united_wallers_member = yes
		set_variable = { GLOBAL.united_wallers_leader = THIS }
	}
	else = {
		join_united_wallers = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_united_wallers (scripted_effect) exited"
	}
}

d_join_united_wallers = {
	log = "[GetDateText]: Adding [This.GetNameDef] to united_wallers..."
	create_or_join_united_wallers = yes
}

ask_to_join_united_wallers = {
	custom_effect_tooltip = ask_to_join_united_wallers_tt
	hidden_effect = {
		var:GLOBAL.united_wallers_leader = {
			country_event = {
				id = united_wallers_faction_events.1
			}
		}
	}
}

invite_to_united_wallers = {
	custom_effect_tooltip = invite_to_united_wallers_tt
	hidden_effect = {
		country_event = {
			id = united_wallers_faction_events.5
		}
	}
}

join_united_wallers = {
	custom_effect_tooltip = join_united_wallers_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_united_wallers (scripted_effect) entered"
		}
		if = {
			limit = { is_united_wallers_member = no }
			leave_current_faction = yes
			var:GLOBAL.united_wallers_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_united_wallers - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_united_wallers - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_united_wallers_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_united_wallers (scripted_effect) exited"
		}
	}
}

leave_united_wallers = {
	custom_effect_tooltip = leave_united_wallers_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_united_wallers (scripted_effect) entered"
		}
		if = {
			limit = { is_united_wallers_member = yes }
			unmark_as_united_wallers_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_united_wallers (scripted_effect) exited"
		}
	}
}

mark_as_united_wallers_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_united_wallers_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_united_wallers_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TLR }
		add_to_array = { GLOBAL.united_wallers_members = THIS }
		add_united_wallers_ally_strategies = yes
		#add_united_wallers_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_united_wallers_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_united_wallers_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_united_wallers_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_united_wallers_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_united_wallers_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_united_wallers_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_united_wallers_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_united_wallers_member = yes }
		remove_united_wallers_ally_strategies = yes
		#remove_united_wallers_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.united_wallers_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_united_wallers_member = yes
			}
			unmark_as_united_wallers_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_united_wallers_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_united_wallers_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_united_wallers_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_united_wallers_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_united_wallers_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_united_wallers_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_united_wallers_ally_strategies (scripted_effect) exited"
	}
}

remove_united_wallers_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_united_wallers_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_united_wallers_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_united_wallers_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_montana_enclave = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_montana_enclave (scripted_effect) entered"
	}
	if = {
		limit = {
			montana_enclave_exists = no
		}
		leave_current_faction = yes
		create_faction = montana_enclave
		mark_as_montana_enclave_member = yes
		set_variable = { GLOBAL.montana_enclave_leader = THIS }
	}
	else = {
		join_montana_enclave = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_montana_enclave (scripted_effect) exited"
	}
}

d_join_montana_enclave = {
	log = "[GetDateText]: Adding [This.GetNameDef] to montana_enclave..."
	create_or_join_montana_enclave = yes
}

ask_to_join_montana_enclave = {
	custom_effect_tooltip = ask_to_join_montana_enclave_tt
	hidden_effect = {
		var:GLOBAL.montana_enclave_leader = {
			country_event = {
				id = montana_enclave_faction_events.1
			}
		}
	}
}

invite_to_montana_enclave = {
	custom_effect_tooltip = invite_to_montana_enclave_tt
	hidden_effect = {
		country_event = {
			id = montana_enclave_faction_events.5
		}
	}
}

join_montana_enclave = {
	custom_effect_tooltip = join_montana_enclave_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_montana_enclave (scripted_effect) entered"
		}
		if = {
			limit = { is_montana_enclave_member = no }
			leave_current_faction = yes
			var:GLOBAL.montana_enclave_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_montana_enclave - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_montana_enclave - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_montana_enclave_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_montana_enclave (scripted_effect) exited"
		}
	}
}

leave_montana_enclave = {
	custom_effect_tooltip = leave_montana_enclave_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_montana_enclave (scripted_effect) entered"
		}
		if = {
			limit = { is_montana_enclave_member = yes }
			unmark_as_montana_enclave_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_montana_enclave (scripted_effect) exited"
		}
	}
}

mark_as_montana_enclave_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_montana_enclave_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_montana_enclave_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = MCA }
		add_to_array = { GLOBAL.montana_enclave_members = THIS }
		add_montana_enclave_ally_strategies = yes
		#add_montana_enclave_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_montana_enclave_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_montana_enclave_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_montana_enclave_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_montana_enclave_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_montana_enclave_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_montana_enclave_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_montana_enclave_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_montana_enclave_member = yes }
		remove_montana_enclave_ally_strategies = yes
		#remove_montana_enclave_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.montana_enclave_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_montana_enclave_member = yes
			}
			unmark_as_montana_enclave_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_montana_enclave_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_montana_enclave_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_montana_enclave_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_montana_enclave_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_montana_enclave_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_montana_enclave_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_montana_enclave_ally_strategies (scripted_effect) exited"
	}
}

remove_montana_enclave_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_montana_enclave_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_montana_enclave_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_montana_enclave_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_northern_winds = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_winds (scripted_effect) entered"
	}
	if = {
		limit = {
			northern_winds_exists = no
		}
		leave_current_faction = yes
		create_faction = northern_winds
		mark_as_northern_winds_member = yes
		set_variable = { GLOBAL.northern_winds_leader = THIS }
	}
	else = {
		join_northern_winds = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_northern_winds (scripted_effect) exited"
	}
}

d_join_northern_winds = {
	log = "[GetDateText]: Adding [This.GetNameDef] to northern_winds..."
	create_or_join_northern_winds = yes
}

ask_to_join_northern_winds = {
	custom_effect_tooltip = ask_to_join_northern_winds_tt
	hidden_effect = {
		var:GLOBAL.northern_winds_leader = {
			country_event = {
				id = northern_winds_faction_events.1
			}
		}
	}
}

invite_to_northern_winds = {
	custom_effect_tooltip = invite_to_northern_winds_tt
	hidden_effect = {
		country_event = {
			id = northern_winds_faction_events.5
		}
	}
}

join_northern_winds = {
	custom_effect_tooltip = join_northern_winds_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_winds (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_winds_member = no }
			leave_current_faction = yes
			var:GLOBAL.northern_winds_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_winds - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_northern_winds - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_northern_winds_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_northern_winds (scripted_effect) exited"
		}
	}
}

leave_northern_winds = {
	custom_effect_tooltip = leave_northern_winds_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_winds (scripted_effect) entered"
		}
		if = {
			limit = { is_northern_winds_member = yes }
			unmark_as_northern_winds_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_northern_winds (scripted_effect) exited"
		}
	}
}

mark_as_northern_winds_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_winds_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_winds_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = STM }
		add_to_array = { GLOBAL.northern_winds_members = THIS }
		add_northern_winds_ally_strategies = yes
		#add_northern_winds_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_winds_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_winds_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_northern_winds_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_northern_winds_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_northern_winds_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_northern_winds_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_winds_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_northern_winds_member = yes }
		remove_northern_winds_ally_strategies = yes
		#remove_northern_winds_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.northern_winds_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_northern_winds_member = yes
			}
			unmark_as_northern_winds_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_northern_winds_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_northern_winds_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_winds_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_northern_winds_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_northern_winds_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_northern_winds_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_northern_winds_ally_strategies (scripted_effect) exited"
	}
}

remove_northern_winds_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_winds_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_northern_winds_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_northern_winds_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_allied_states = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_allied_states (scripted_effect) entered"
	}
	if = {
		limit = {
			allied_states_exists = no
		}
		leave_current_faction = yes
		create_faction = allied_states
		mark_as_allied_states_member = yes
		set_variable = { GLOBAL.allied_states_leader = THIS }
	}
	else = {
		join_allied_states = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_allied_states (scripted_effect) exited"
	}
}

d_join_allied_states = {
	log = "[GetDateText]: Adding [This.GetNameDef] to allied_states..."
	create_or_join_allied_states = yes
}

ask_to_join_allied_states = {
	custom_effect_tooltip = ask_to_join_allied_states_tt
	hidden_effect = {
		var:GLOBAL.allied_states_leader = {
			country_event = {
				id = allied_states_faction_events.1
			}
		}
	}
}

invite_to_allied_states = {
	custom_effect_tooltip = invite_to_allied_states_tt
	hidden_effect = {
		country_event = {
			id = allied_states_faction_events.5
		}
	}
}

join_allied_states = {
	custom_effect_tooltip = join_allied_states_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_allied_states (scripted_effect) entered"
		}
		if = {
			limit = { is_allied_states_member = no }
			leave_current_faction = yes
			var:GLOBAL.allied_states_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_allied_states - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_allied_states - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_allied_states_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_allied_states (scripted_effect) exited"
		}
	}
}

leave_allied_states = {
	custom_effect_tooltip = leave_allied_states_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_allied_states (scripted_effect) entered"
		}
		if = {
			limit = { is_allied_states_member = yes }
			unmark_as_allied_states_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_allied_states (scripted_effect) exited"
		}
	}
}

mark_as_allied_states_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_allied_states_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_allied_states_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = MCA }
		add_to_array = { GLOBAL.allied_states_members = THIS }
		add_allied_states_ally_strategies = yes
		#add_allied_states_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_allied_states_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_allied_states_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_allied_states_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_allied_states_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_allied_states_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_allied_states_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_allied_states_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_allied_states_member = yes }
		remove_allied_states_ally_strategies = yes
		#remove_allied_states_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.allied_states_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_allied_states_member = yes
			}
			unmark_as_allied_states_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_allied_states_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_allied_states_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_allied_states_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_allied_states_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_allied_states_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_allied_states_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_allied_states_ally_strategies (scripted_effect) exited"
	}
}

remove_allied_states_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_allied_states_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_allied_states_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_allied_states_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_fifth_world = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_fifth_world (scripted_effect) entered"
	}
	if = {
		limit = {
			fifth_world_exists = no
		}
		leave_current_faction = yes
		create_faction = fifth_world
		mark_as_fifth_world_member = yes
		set_variable = { GLOBAL.fifth_world_leader = THIS }
	}
	else = {
		join_fifth_world = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_fifth_world (scripted_effect) exited"
	}
}

d_join_fifth_world = {
	log = "[GetDateText]: Adding [This.GetNameDef] to fifth_world..."
	create_or_join_fifth_world = yes
}

ask_to_join_fifth_world = {
	custom_effect_tooltip = ask_to_join_fifth_world_tt
	hidden_effect = {
		var:GLOBAL.fifth_world_leader = {
			country_event = {
				id = fifth_world_faction_events.1
			}
		}
	}
}

invite_to_fifth_world = {
	custom_effect_tooltip = invite_to_fifth_world_tt
	hidden_effect = {
		country_event = {
			id = fifth_world_faction_events.5
		}
	}
}

join_fifth_world = {
	custom_effect_tooltip = join_fifth_world_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_fifth_world (scripted_effect) entered"
		}
		if = {
			limit = { is_fifth_world_member = no }
			leave_current_faction = yes
			var:GLOBAL.fifth_world_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_fifth_world - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_fifth_world - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_fifth_world_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_fifth_world (scripted_effect) exited"
		}
	}
}

leave_fifth_world = {
	custom_effect_tooltip = leave_fifth_world_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_fifth_world (scripted_effect) entered"
		}
		if = {
			limit = { is_fifth_world_member = yes }
			unmark_as_fifth_world_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_fifth_world (scripted_effect) exited"
		}
	}
}

mark_as_fifth_world_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_fifth_world_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_fifth_world_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NAV }
		add_to_array = { GLOBAL.fifth_world_members = THIS }
		add_fifth_world_ally_strategies = yes
		#add_fifth_world_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_fifth_world_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_fifth_world_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_fifth_world_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_fifth_world_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_fifth_world_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_fifth_world_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_fifth_world_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_fifth_world_member = yes }
		remove_fifth_world_ally_strategies = yes
		#remove_fifth_world_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.fifth_world_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_fifth_world_member = yes
			}
			unmark_as_fifth_world_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_fifth_world_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_fifth_world_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_fifth_world_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_fifth_world_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_fifth_world_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_fifth_world_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_fifth_world_ally_strategies (scripted_effect) exited"
	}
}

remove_fifth_world_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_fifth_world_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_fifth_world_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_fifth_world_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_red_shield = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_red_shield (scripted_effect) entered"
	}
	if = {
		limit = {
			red_shield_exists = no
		}
		leave_current_faction = yes
		create_faction = red_shield
		mark_as_red_shield_member = yes
		set_variable = { GLOBAL.red_shield_leader = THIS }
	}
	else = {
		join_red_shield = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_red_shield (scripted_effect) exited"
	}
}

d_join_red_shield = {
	log = "[GetDateText]: Adding [This.GetNameDef] to red_shield..."
	create_or_join_red_shield = yes
}

ask_to_join_red_shield = {
	custom_effect_tooltip = ask_to_join_red_shield_tt
	hidden_effect = {
		var:GLOBAL.red_shield_leader = {
			country_event = {
				id = red_shield_faction_events.1
			}
		}
	}
}

invite_to_red_shield = {
	custom_effect_tooltip = invite_to_red_shield_tt
	hidden_effect = {
		country_event = {
			id = red_shield_faction_events.5
		}
	}
}

join_red_shield = {
	custom_effect_tooltip = join_red_shield_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_red_shield (scripted_effect) entered"
		}
		if = {
			limit = { is_red_shield_member = no }
			leave_current_faction = yes
			var:GLOBAL.red_shield_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_red_shield - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_red_shield - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_red_shield_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_red_shield (scripted_effect) exited"
		}
	}
}

leave_red_shield = {
	custom_effect_tooltip = leave_red_shield_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_red_shield (scripted_effect) entered"
		}
		if = {
			limit = { is_red_shield_member = yes }
			unmark_as_red_shield_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_red_shield (scripted_effect) exited"
		}
	}
}

mark_as_red_shield_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_red_shield_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_red_shield_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = WHC }
		add_to_array = { GLOBAL.red_shield_members = THIS }
		add_red_shield_ally_strategies = yes
		#add_red_shield_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_red_shield_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_red_shield_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_red_shield_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_red_shield_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_red_shield_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_red_shield_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_red_shield_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_red_shield_member = yes }
		remove_red_shield_ally_strategies = yes
		#remove_red_shield_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.red_shield_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_red_shield_member = yes
			}
			unmark_as_red_shield_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_red_shield_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_red_shield_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_red_shield_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_red_shield_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_red_shield_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_red_shield_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_red_shield_ally_strategies (scripted_effect) exited"
	}
}

remove_red_shield_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_red_shield_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_red_shield_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_red_shield_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_wardens_of_white = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_wardens_of_white (scripted_effect) entered"
	}
	if = {
		limit = {
			wardens_of_white_exists = no
		}
		leave_current_faction = yes
		create_faction = wardens_of_white
		mark_as_wardens_of_white_member = yes
		set_variable = { GLOBAL.wardens_of_white_leader = THIS }
	}
	else = {
		join_wardens_of_white = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_wardens_of_white (scripted_effect) exited"
	}
}

d_join_wardens_of_white = {
	log = "[GetDateText]: Adding [This.GetNameDef] to wardens_of_white..."
	create_or_join_wardens_of_white = yes
}

ask_to_join_wardens_of_white = {
	custom_effect_tooltip = ask_to_join_wardens_of_white_tt
	hidden_effect = {
		var:GLOBAL.wardens_of_white_leader = {
			country_event = {
				id = wardens_of_white_faction_events.1
			}
		}
	}
}

invite_to_wardens_of_white = {
	custom_effect_tooltip = invite_to_wardens_of_white_tt
	hidden_effect = {
		country_event = {
			id = wardens_of_white_faction_events.5
		}
	}
}

join_wardens_of_white = {
	custom_effect_tooltip = join_wardens_of_white_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_wardens_of_white (scripted_effect) entered"
		}
		if = {
			limit = { is_wardens_of_white_member = no }
			leave_current_faction = yes
			var:GLOBAL.wardens_of_white_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_wardens_of_white - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_wardens_of_white - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_wardens_of_white_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_wardens_of_white (scripted_effect) exited"
		}
	}
}

leave_wardens_of_white = {
	custom_effect_tooltip = leave_wardens_of_white_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_wardens_of_white (scripted_effect) entered"
		}
		if = {
			limit = { is_wardens_of_white_member = yes }
			unmark_as_wardens_of_white_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_wardens_of_white (scripted_effect) exited"
		}
	}
}

mark_as_wardens_of_white_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_wardens_of_white_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_wardens_of_white_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = TOC }
		add_to_array = { GLOBAL.wardens_of_white_members = THIS }
		add_wardens_of_white_ally_strategies = yes
		#add_wardens_of_white_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_wardens_of_white_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_wardens_of_white_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_wardens_of_white_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_wardens_of_white_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_wardens_of_white_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_wardens_of_white_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_wardens_of_white_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_wardens_of_white_member = yes }
		remove_wardens_of_white_ally_strategies = yes
		#remove_wardens_of_white_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.wardens_of_white_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_wardens_of_white_member = yes
			}
			unmark_as_wardens_of_white_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_wardens_of_white_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_wardens_of_white_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_wardens_of_white_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_wardens_of_white_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_wardens_of_white_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_wardens_of_white_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_wardens_of_white_ally_strategies (scripted_effect) exited"
	}
}

remove_wardens_of_white_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_wardens_of_white_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_wardens_of_white_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_wardens_of_white_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_miscounts = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_miscounts (scripted_effect) entered"
	}
	if = {
		limit = {
			miscounts_exists = no
		}
		leave_current_faction = yes
		create_faction = miscounts
		mark_as_miscounts_member = yes
		set_variable = { GLOBAL.miscounts_leader = THIS }
	}
	else = {
		join_miscounts = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_miscounts (scripted_effect) exited"
	}
}

d_join_miscounts = {
	log = "[GetDateText]: Adding [This.GetNameDef] to miscounts..."
	create_or_join_miscounts = yes
}

ask_to_join_miscounts = {
	custom_effect_tooltip = ask_to_join_miscounts_tt
	hidden_effect = {
		var:GLOBAL.miscounts_leader = {
			country_event = {
				id = miscounts_faction_events.1
			}
		}
	}
}

invite_to_miscounts = {
	custom_effect_tooltip = invite_to_miscounts_tt
	hidden_effect = {
		country_event = {
			id = miscounts_faction_events.5
		}
	}
}

join_miscounts = {
	custom_effect_tooltip = join_miscounts_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_miscounts (scripted_effect) entered"
		}
		if = {
			limit = { is_miscounts_member = no }
			leave_current_faction = yes
			var:GLOBAL.miscounts_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_miscounts - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_miscounts - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_miscounts_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_miscounts (scripted_effect) exited"
		}
	}
}

leave_miscounts = {
	custom_effect_tooltip = leave_miscounts_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_miscounts (scripted_effect) entered"
		}
		if = {
			limit = { is_miscounts_member = yes }
			unmark_as_miscounts_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_miscounts (scripted_effect) exited"
		}
	}
}

mark_as_miscounts_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_miscounts_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_miscounts_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = NOR }
		add_to_array = { GLOBAL.miscounts_members = THIS }
		add_miscounts_ally_strategies = yes
		#add_miscounts_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_miscounts_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_miscounts_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_miscounts_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_miscounts_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_miscounts_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_miscounts_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_miscounts_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_miscounts_member = yes }
		remove_miscounts_ally_strategies = yes
		#remove_miscounts_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.miscounts_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_miscounts_member = yes
			}
			unmark_as_miscounts_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_miscounts_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_miscounts_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_miscounts_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_miscounts_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_miscounts_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_miscounts_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_miscounts_ally_strategies (scripted_effect) exited"
	}
}

remove_miscounts_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_miscounts_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_miscounts_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_miscounts_ally_strategies (scripted_effect) exited"
	}
}

create_or_join_royal_accord = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_royal_accord (scripted_effect) entered"
	}
	if = {
		limit = {
			royal_accord_exists = no
		}
		leave_current_faction = yes
		create_faction = royal_accord
		mark_as_royal_accord_member = yes
		set_variable = { GLOBAL.royal_accord_leader = THIS }
	}
	else = {
		join_royal_accord = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] create_or_join_royal_accord (scripted_effect) exited"
	}
}

d_join_royal_accord = {
	log = "[GetDateText]: Adding [This.GetNameDef] to royal_accord..."
	create_or_join_royal_accord = yes
}

ask_to_join_royal_accord = {
	custom_effect_tooltip = ask_to_join_royal_accord_tt
	hidden_effect = {
		var:GLOBAL.royal_accord_leader = {
			country_event = {
				id = royal_accord_faction_events.1
			}
		}
	}
}

invite_to_royal_accord = {
	custom_effect_tooltip = invite_to_royal_accord_tt
	hidden_effect = {
		country_event = {
			id = royal_accord_faction_events.5
		}
	}
}

join_royal_accord = {
	custom_effect_tooltip = join_royal_accord_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_royal_accord (scripted_effect) entered"
		}
		if = {
			limit = { is_royal_accord_member = no }
			leave_current_faction = yes
			var:GLOBAL.royal_accord_leader = {
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_royal_accord - adding to faction via [This.GetName]... (scripted_effect)"
				}
				add_to_faction = PREV
				if = {
					limit = { has_global_flag = debug_logs }
					log = "[GetDateText]: [Prev.GetName] join_royal_accord - added to faction via [This.GetName]... (scripted_effect)"
				}
			}
			mark_as_royal_accord_member = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] join_royal_accord (scripted_effect) exited"
		}
	}
}

leave_royal_accord = {
	custom_effect_tooltip = leave_royal_accord_tt
	hidden_effect = {
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_royal_accord (scripted_effect) entered"
		}
		if = {
			limit = { is_royal_accord_member = yes }
			unmark_as_royal_accord_member = yes
			leave_faction = yes
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: [This.GetName] leave_royal_accord (scripted_effect) exited"
		}
	}
}

mark_as_royal_accord_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_royal_accord_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_royal_accord_member = no }
		unmark_from_current_faction = yes
		set_variable = { current_faction = DLN }
		add_to_array = { GLOBAL.royal_accord_members = THIS }
		add_royal_accord_ally_strategies = yes
		#add_royal_accord_faction_effects = yes

		every_country = {
			limit = {
				is_subject_of = PREV
				is_royal_accord_member = no
			}
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_royal_accord_member - also marking [This.GetName]... (scripted_effect)"
			}
			leave_current_faction = yes
			mark_as_royal_accord_member = yes
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: [Prev.GetName] mark_as_royal_accord_member - done also marking [This.GetName]. (scripted_effect)"
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] mark_as_royal_accord_member because of [From.GetName] (scripted_effect) exited"
	}
}

unmark_as_royal_accord_member = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_royal_accord_member because of [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { is_royal_accord_member = yes }
		remove_royal_accord_ally_strategies = yes
		#remove_royal_accord_faction_effects = yes
		clear_variable = current_faction
		remove_from_array = { GLOBAL.royal_accord_members = THIS }

		every_country = {
			limit = {
				is_subject_of = PREV
				is_royal_accord_member = yes
			}
			unmark_as_royal_accord_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_as_royal_accord_member because of [From.GetName] (scripted_effect) exited"
	}
}

add_royal_accord_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_royal_accord_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = {
			is_royal_accord_member = yes
			NOT = { tag = PREV }
		}
		if = {
			limit = { has_global_flag = debug_logs }
			log = "[GetDateText]: add_royal_accord_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
		}
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = 200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = -200
		}
		PREV = {
			if = {
				limit = { has_global_flag = debug_logs }
				log = "[GetDateText]: add_royal_accord_ally_strategies - adding ai strategy for [This.GetName] -> [Prev.GetName] (scripted_effect) entered"
			}
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = 200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = -200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] add_royal_accord_ally_strategies (scripted_effect) exited"
	}
}

remove_royal_accord_ally_strategies = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_royal_accord_ally_strategies (scripted_effect) entered"
	}
	every_country = {
		limit = { is_royal_accord_member = yes }
		add_ai_strategy = {
			type = alliance
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = befriend
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = PREV
			value = -200
		}
		add_ai_strategy = {
			type = ignore
			id = PREV
			value = 200
		}
		PREV = {
			add_ai_strategy = {
				type = alliance
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = befriend
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = PREV
				value = -200
			}
			add_ai_strategy = {
				type = ignore
				id = PREV
				value = 200
			}
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] remove_royal_accord_ally_strategies (scripted_effect) exited"
	}
}



join_from_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] join_from_faction [From.GetName] (scripted_effect) entered"
	}
	leave_current_faction = yes
	if = {
		limit = { FROM = { is_nova_legion_member = yes } }
		join_nova_legion = yes
	}
	else_if = {
		limit = { FROM = { is_chosen_ones_member = yes } }
		join_chosen_ones = yes
	}
	else_if = {
		limit = { FROM = { is_lanius_horde_member = yes } }
		join_lanius_horde = yes
	}
	else_if = {
		limit = { FROM = { is_big_mt_member = yes } }
		join_big_mt = yes
	}
	else_if = {
		limit = { FROM = { is_boneyard_brotherhood_member = yes } }
		join_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { FROM = { is_united_front_member = yes } }
		join_united_front = yes
	}
	else_if = {
		limit = { FROM = { is_western_brotherhood_of_steel_member = yes } }
		join_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { FROM = { is_caesars_legion_member = yes } }
		join_caesars_legion = yes
	}
	else_if = {
		limit = { FROM = { is_children_of_mexico_member = yes } }
		join_children_of_mexico = yes
	}
	else_if = {
		limit = { FROM = { is_children_of_the_gate_member = yes } }
		join_children_of_the_gate = yes
	}
	else_if = {
		limit = { FROM = { is_daikatana_member = yes } }
		join_daikatana = yes
	}
	else_if = {
		limit = { FROM = { is_daughters_of_hecate_member = yes } }
		join_daughters_of_hecate = yes
	}
	else_if = {
		limit = { FROM = { is_denver_defense_network_member = yes } }
		join_denver_defense_network = yes
	}
	else_if = {
		limit = { FROM = { is_earth_and_sky_member = yes } }
		join_earth_and_sky = yes
	}
	else_if = {
		limit = { FROM = { is_empire_of_salt_member = yes } }
		join_empire_of_salt = yes
	}
	else_if = {
		limit = { FROM = { is_equestria_member = yes } }
		join_equestria = yes
	}
	else_if = {
		limit = { FROM = { is_faithful_member = yes } }
		join_faithful = yes
	}
	else_if = {
		limit = { FROM = { is_fantasma_cartel_member = yes } }
		join_fantasma_cartel = yes
	}
	else_if = {
		limit = { FROM = { is_glass_league_member = yes } }
		join_glass_league = yes
	}
	else_if = {
		limit = { FROM = { is_great_federation_member = yes } }
		join_great_federation = yes
	}
	else_if = {
		limit = { FROM = { is_great_plains_federation_member = yes } }
		join_great_plains_federation = yes
	}
	else_if = {
		limit = { FROM = { is_jungle_pact_member = yes } }
		join_jungle_pact = yes
	}
	else_if = {
		limit = { FROM = { is_kaisers_legion_member = yes } }
		join_kaisers_legion = yes
	}
	else_if = {
		limit = { FROM = { is_masters_new_army_member = yes } }
		join_masters_new_army = yes
	}
	else_if = {
		limit = { FROM = { is_mesoamerican_alliance_member = yes } }
		join_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_the_fire_council_member = yes } }
		join_the_fire_council = yes
	}
	else_if = {
		limit = { FROM = { is_mojave_alliance_member = yes } }
		join_mojave_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_mormon_alliance_member = yes } }
		join_mormon_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_nevada_enclave_member = yes } }
		join_nevada_enclave = yes
	}
	else_if = {
		limit = { FROM = { is_nevada_pact_member = yes } }
		join_nevada_pact = yes
	}
	else_if = {
		limit = { FROM = { is_northern_league_member = yes } }
		join_northern_league = yes
	}
	else_if = {
		limit = { FROM = { is_northern_mojave_pact_member = yes } }
		join_northern_mojave_pact = yes
	}
	else_if = {
		limit = { FROM = { is_phoenix_federation_member = yes } }
		join_phoenix_federation = yes
	}
	else_if = {
		limit = { FROM = { is_rio_pact_member = yes } }
		join_rio_pact = yes
	}
	else_if = {
		limit = { FROM = { is_senators_little_helpers_member = yes } }
		join_senators_little_helpers = yes
	}
	else_if = {
		limit = { FROM = { is_great_confederation_member = yes } }
		join_great_confederation = yes
	}
	else_if = {
		limit = { FROM = { is_texan_economic_union_member = yes } }
		join_texan_economic_union = yes
	}
	else_if = {
		limit = { FROM = { is_unbroken_coast_member = yes } }
		join_unbroken_coast = yes
	}
	else_if = {
		limit = { FROM = { is_western_enclave_member = yes } }
		join_western_enclave = yes
	}
	else_if = {
		limit = { FROM = { is_order_of_st_joseph_member = yes } }
		join_order_of_st_joseph = yes
	}
	else_if = {
		limit = { FROM = { is_breach_ferals_member = yes } }
		join_breach_ferals = yes
	}
	else_if = {
		limit = { FROM = { is_white_sands_compact_member = yes } }
		join_white_sands_compact = yes
	}
	else_if = {
		limit = { FROM = { is_cartel_faction_member = yes } }
		join_cartel_faction = yes
	}
	else_if = {
		limit = { FROM = { is_cascadia_pirates_member = yes } }
		join_cascadia_pirates = yes
	}
	else_if = {
		limit = { FROM = { is_transcascadia_republic_member = yes } }
		join_transcascadia_republic = yes
	}
	else_if = {
		limit = { FROM = { is_new_california_member = yes } }
		join_new_california = yes
	}
	else_if = {
		limit = { FROM = { is_the_second_coalition_member = yes } }
		join_the_second_coalition = yes
	}
	else_if = {
		limit = { FROM = { is_imperium_mexicanum_member = yes } }
		join_imperium_mexicanum = yes
	}
	else_if = {
		limit = { FROM = { is_mexican_league_member = yes } }
		join_mexican_league = yes
	}
	else_if = {
		limit = { FROM = { is_midnight_union_member = yes } }
		join_midnight_union = yes
	}
	else_if = {
		limit = { FROM = { is_big_circle_member = yes } }
		join_big_circle = yes
	}
	else_if = {
		limit = { FROM = { is_dharma_way_member = yes } }
		join_dharma_way = yes
	}
	else_if = {
		limit = { FROM = { is_californian_hegemony_member = yes } }
		join_californian_hegemony = yes
	}
	else_if = {
		limit = { FROM = { is_northern_congress_member = yes } }
		join_northern_congress = yes
	}
	else_if = {
		limit = { FROM = { is_road_warriors_member = yes } }
		join_road_warriors = yes
	}
	else_if = {
		limit = { FROM = { is_synergy_alliance_member = yes } }
		join_synergy_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_vulpes_legion_member = yes } }
		join_vulpes_legion = yes
	}
	else_if = {
		limit = { FROM = { is_aurelius_legion_member = yes } }
		join_aurelius_legion = yes
	}
	else_if = {
		limit = { FROM = { is_lanius_legion_member = yes } }
		join_lanius_legion = yes
	}
	else_if = {
		limit = { FROM = { is_hades_legion_member = yes } }
		join_hades_legion = yes
	}
	else_if = {
		limit = { FROM = { is_lucius_legion_member = yes } }
		join_lucius_legion = yes
	}
	else_if = {
		limit = { FROM = { is_malpais_legion_member = yes } }
		join_malpais_legion = yes
	}
	else_if = {
		limit = { FROM = { is_northern_union_member = yes } }
		join_northern_union = yes
	}
	else_if = {
		limit = { FROM = { is_bloody_electorals_member = yes } }
		join_bloody_electorals = yes
	}
	else_if = {
		limit = { FROM = { is_canadian_watchdogs_member = yes } }
		join_canadian_watchdogs = yes
	}
	else_if = {
		limit = { FROM = { is_kingdom_of_manitoba_member = yes } }
		join_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { FROM = { is_united_wallers_member = yes } }
		join_united_wallers = yes
	}
	else_if = {
		limit = { FROM = { is_montana_enclave_member = yes } }
		join_montana_enclave = yes
	}
	else_if = {
		limit = { FROM = { is_northern_winds_member = yes } }
		join_northern_winds = yes
	}
	else_if = {
		limit = { FROM = { is_allied_states_member = yes } }
		join_allied_states = yes
	}
	else_if = {
		limit = { FROM = { is_fifth_world_member = yes } }
		join_fifth_world = yes
	}
	else_if = {
		limit = { FROM = { is_red_shield_member = yes } }
		join_red_shield = yes
	}
	else_if = {
		limit = { FROM = { is_wardens_of_white_member = yes } }
		join_wardens_of_white = yes
	}
	else_if = {
		limit = { FROM = { is_miscounts_member = yes } }
		join_miscounts = yes
	}
	else_if = {
		limit = { FROM = { is_royal_accord_member = yes } }
		join_royal_accord = yes
	}
	else = {
		custom_effect_tooltip = join_from_faction_tt
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] join_from_faction [From.GetName] (scripted_effect) exited"
	}
}

invite_to_from_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] invite_to_from_faction [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { FROM = { is_nova_legion_member = yes } }
		invite_to_nova_legion = yes
	}
	else_if = {
		limit = { FROM = { is_chosen_ones_member = yes } }
		invite_to_chosen_ones = yes
	}
	else_if = {
		limit = { FROM = { is_lanius_horde_member = yes } }
		invite_to_lanius_horde = yes
	}
	else_if = {
		limit = { FROM = { is_big_mt_member = yes } }
		invite_to_big_mt = yes
	}
	else_if = {
		limit = { FROM = { is_boneyard_brotherhood_member = yes } }
		invite_to_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { FROM = { is_united_front_member = yes } }
		invite_to_united_front = yes
	}
	else_if = {
		limit = { FROM = { is_western_brotherhood_of_steel_member = yes } }
		invite_to_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { FROM = { is_caesars_legion_member = yes } }
		invite_to_caesars_legion = yes
	}
	else_if = {
		limit = { FROM = { is_children_of_mexico_member = yes } }
		invite_to_children_of_mexico = yes
	}
	else_if = {
		limit = { FROM = { is_children_of_the_gate_member = yes } }
		invite_to_children_of_the_gate = yes
	}
	else_if = {
		limit = { FROM = { is_daikatana_member = yes } }
		invite_to_daikatana = yes
	}
	else_if = {
		limit = { FROM = { is_daughters_of_hecate_member = yes } }
		invite_to_daughters_of_hecate = yes
	}
	else_if = {
		limit = { FROM = { is_denver_defense_network_member = yes } }
		invite_to_denver_defense_network = yes
	}
	else_if = {
		limit = { FROM = { is_earth_and_sky_member = yes } }
		invite_to_earth_and_sky = yes
	}
	else_if = {
		limit = { FROM = { is_empire_of_salt_member = yes } }
		invite_to_empire_of_salt = yes
	}
	else_if = {
		limit = { FROM = { is_equestria_member = yes } }
		invite_to_equestria = yes
	}
	else_if = {
		limit = { FROM = { is_faithful_member = yes } }
		invite_to_faithful = yes
	}
	else_if = {
		limit = { FROM = { is_fantasma_cartel_member = yes } }
		invite_to_fantasma_cartel = yes
	}
	else_if = {
		limit = { FROM = { is_glass_league_member = yes } }
		invite_to_glass_league = yes
	}
	else_if = {
		limit = { FROM = { is_great_federation_member = yes } }
		invite_to_great_federation = yes
	}
	else_if = {
		limit = { FROM = { is_great_plains_federation_member = yes } }
		invite_to_great_plains_federation = yes
	}
	else_if = {
		limit = { FROM = { is_jungle_pact_member = yes } }
		invite_to_jungle_pact = yes
	}
	else_if = {
		limit = { FROM = { is_kaisers_legion_member = yes } }
		invite_to_kaisers_legion = yes
	}
	else_if = {
		limit = { FROM = { is_masters_new_army_member = yes } }
		invite_to_masters_new_army = yes
	}
	else_if = {
		limit = { FROM = { is_mesoamerican_alliance_member = yes } }
		invite_to_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_the_fire_council_member = yes } }
		invite_to_the_fire_council = yes
	}
	else_if = {
		limit = { FROM = { is_mojave_alliance_member = yes } }
		invite_to_mojave_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_mormon_alliance_member = yes } }
		invite_to_mormon_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_nevada_enclave_member = yes } }
		invite_to_nevada_enclave = yes
	}
	else_if = {
		limit = { FROM = { is_nevada_pact_member = yes } }
		invite_to_nevada_pact = yes
	}
	else_if = {
		limit = { FROM = { is_northern_league_member = yes } }
		invite_to_northern_league = yes
	}
	else_if = {
		limit = { FROM = { is_northern_mojave_pact_member = yes } }
		invite_to_northern_mojave_pact = yes
	}
	else_if = {
		limit = { FROM = { is_phoenix_federation_member = yes } }
		invite_to_phoenix_federation = yes
	}
	else_if = {
		limit = { FROM = { is_rio_pact_member = yes } }
		invite_to_rio_pact = yes
	}
	else_if = {
		limit = { FROM = { is_senators_little_helpers_member = yes } }
		invite_to_senators_little_helpers = yes
	}
	else_if = {
		limit = { FROM = { is_great_confederation_member = yes } }
		invite_to_great_confederation = yes
	}
	else_if = {
		limit = { FROM = { is_texan_economic_union_member = yes } }
		invite_to_texan_economic_union = yes
	}
	else_if = {
		limit = { FROM = { is_unbroken_coast_member = yes } }
		invite_to_unbroken_coast = yes
	}
	else_if = {
		limit = { FROM = { is_western_enclave_member = yes } }
		invite_to_western_enclave = yes
	}
	else_if = {
		limit = { FROM = { is_order_of_st_joseph_member = yes } }
		invite_to_order_of_st_joseph = yes
	}
	else_if = {
		limit = { FROM = { is_breach_ferals_member = yes } }
		invite_to_breach_ferals = yes
	}
	else_if = {
		limit = { FROM = { is_white_sands_compact_member = yes } }
		invite_to_white_sands_compact = yes
	}
	else_if = {
		limit = { FROM = { is_cartel_faction_member = yes } }
		invite_to_cartel_faction = yes
	}
	else_if = {
		limit = { FROM = { is_cascadia_pirates_member = yes } }
		invite_to_cascadia_pirates = yes
	}
	else_if = {
		limit = { FROM = { is_transcascadia_republic_member = yes } }
		invite_to_transcascadia_republic = yes
	}
	else_if = {
		limit = { FROM = { is_new_california_member = yes } }
		invite_to_new_california = yes
	}
	else_if = {
		limit = { FROM = { is_the_second_coalition_member = yes } }
		invite_to_the_second_coalition = yes
	}
	else_if = {
		limit = { FROM = { is_imperium_mexicanum_member = yes } }
		invite_to_imperium_mexicanum = yes
	}
	else_if = {
		limit = { FROM = { is_mexican_league_member = yes } }
		invite_to_mexican_league = yes
	}
	else_if = {
		limit = { FROM = { is_midnight_union_member = yes } }
		invite_to_midnight_union = yes
	}
	else_if = {
		limit = { FROM = { is_big_circle_member = yes } }
		invite_to_big_circle = yes
	}
	else_if = {
		limit = { FROM = { is_dharma_way_member = yes } }
		invite_to_dharma_way = yes
	}
	else_if = {
		limit = { FROM = { is_californian_hegemony_member = yes } }
		invite_to_californian_hegemony = yes
	}
	else_if = {
		limit = { FROM = { is_northern_congress_member = yes } }
		invite_to_northern_congress = yes
	}
	else_if = {
		limit = { FROM = { is_road_warriors_member = yes } }
		invite_to_road_warriors = yes
	}
	else_if = {
		limit = { FROM = { is_synergy_alliance_member = yes } }
		invite_to_synergy_alliance = yes
	}
	else_if = {
		limit = { FROM = { is_vulpes_legion_member = yes } }
		invite_to_vulpes_legion = yes
	}
	else_if = {
		limit = { FROM = { is_aurelius_legion_member = yes } }
		invite_to_aurelius_legion = yes
	}
	else_if = {
		limit = { FROM = { is_lanius_legion_member = yes } }
		invite_to_lanius_legion = yes
	}
	else_if = {
		limit = { FROM = { is_hades_legion_member = yes } }
		invite_to_hades_legion = yes
	}
	else_if = {
		limit = { FROM = { is_lucius_legion_member = yes } }
		invite_to_lucius_legion = yes
	}
	else_if = {
		limit = { FROM = { is_malpais_legion_member = yes } }
		invite_to_malpais_legion = yes
	}
	else_if = {
		limit = { FROM = { is_northern_union_member = yes } }
		invite_to_northern_union = yes
	}
	else_if = {
		limit = { FROM = { is_bloody_electorals_member = yes } }
		invite_to_bloody_electorals = yes
	}
	else_if = {
		limit = { FROM = { is_canadian_watchdogs_member = yes } }
		invite_to_canadian_watchdogs = yes
	}
	else_if = {
		limit = { FROM = { is_kingdom_of_manitoba_member = yes } }
		invite_to_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { FROM = { is_united_wallers_member = yes } }
		invite_to_united_wallers = yes
	}
	else_if = {
		limit = { FROM = { is_montana_enclave_member = yes } }
		invite_to_montana_enclave = yes
	}
	else_if = {
		limit = { FROM = { is_northern_winds_member = yes } }
		invite_to_northern_winds = yes
	}
	else_if = {
		limit = { FROM = { is_allied_states_member = yes } }
		invite_to_allied_states = yes
	}
	else_if = {
		limit = { FROM = { is_fifth_world_member = yes } }
		invite_to_fifth_world = yes
	}
	else_if = {
		limit = { FROM = { is_red_shield_member = yes } }
		invite_to_red_shield = yes
	}
	else_if = {
		limit = { FROM = { is_wardens_of_white_member = yes } }
		invite_to_wardens_of_white = yes
	}
	else_if = {
		limit = { FROM = { is_miscounts_member = yes } }
		invite_to_miscounts = yes
	}
	else_if = {
		limit = { FROM = { is_royal_accord_member = yes } }
		invite_to_royal_accord = yes
	}
	else = {
		custom_effect_tooltip = invite_to_from_faction_tt
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] invite_to_from_faction [From.GetName] (scripted_effect) exited"
	}
}

join_prev_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] join_prev_faction [From.GetName] (scripted_effect) entered"
	}
	leave_current_faction = yes
	if = {
		limit = { PREV = { is_nova_legion_member = yes } }
		join_nova_legion = yes
	}
	else_if = {
		limit = { PREV = { is_chosen_ones_member = yes } }
		join_chosen_ones = yes
	}
	else_if = {
		limit = { PREV = { is_lanius_horde_member = yes } }
		join_lanius_horde = yes
	}
	else_if = {
		limit = { PREV = { is_big_mt_member = yes } }
		join_big_mt = yes
	}
	else_if = {
		limit = { PREV = { is_boneyard_brotherhood_member = yes } }
		join_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { PREV = { is_united_front_member = yes } }
		join_united_front = yes
	}
	else_if = {
		limit = { PREV = { is_western_brotherhood_of_steel_member = yes } }
		join_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { PREV = { is_caesars_legion_member = yes } }
		join_caesars_legion = yes
	}
	else_if = {
		limit = { PREV = { is_children_of_mexico_member = yes } }
		join_children_of_mexico = yes
	}
	else_if = {
		limit = { PREV = { is_children_of_the_gate_member = yes } }
		join_children_of_the_gate = yes
	}
	else_if = {
		limit = { PREV = { is_daikatana_member = yes } }
		join_daikatana = yes
	}
	else_if = {
		limit = { PREV = { is_daughters_of_hecate_member = yes } }
		join_daughters_of_hecate = yes
	}
	else_if = {
		limit = { PREV = { is_denver_defense_network_member = yes } }
		join_denver_defense_network = yes
	}
	else_if = {
		limit = { PREV = { is_earth_and_sky_member = yes } }
		join_earth_and_sky = yes
	}
	else_if = {
		limit = { PREV = { is_empire_of_salt_member = yes } }
		join_empire_of_salt = yes
	}
	else_if = {
		limit = { PREV = { is_equestria_member = yes } }
		join_equestria = yes
	}
	else_if = {
		limit = { PREV = { is_faithful_member = yes } }
		join_faithful = yes
	}
	else_if = {
		limit = { PREV = { is_fantasma_cartel_member = yes } }
		join_fantasma_cartel = yes
	}
	else_if = {
		limit = { PREV = { is_glass_league_member = yes } }
		join_glass_league = yes
	}
	else_if = {
		limit = { PREV = { is_great_federation_member = yes } }
		join_great_federation = yes
	}
	else_if = {
		limit = { PREV = { is_great_plains_federation_member = yes } }
		join_great_plains_federation = yes
	}
	else_if = {
		limit = { PREV = { is_jungle_pact_member = yes } }
		join_jungle_pact = yes
	}
	else_if = {
		limit = { PREV = { is_kaisers_legion_member = yes } }
		join_kaisers_legion = yes
	}
	else_if = {
		limit = { PREV = { is_masters_new_army_member = yes } }
		join_masters_new_army = yes
	}
	else_if = {
		limit = { PREV = { is_mesoamerican_alliance_member = yes } }
		join_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_the_fire_council_member = yes } }
		join_the_fire_council = yes
	}
	else_if = {
		limit = { PREV = { is_mojave_alliance_member = yes } }
		join_mojave_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_mormon_alliance_member = yes } }
		join_mormon_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_nevada_enclave_member = yes } }
		join_nevada_enclave = yes
	}
	else_if = {
		limit = { PREV = { is_nevada_pact_member = yes } }
		join_nevada_pact = yes
	}
	else_if = {
		limit = { PREV = { is_northern_league_member = yes } }
		join_northern_league = yes
	}
	else_if = {
		limit = { PREV = { is_northern_mojave_pact_member = yes } }
		join_northern_mojave_pact = yes
	}
	else_if = {
		limit = { PREV = { is_phoenix_federation_member = yes } }
		join_phoenix_federation = yes
	}
	else_if = {
		limit = { PREV = { is_rio_pact_member = yes } }
		join_rio_pact = yes
	}
	else_if = {
		limit = { PREV = { is_senators_little_helpers_member = yes } }
		join_senators_little_helpers = yes
	}
	else_if = {
		limit = { PREV = { is_great_confederation_member = yes } }
		join_great_confederation = yes
	}
	else_if = {
		limit = { PREV = { is_texan_economic_union_member = yes } }
		join_texan_economic_union = yes
	}
	else_if = {
		limit = { PREV = { is_unbroken_coast_member = yes } }
		join_unbroken_coast = yes
	}
	else_if = {
		limit = { PREV = { is_western_enclave_member = yes } }
		join_western_enclave = yes
	}
	else_if = {
		limit = { PREV = { is_order_of_st_joseph_member = yes } }
		join_order_of_st_joseph = yes
	}
	else_if = {
		limit = { PREV = { is_breach_ferals_member = yes } }
		join_breach_ferals = yes
	}
	else_if = {
		limit = { PREV = { is_white_sands_compact_member = yes } }
		join_white_sands_compact = yes
	}
	else_if = {
		limit = { PREV = { is_cartel_faction_member = yes } }
		join_cartel_faction = yes
	}
	else_if = {
		limit = { PREV = { is_cascadia_pirates_member = yes } }
		join_cascadia_pirates = yes
	}
	else_if = {
		limit = { PREV = { is_transcascadia_republic_member = yes } }
		join_transcascadia_republic = yes
	}
	else_if = {
		limit = { PREV = { is_new_california_member = yes } }
		join_new_california = yes
	}
	else_if = {
		limit = { PREV = { is_the_second_coalition_member = yes } }
		join_the_second_coalition = yes
	}
	else_if = {
		limit = { PREV = { is_imperium_mexicanum_member = yes } }
		join_imperium_mexicanum = yes
	}
	else_if = {
		limit = { PREV = { is_mexican_league_member = yes } }
		join_mexican_league = yes
	}
	else_if = {
		limit = { PREV = { is_midnight_union_member = yes } }
		join_midnight_union = yes
	}
	else_if = {
		limit = { PREV = { is_big_circle_member = yes } }
		join_big_circle = yes
	}
	else_if = {
		limit = { PREV = { is_dharma_way_member = yes } }
		join_dharma_way = yes
	}
	else_if = {
		limit = { PREV = { is_californian_hegemony_member = yes } }
		join_californian_hegemony = yes
	}
	else_if = {
		limit = { PREV = { is_northern_congress_member = yes } }
		join_northern_congress = yes
	}
	else_if = {
		limit = { PREV = { is_road_warriors_member = yes } }
		join_road_warriors = yes
	}
	else_if = {
		limit = { PREV = { is_synergy_alliance_member = yes } }
		join_synergy_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_vulpes_legion_member = yes } }
		join_vulpes_legion = yes
	}
	else_if = {
		limit = { PREV = { is_aurelius_legion_member = yes } }
		join_aurelius_legion = yes
	}
	else_if = {
		limit = { PREV = { is_lanius_legion_member = yes } }
		join_lanius_legion = yes
	}
	else_if = {
		limit = { PREV = { is_hades_legion_member = yes } }
		join_hades_legion = yes
	}
	else_if = {
		limit = { PREV = { is_lucius_legion_member = yes } }
		join_lucius_legion = yes
	}
	else_if = {
		limit = { PREV = { is_malpais_legion_member = yes } }
		join_malpais_legion = yes
	}
	else_if = {
		limit = { PREV = { is_northern_union_member = yes } }
		join_northern_union = yes
	}
	else_if = {
		limit = { PREV = { is_bloody_electorals_member = yes } }
		join_bloody_electorals = yes
	}
	else_if = {
		limit = { PREV = { is_canadian_watchdogs_member = yes } }
		join_canadian_watchdogs = yes
	}
	else_if = {
		limit = { PREV = { is_kingdom_of_manitoba_member = yes } }
		join_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { PREV = { is_united_wallers_member = yes } }
		join_united_wallers = yes
	}
	else_if = {
		limit = { PREV = { is_montana_enclave_member = yes } }
		join_montana_enclave = yes
	}
	else_if = {
		limit = { PREV = { is_northern_winds_member = yes } }
		join_northern_winds = yes
	}
	else_if = {
		limit = { PREV = { is_allied_states_member = yes } }
		join_allied_states = yes
	}
	else_if = {
		limit = { PREV = { is_fifth_world_member = yes } }
		join_fifth_world = yes
	}
	else_if = {
		limit = { PREV = { is_red_shield_member = yes } }
		join_red_shield = yes
	}
	else_if = {
		limit = { PREV = { is_wardens_of_white_member = yes } }
		join_wardens_of_white = yes
	}
	else_if = {
		limit = { PREV = { is_miscounts_member = yes } }
		join_miscounts = yes
	}
	else_if = {
		limit = { PREV = { is_royal_accord_member = yes } }
		join_royal_accord = yes
	}
	else = {
		custom_effect_tooltip = join_prev_faction_tt
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] join_prev_faction [From.GetName] (scripted_effect) exited"
	}
}

invite_to_prev_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] invite_to_prev_faction [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { PREV = { is_nova_legion_member = yes } }
		invite_to_nova_legion = yes
	}
	else_if = {
		limit = { PREV = { is_chosen_ones_member = yes } }
		invite_to_chosen_ones = yes
	}
	else_if = {
		limit = { PREV = { is_lanius_horde_member = yes } }
		invite_to_lanius_horde = yes
	}
	else_if = {
		limit = { PREV = { is_big_mt_member = yes } }
		invite_to_big_mt = yes
	}
	else_if = {
		limit = { PREV = { is_boneyard_brotherhood_member = yes } }
		invite_to_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { PREV = { is_united_front_member = yes } }
		invite_to_united_front = yes
	}
	else_if = {
		limit = { PREV = { is_western_brotherhood_of_steel_member = yes } }
		invite_to_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { PREV = { is_caesars_legion_member = yes } }
		invite_to_caesars_legion = yes
	}
	else_if = {
		limit = { PREV = { is_children_of_mexico_member = yes } }
		invite_to_children_of_mexico = yes
	}
	else_if = {
		limit = { PREV = { is_children_of_the_gate_member = yes } }
		invite_to_children_of_the_gate = yes
	}
	else_if = {
		limit = { PREV = { is_daikatana_member = yes } }
		invite_to_daikatana = yes
	}
	else_if = {
		limit = { PREV = { is_daughters_of_hecate_member = yes } }
		invite_to_daughters_of_hecate = yes
	}
	else_if = {
		limit = { PREV = { is_denver_defense_network_member = yes } }
		invite_to_denver_defense_network = yes
	}
	else_if = {
		limit = { PREV = { is_earth_and_sky_member = yes } }
		invite_to_earth_and_sky = yes
	}
	else_if = {
		limit = { PREV = { is_empire_of_salt_member = yes } }
		invite_to_empire_of_salt = yes
	}
	else_if = {
		limit = { PREV = { is_equestria_member = yes } }
		invite_to_equestria = yes
	}
	else_if = {
		limit = { PREV = { is_faithful_member = yes } }
		invite_to_faithful = yes
	}
	else_if = {
		limit = { PREV = { is_fantasma_cartel_member = yes } }
		invite_to_fantasma_cartel = yes
	}
	else_if = {
		limit = { PREV = { is_glass_league_member = yes } }
		invite_to_glass_league = yes
	}
	else_if = {
		limit = { PREV = { is_great_federation_member = yes } }
		invite_to_great_federation = yes
	}
	else_if = {
		limit = { PREV = { is_great_plains_federation_member = yes } }
		invite_to_great_plains_federation = yes
	}
	else_if = {
		limit = { PREV = { is_jungle_pact_member = yes } }
		invite_to_jungle_pact = yes
	}
	else_if = {
		limit = { PREV = { is_kaisers_legion_member = yes } }
		invite_to_kaisers_legion = yes
	}
	else_if = {
		limit = { PREV = { is_masters_new_army_member = yes } }
		invite_to_masters_new_army = yes
	}
	else_if = {
		limit = { PREV = { is_mesoamerican_alliance_member = yes } }
		invite_to_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_the_fire_council_member = yes } }
		invite_to_the_fire_council = yes
	}
	else_if = {
		limit = { PREV = { is_mojave_alliance_member = yes } }
		invite_to_mojave_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_mormon_alliance_member = yes } }
		invite_to_mormon_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_nevada_enclave_member = yes } }
		invite_to_nevada_enclave = yes
	}
	else_if = {
		limit = { PREV = { is_nevada_pact_member = yes } }
		invite_to_nevada_pact = yes
	}
	else_if = {
		limit = { PREV = { is_northern_league_member = yes } }
		invite_to_northern_league = yes
	}
	else_if = {
		limit = { PREV = { is_northern_mojave_pact_member = yes } }
		invite_to_northern_mojave_pact = yes
	}
	else_if = {
		limit = { PREV = { is_phoenix_federation_member = yes } }
		invite_to_phoenix_federation = yes
	}
	else_if = {
		limit = { PREV = { is_rio_pact_member = yes } }
		invite_to_rio_pact = yes
	}
	else_if = {
		limit = { PREV = { is_senators_little_helpers_member = yes } }
		invite_to_senators_little_helpers = yes
	}
	else_if = {
		limit = { PREV = { is_great_confederation_member = yes } }
		invite_to_great_confederation = yes
	}
	else_if = {
		limit = { PREV = { is_texan_economic_union_member = yes } }
		invite_to_texan_economic_union = yes
	}
	else_if = {
		limit = { PREV = { is_unbroken_coast_member = yes } }
		invite_to_unbroken_coast = yes
	}
	else_if = {
		limit = { PREV = { is_western_enclave_member = yes } }
		invite_to_western_enclave = yes
	}
	else_if = {
		limit = { PREV = { is_order_of_st_joseph_member = yes } }
		invite_to_order_of_st_joseph = yes
	}
	else_if = {
		limit = { PREV = { is_breach_ferals_member = yes } }
		invite_to_breach_ferals = yes
	}
	else_if = {
		limit = { PREV = { is_white_sands_compact_member = yes } }
		invite_to_white_sands_compact = yes
	}
	else_if = {
		limit = { PREV = { is_cartel_faction_member = yes } }
		invite_to_cartel_faction = yes
	}
	else_if = {
		limit = { PREV = { is_cascadia_pirates_member = yes } }
		invite_to_cascadia_pirates = yes
	}
	else_if = {
		limit = { PREV = { is_transcascadia_republic_member = yes } }
		invite_to_transcascadia_republic = yes
	}
	else_if = {
		limit = { PREV = { is_new_california_member = yes } }
		invite_to_new_california = yes
	}
	else_if = {
		limit = { PREV = { is_the_second_coalition_member = yes } }
		invite_to_the_second_coalition = yes
	}
	else_if = {
		limit = { PREV = { is_imperium_mexicanum_member = yes } }
		invite_to_imperium_mexicanum = yes
	}
	else_if = {
		limit = { PREV = { is_mexican_league_member = yes } }
		invite_to_mexican_league = yes
	}
	else_if = {
		limit = { PREV = { is_midnight_union_member = yes } }
		invite_to_midnight_union = yes
	}
	else_if = {
		limit = { PREV = { is_big_circle_member = yes } }
		invite_to_big_circle = yes
	}
	else_if = {
		limit = { PREV = { is_dharma_way_member = yes } }
		invite_to_dharma_way = yes
	}
	else_if = {
		limit = { PREV = { is_californian_hegemony_member = yes } }
		invite_to_californian_hegemony = yes
	}
	else_if = {
		limit = { PREV = { is_northern_congress_member = yes } }
		invite_to_northern_congress = yes
	}
	else_if = {
		limit = { PREV = { is_road_warriors_member = yes } }
		invite_to_road_warriors = yes
	}
	else_if = {
		limit = { PREV = { is_synergy_alliance_member = yes } }
		invite_to_synergy_alliance = yes
	}
	else_if = {
		limit = { PREV = { is_vulpes_legion_member = yes } }
		invite_to_vulpes_legion = yes
	}
	else_if = {
		limit = { PREV = { is_aurelius_legion_member = yes } }
		invite_to_aurelius_legion = yes
	}
	else_if = {
		limit = { PREV = { is_lanius_legion_member = yes } }
		invite_to_lanius_legion = yes
	}
	else_if = {
		limit = { PREV = { is_hades_legion_member = yes } }
		invite_to_hades_legion = yes
	}
	else_if = {
		limit = { PREV = { is_lucius_legion_member = yes } }
		invite_to_lucius_legion = yes
	}
	else_if = {
		limit = { PREV = { is_malpais_legion_member = yes } }
		invite_to_malpais_legion = yes
	}
	else_if = {
		limit = { PREV = { is_northern_union_member = yes } }
		invite_to_northern_union = yes
	}
	else_if = {
		limit = { PREV = { is_bloody_electorals_member = yes } }
		invite_to_bloody_electorals = yes
	}
	else_if = {
		limit = { PREV = { is_canadian_watchdogs_member = yes } }
		invite_to_canadian_watchdogs = yes
	}
	else_if = {
		limit = { PREV = { is_kingdom_of_manitoba_member = yes } }
		invite_to_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { PREV = { is_united_wallers_member = yes } }
		invite_to_united_wallers = yes
	}
	else_if = {
		limit = { PREV = { is_montana_enclave_member = yes } }
		invite_to_montana_enclave = yes
	}
	else_if = {
		limit = { PREV = { is_northern_winds_member = yes } }
		invite_to_northern_winds = yes
	}
	else_if = {
		limit = { PREV = { is_allied_states_member = yes } }
		invite_to_allied_states = yes
	}
	else_if = {
		limit = { PREV = { is_fifth_world_member = yes } }
		invite_to_fifth_world = yes
	}
	else_if = {
		limit = { PREV = { is_red_shield_member = yes } }
		invite_to_red_shield = yes
	}
	else_if = {
		limit = { PREV = { is_wardens_of_white_member = yes } }
		invite_to_wardens_of_white = yes
	}
	else_if = {
		limit = { PREV = { is_miscounts_member = yes } }
		invite_to_miscounts = yes
	}
	else_if = {
		limit = { PREV = { is_royal_accord_member = yes } }
		invite_to_royal_accord = yes
	}
	else = {
		custom_effect_tooltip = invite_to_prev_faction_tt
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] invite_to_prev_faction [From.GetName] (scripted_effect) exited"
	}
}

join_root_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] join_root_faction [From.GetName] (scripted_effect) entered"
	}
	leave_current_faction = yes
	if = {
		limit = { ROOT = { is_nova_legion_member = yes } }
		join_nova_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_chosen_ones_member = yes } }
		join_chosen_ones = yes
	}
	else_if = {
		limit = { ROOT = { is_lanius_horde_member = yes } }
		join_lanius_horde = yes
	}
	else_if = {
		limit = { ROOT = { is_big_mt_member = yes } }
		join_big_mt = yes
	}
	else_if = {
		limit = { ROOT = { is_boneyard_brotherhood_member = yes } }
		join_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { ROOT = { is_united_front_member = yes } }
		join_united_front = yes
	}
	else_if = {
		limit = { ROOT = { is_western_brotherhood_of_steel_member = yes } }
		join_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { ROOT = { is_caesars_legion_member = yes } }
		join_caesars_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_children_of_mexico_member = yes } }
		join_children_of_mexico = yes
	}
	else_if = {
		limit = { ROOT = { is_children_of_the_gate_member = yes } }
		join_children_of_the_gate = yes
	}
	else_if = {
		limit = { ROOT = { is_daikatana_member = yes } }
		join_daikatana = yes
	}
	else_if = {
		limit = { ROOT = { is_daughters_of_hecate_member = yes } }
		join_daughters_of_hecate = yes
	}
	else_if = {
		limit = { ROOT = { is_denver_defense_network_member = yes } }
		join_denver_defense_network = yes
	}
	else_if = {
		limit = { ROOT = { is_earth_and_sky_member = yes } }
		join_earth_and_sky = yes
	}
	else_if = {
		limit = { ROOT = { is_empire_of_salt_member = yes } }
		join_empire_of_salt = yes
	}
	else_if = {
		limit = { ROOT = { is_equestria_member = yes } }
		join_equestria = yes
	}
	else_if = {
		limit = { ROOT = { is_faithful_member = yes } }
		join_faithful = yes
	}
	else_if = {
		limit = { ROOT = { is_fantasma_cartel_member = yes } }
		join_fantasma_cartel = yes
	}
	else_if = {
		limit = { ROOT = { is_glass_league_member = yes } }
		join_glass_league = yes
	}
	else_if = {
		limit = { ROOT = { is_great_federation_member = yes } }
		join_great_federation = yes
	}
	else_if = {
		limit = { ROOT = { is_great_plains_federation_member = yes } }
		join_great_plains_federation = yes
	}
	else_if = {
		limit = { ROOT = { is_jungle_pact_member = yes } }
		join_jungle_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_kaisers_legion_member = yes } }
		join_kaisers_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_masters_new_army_member = yes } }
		join_masters_new_army = yes
	}
	else_if = {
		limit = { ROOT = { is_mesoamerican_alliance_member = yes } }
		join_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_the_fire_council_member = yes } }
		join_the_fire_council = yes
	}
	else_if = {
		limit = { ROOT = { is_mojave_alliance_member = yes } }
		join_mojave_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_mormon_alliance_member = yes } }
		join_mormon_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_nevada_enclave_member = yes } }
		join_nevada_enclave = yes
	}
	else_if = {
		limit = { ROOT = { is_nevada_pact_member = yes } }
		join_nevada_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_league_member = yes } }
		join_northern_league = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_mojave_pact_member = yes } }
		join_northern_mojave_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_phoenix_federation_member = yes } }
		join_phoenix_federation = yes
	}
	else_if = {
		limit = { ROOT = { is_rio_pact_member = yes } }
		join_rio_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_senators_little_helpers_member = yes } }
		join_senators_little_helpers = yes
	}
	else_if = {
		limit = { ROOT = { is_great_confederation_member = yes } }
		join_great_confederation = yes
	}
	else_if = {
		limit = { ROOT = { is_texan_economic_union_member = yes } }
		join_texan_economic_union = yes
	}
	else_if = {
		limit = { ROOT = { is_unbroken_coast_member = yes } }
		join_unbroken_coast = yes
	}
	else_if = {
		limit = { ROOT = { is_western_enclave_member = yes } }
		join_western_enclave = yes
	}
	else_if = {
		limit = { ROOT = { is_order_of_st_joseph_member = yes } }
		join_order_of_st_joseph = yes
	}
	else_if = {
		limit = { ROOT = { is_breach_ferals_member = yes } }
		join_breach_ferals = yes
	}
	else_if = {
		limit = { ROOT = { is_white_sands_compact_member = yes } }
		join_white_sands_compact = yes
	}
	else_if = {
		limit = { ROOT = { is_cartel_faction_member = yes } }
		join_cartel_faction = yes
	}
	else_if = {
		limit = { ROOT = { is_cascadia_pirates_member = yes } }
		join_cascadia_pirates = yes
	}
	else_if = {
		limit = { ROOT = { is_transcascadia_republic_member = yes } }
		join_transcascadia_republic = yes
	}
	else_if = {
		limit = { ROOT = { is_new_california_member = yes } }
		join_new_california = yes
	}
	else_if = {
		limit = { ROOT = { is_the_second_coalition_member = yes } }
		join_the_second_coalition = yes
	}
	else_if = {
		limit = { ROOT = { is_imperium_mexicanum_member = yes } }
		join_imperium_mexicanum = yes
	}
	else_if = {
		limit = { ROOT = { is_mexican_league_member = yes } }
		join_mexican_league = yes
	}
	else_if = {
		limit = { ROOT = { is_midnight_union_member = yes } }
		join_midnight_union = yes
	}
	else_if = {
		limit = { ROOT = { is_big_circle_member = yes } }
		join_big_circle = yes
	}
	else_if = {
		limit = { ROOT = { is_dharma_way_member = yes } }
		join_dharma_way = yes
	}
	else_if = {
		limit = { ROOT = { is_californian_hegemony_member = yes } }
		join_californian_hegemony = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_congress_member = yes } }
		join_northern_congress = yes
	}
	else_if = {
		limit = { ROOT = { is_road_warriors_member = yes } }
		join_road_warriors = yes
	}
	else_if = {
		limit = { ROOT = { is_synergy_alliance_member = yes } }
		join_synergy_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_vulpes_legion_member = yes } }
		join_vulpes_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_aurelius_legion_member = yes } }
		join_aurelius_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_lanius_legion_member = yes } }
		join_lanius_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_hades_legion_member = yes } }
		join_hades_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_lucius_legion_member = yes } }
		join_lucius_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_malpais_legion_member = yes } }
		join_malpais_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_union_member = yes } }
		join_northern_union = yes
	}
	else_if = {
		limit = { ROOT = { is_bloody_electorals_member = yes } }
		join_bloody_electorals = yes
	}
	else_if = {
		limit = { ROOT = { is_canadian_watchdogs_member = yes } }
		join_canadian_watchdogs = yes
	}
	else_if = {
		limit = { ROOT = { is_kingdom_of_manitoba_member = yes } }
		join_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { ROOT = { is_united_wallers_member = yes } }
		join_united_wallers = yes
	}
	else_if = {
		limit = { ROOT = { is_montana_enclave_member = yes } }
		join_montana_enclave = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_winds_member = yes } }
		join_northern_winds = yes
	}
	else_if = {
		limit = { ROOT = { is_allied_states_member = yes } }
		join_allied_states = yes
	}
	else_if = {
		limit = { ROOT = { is_fifth_world_member = yes } }
		join_fifth_world = yes
	}
	else_if = {
		limit = { ROOT = { is_red_shield_member = yes } }
		join_red_shield = yes
	}
	else_if = {
		limit = { ROOT = { is_wardens_of_white_member = yes } }
		join_wardens_of_white = yes
	}
	else_if = {
		limit = { ROOT = { is_miscounts_member = yes } }
		join_miscounts = yes
	}
	else_if = {
		limit = { ROOT = { is_royal_accord_member = yes } }
		join_royal_accord = yes
	}
	else = {
		custom_effect_tooltip = join_root_faction_tt
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] join_root_faction [From.GetName] (scripted_effect) exited"
	}
}

invite_to_root_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] invite_to_root_faction [From.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { ROOT = { is_nova_legion_member = yes } }
		invite_to_nova_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_chosen_ones_member = yes } }
		invite_to_chosen_ones = yes
	}
	else_if = {
		limit = { ROOT = { is_lanius_horde_member = yes } }
		invite_to_lanius_horde = yes
	}
	else_if = {
		limit = { ROOT = { is_big_mt_member = yes } }
		invite_to_big_mt = yes
	}
	else_if = {
		limit = { ROOT = { is_boneyard_brotherhood_member = yes } }
		invite_to_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { ROOT = { is_united_front_member = yes } }
		invite_to_united_front = yes
	}
	else_if = {
		limit = { ROOT = { is_western_brotherhood_of_steel_member = yes } }
		invite_to_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { ROOT = { is_caesars_legion_member = yes } }
		invite_to_caesars_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_children_of_mexico_member = yes } }
		invite_to_children_of_mexico = yes
	}
	else_if = {
		limit = { ROOT = { is_children_of_the_gate_member = yes } }
		invite_to_children_of_the_gate = yes
	}
	else_if = {
		limit = { ROOT = { is_daikatana_member = yes } }
		invite_to_daikatana = yes
	}
	else_if = {
		limit = { ROOT = { is_daughters_of_hecate_member = yes } }
		invite_to_daughters_of_hecate = yes
	}
	else_if = {
		limit = { ROOT = { is_denver_defense_network_member = yes } }
		invite_to_denver_defense_network = yes
	}
	else_if = {
		limit = { ROOT = { is_earth_and_sky_member = yes } }
		invite_to_earth_and_sky = yes
	}
	else_if = {
		limit = { ROOT = { is_empire_of_salt_member = yes } }
		invite_to_empire_of_salt = yes
	}
	else_if = {
		limit = { ROOT = { is_equestria_member = yes } }
		invite_to_equestria = yes
	}
	else_if = {
		limit = { ROOT = { is_faithful_member = yes } }
		invite_to_faithful = yes
	}
	else_if = {
		limit = { ROOT = { is_fantasma_cartel_member = yes } }
		invite_to_fantasma_cartel = yes
	}
	else_if = {
		limit = { ROOT = { is_glass_league_member = yes } }
		invite_to_glass_league = yes
	}
	else_if = {
		limit = { ROOT = { is_great_federation_member = yes } }
		invite_to_great_federation = yes
	}
	else_if = {
		limit = { ROOT = { is_great_plains_federation_member = yes } }
		invite_to_great_plains_federation = yes
	}
	else_if = {
		limit = { ROOT = { is_jungle_pact_member = yes } }
		invite_to_jungle_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_kaisers_legion_member = yes } }
		invite_to_kaisers_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_masters_new_army_member = yes } }
		invite_to_masters_new_army = yes
	}
	else_if = {
		limit = { ROOT = { is_mesoamerican_alliance_member = yes } }
		invite_to_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_the_fire_council_member = yes } }
		invite_to_the_fire_council = yes
	}
	else_if = {
		limit = { ROOT = { is_mojave_alliance_member = yes } }
		invite_to_mojave_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_mormon_alliance_member = yes } }
		invite_to_mormon_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_nevada_enclave_member = yes } }
		invite_to_nevada_enclave = yes
	}
	else_if = {
		limit = { ROOT = { is_nevada_pact_member = yes } }
		invite_to_nevada_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_league_member = yes } }
		invite_to_northern_league = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_mojave_pact_member = yes } }
		invite_to_northern_mojave_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_phoenix_federation_member = yes } }
		invite_to_phoenix_federation = yes
	}
	else_if = {
		limit = { ROOT = { is_rio_pact_member = yes } }
		invite_to_rio_pact = yes
	}
	else_if = {
		limit = { ROOT = { is_senators_little_helpers_member = yes } }
		invite_to_senators_little_helpers = yes
	}
	else_if = {
		limit = { ROOT = { is_great_confederation_member = yes } }
		invite_to_great_confederation = yes
	}
	else_if = {
		limit = { ROOT = { is_texan_economic_union_member = yes } }
		invite_to_texan_economic_union = yes
	}
	else_if = {
		limit = { ROOT = { is_unbroken_coast_member = yes } }
		invite_to_unbroken_coast = yes
	}
	else_if = {
		limit = { ROOT = { is_western_enclave_member = yes } }
		invite_to_western_enclave = yes
	}
	else_if = {
		limit = { ROOT = { is_order_of_st_joseph_member = yes } }
		invite_to_order_of_st_joseph = yes
	}
	else_if = {
		limit = { ROOT = { is_breach_ferals_member = yes } }
		invite_to_breach_ferals = yes
	}
	else_if = {
		limit = { ROOT = { is_white_sands_compact_member = yes } }
		invite_to_white_sands_compact = yes
	}
	else_if = {
		limit = { ROOT = { is_cartel_faction_member = yes } }
		invite_to_cartel_faction = yes
	}
	else_if = {
		limit = { ROOT = { is_cascadia_pirates_member = yes } }
		invite_to_cascadia_pirates = yes
	}
	else_if = {
		limit = { ROOT = { is_transcascadia_republic_member = yes } }
		invite_to_transcascadia_republic = yes
	}
	else_if = {
		limit = { ROOT = { is_new_california_member = yes } }
		invite_to_new_california = yes
	}
	else_if = {
		limit = { ROOT = { is_the_second_coalition_member = yes } }
		invite_to_the_second_coalition = yes
	}
	else_if = {
		limit = { ROOT = { is_imperium_mexicanum_member = yes } }
		invite_to_imperium_mexicanum = yes
	}
	else_if = {
		limit = { ROOT = { is_mexican_league_member = yes } }
		invite_to_mexican_league = yes
	}
	else_if = {
		limit = { ROOT = { is_midnight_union_member = yes } }
		invite_to_midnight_union = yes
	}
	else_if = {
		limit = { ROOT = { is_big_circle_member = yes } }
		invite_to_big_circle = yes
	}
	else_if = {
		limit = { ROOT = { is_dharma_way_member = yes } }
		invite_to_dharma_way = yes
	}
	else_if = {
		limit = { ROOT = { is_californian_hegemony_member = yes } }
		invite_to_californian_hegemony = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_congress_member = yes } }
		invite_to_northern_congress = yes
	}
	else_if = {
		limit = { ROOT = { is_road_warriors_member = yes } }
		invite_to_road_warriors = yes
	}
	else_if = {
		limit = { ROOT = { is_synergy_alliance_member = yes } }
		invite_to_synergy_alliance = yes
	}
	else_if = {
		limit = { ROOT = { is_vulpes_legion_member = yes } }
		invite_to_vulpes_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_aurelius_legion_member = yes } }
		invite_to_aurelius_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_lanius_legion_member = yes } }
		invite_to_lanius_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_hades_legion_member = yes } }
		invite_to_hades_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_lucius_legion_member = yes } }
		invite_to_lucius_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_malpais_legion_member = yes } }
		invite_to_malpais_legion = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_union_member = yes } }
		invite_to_northern_union = yes
	}
	else_if = {
		limit = { ROOT = { is_bloody_electorals_member = yes } }
		invite_to_bloody_electorals = yes
	}
	else_if = {
		limit = { ROOT = { is_canadian_watchdogs_member = yes } }
		invite_to_canadian_watchdogs = yes
	}
	else_if = {
		limit = { ROOT = { is_kingdom_of_manitoba_member = yes } }
		invite_to_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { ROOT = { is_united_wallers_member = yes } }
		invite_to_united_wallers = yes
	}
	else_if = {
		limit = { ROOT = { is_montana_enclave_member = yes } }
		invite_to_montana_enclave = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_winds_member = yes } }
		invite_to_northern_winds = yes
	}
	else_if = {
		limit = { ROOT = { is_allied_states_member = yes } }
		invite_to_allied_states = yes
	}
	else_if = {
		limit = { ROOT = { is_fifth_world_member = yes } }
		invite_to_fifth_world = yes
	}
	else_if = {
		limit = { ROOT = { is_red_shield_member = yes } }
		invite_to_red_shield = yes
	}
	else_if = {
		limit = { ROOT = { is_wardens_of_white_member = yes } }
		invite_to_wardens_of_white = yes
	}
	else_if = {
		limit = { ROOT = { is_miscounts_member = yes } }
		invite_to_miscounts = yes
	}
	else_if = {
		limit = { ROOT = { is_royal_accord_member = yes } }
		invite_to_royal_accord = yes
	}
	else = {
		custom_effect_tooltip = invite_to_root_faction_tt
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] invite_to_root_faction [From.GetName] (scripted_effect) exited"
	}
}

leave_current_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] leave_current_faction (scripted_effect) entered"
	}
	if = {
		limit = { is_nova_legion_member = yes }
		leave_nova_legion = yes
	}
	else_if = {
		limit = { is_chosen_ones_member = yes }
		leave_chosen_ones = yes
	}
	else_if = {
		limit = { is_lanius_horde_member = yes }
		leave_lanius_horde = yes
	}
	else_if = {
		limit = { is_big_mt_member = yes }
		leave_big_mt = yes
	}
	else_if = {
		limit = { is_boneyard_brotherhood_member = yes }
		leave_boneyard_brotherhood = yes
	}
	else_if = {
		limit = { is_united_front_member = yes }
		leave_united_front = yes
	}
	else_if = {
		limit = { is_western_brotherhood_of_steel_member = yes }
		leave_western_brotherhood_of_steel = yes
	}
	else_if = {
		limit = { is_caesars_legion_member = yes }
		leave_caesars_legion = yes
	}
	else_if = {
		limit = { is_children_of_mexico_member = yes }
		leave_children_of_mexico = yes
	}
	else_if = {
		limit = { is_children_of_the_gate_member = yes }
		leave_children_of_the_gate = yes
	}
	else_if = {
		limit = { is_daikatana_member = yes }
		leave_daikatana = yes
	}
	else_if = {
		limit = { is_daughters_of_hecate_member = yes }
		leave_daughters_of_hecate = yes
	}
	else_if = {
		limit = { is_denver_defense_network_member = yes }
		leave_denver_defense_network = yes
	}
	else_if = {
		limit = { is_earth_and_sky_member = yes }
		leave_earth_and_sky = yes
	}
	else_if = {
		limit = { is_empire_of_salt_member = yes }
		leave_empire_of_salt = yes
	}
	else_if = {
		limit = { is_equestria_member = yes }
		leave_equestria = yes
	}
	else_if = {
		limit = { is_faithful_member = yes }
		leave_faithful = yes
	}
	else_if = {
		limit = { is_fantasma_cartel_member = yes }
		leave_fantasma_cartel = yes
	}
	else_if = {
		limit = { is_glass_league_member = yes }
		leave_glass_league = yes
	}
	else_if = {
		limit = { is_great_federation_member = yes }
		leave_great_federation = yes
	}
	else_if = {
		limit = { is_great_plains_federation_member = yes }
		leave_great_plains_federation = yes
	}
	else_if = {
		limit = { is_jungle_pact_member = yes }
		leave_jungle_pact = yes
	}
	else_if = {
		limit = { is_kaisers_legion_member = yes }
		leave_kaisers_legion = yes
	}
	else_if = {
		limit = { is_masters_new_army_member = yes }
		leave_masters_new_army = yes
	}
	else_if = {
		limit = { is_mesoamerican_alliance_member = yes }
		leave_mesoamerican_alliance = yes
	}
	else_if = {
		limit = { is_the_fire_council_member = yes }
		leave_the_fire_council = yes
	}
	else_if = {
		limit = { is_mojave_alliance_member = yes }
		leave_mojave_alliance = yes
	}
	else_if = {
		limit = { is_mormon_alliance_member = yes }
		leave_mormon_alliance = yes
	}
	else_if = {
		limit = { is_nevada_enclave_member = yes }
		leave_nevada_enclave = yes
	}
	else_if = {
		limit = { is_nevada_pact_member = yes }
		leave_nevada_pact = yes
	}
	else_if = {
		limit = { is_northern_league_member = yes }
		leave_northern_league = yes
	}
	else_if = {
		limit = { is_northern_mojave_pact_member = yes }
		leave_northern_mojave_pact = yes
	}
	else_if = {
		limit = { is_phoenix_federation_member = yes }
		leave_phoenix_federation = yes
	}
	else_if = {
		limit = { is_rio_pact_member = yes }
		leave_rio_pact = yes
	}
	else_if = {
		limit = { is_senators_little_helpers_member = yes }
		leave_senators_little_helpers = yes
	}
	else_if = {
		limit = { is_great_confederation_member = yes }
		leave_great_confederation = yes
	}
	else_if = {
		limit = { is_texan_economic_union_member = yes }
		leave_texan_economic_union = yes
	}
	else_if = {
		limit = { is_unbroken_coast_member = yes }
		leave_unbroken_coast = yes
	}
	else_if = {
		limit = { is_western_enclave_member = yes }
		leave_western_enclave = yes
	}
	else_if = {
		limit = { is_order_of_st_joseph_member = yes }
		leave_order_of_st_joseph = yes
	}
	else_if = {
		limit = { is_breach_ferals_member = yes }
		leave_breach_ferals = yes
	}
	else_if = {
		limit = { is_white_sands_compact_member = yes }
		leave_white_sands_compact = yes
	}
	else_if = {
		limit = { is_cartel_faction_member = yes }
		leave_cartel_faction = yes
	}
	else_if = {
		limit = { is_cascadia_pirates_member = yes }
		leave_cascadia_pirates = yes
	}
	else_if = {
		limit = { is_transcascadia_republic_member = yes }
		leave_transcascadia_republic = yes
	}
	else_if = {
		limit = { is_new_california_member = yes }
		leave_new_california = yes
	}
	else_if = {
		limit = { is_the_second_coalition_member = yes }
		leave_the_second_coalition = yes
	}
	else_if = {
		limit = { is_imperium_mexicanum_member = yes }
		leave_imperium_mexicanum = yes
	}
	else_if = {
		limit = { is_mexican_league_member = yes }
		leave_mexican_league = yes
	}
	else_if = {
		limit = { is_midnight_union_member = yes }
		leave_midnight_union = yes
	}
	else_if = {
		limit = { is_big_circle_member = yes }
		leave_big_circle = yes
	}
	else_if = {
		limit = { is_dharma_way_member = yes }
		leave_dharma_way = yes
	}
	else_if = {
		limit = { is_californian_hegemony_member = yes }
		leave_californian_hegemony = yes
	}
	else_if = {
		limit = { is_northern_congress_member = yes }
		leave_northern_congress = yes
	}
	else_if = {
		limit = { is_road_warriors_member = yes }
		leave_road_warriors = yes
	}
	else_if = {
		limit = { is_synergy_alliance_member = yes }
		leave_synergy_alliance = yes
	}
	else_if = {
		limit = { is_vulpes_legion_member = yes }
		leave_vulpes_legion = yes
	}
	else_if = {
		limit = { is_aurelius_legion_member = yes }
		leave_aurelius_legion = yes
	}
	else_if = {
		limit = { is_lanius_legion_member = yes }
		leave_lanius_legion = yes
	}
	else_if = {
		limit = { is_hades_legion_member = yes }
		leave_hades_legion = yes
	}
	else_if = {
		limit = { is_lucius_legion_member = yes }
		leave_lucius_legion = yes
	}
	else_if = {
		limit = { is_malpais_legion_member = yes }
		leave_malpais_legion = yes
	}
	else_if = {
		limit = { is_northern_union_member = yes }
		leave_northern_union = yes
	}
	else_if = {
		limit = { is_bloody_electorals_member = yes }
		leave_bloody_electorals = yes
	}
	else_if = {
		limit = { is_canadian_watchdogs_member = yes }
		leave_canadian_watchdogs = yes
	}
	else_if = {
		limit = { is_kingdom_of_manitoba_member = yes }
		leave_kingdom_of_manitoba = yes
	}
	else_if = {
		limit = { is_united_wallers_member = yes }
		leave_united_wallers = yes
	}
	else_if = {
		limit = { is_montana_enclave_member = yes }
		leave_montana_enclave = yes
	}
	else_if = {
		limit = { is_northern_winds_member = yes }
		leave_northern_winds = yes
	}
	else_if = {
		limit = { is_allied_states_member = yes }
		leave_allied_states = yes
	}
	else_if = {
		limit = { is_fifth_world_member = yes }
		leave_fifth_world = yes
	}
	else_if = {
		limit = { is_red_shield_member = yes }
		leave_red_shield = yes
	}
	else_if = {
		limit = { is_wardens_of_white_member = yes }
		leave_wardens_of_white = yes
	}
	else_if = {
		limit = { is_miscounts_member = yes }
		leave_miscounts = yes
	}
	else_if = {
		limit = { is_royal_accord_member = yes }
		leave_royal_accord = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] leave_current_faction (scripted_effect) exited"
	}
}

d_leave_faction = {
	log = "[GetDateText]: Removing [This.GetName] from current faction..."
	leave_current_faction = yes
}

become_puppet = {
	become_puppet_of_prev = yes
}

become_puppet_of_prev = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] become_puppet of [Prev.GetName] (scripted_effect) entered"
	}
	leave_current_faction = yes
	PREV = { puppet = PREV }
	hidden_effect = {
		if = {
			limit = { PREV = { is_nova_legion_member = yes } }
			mark_as_nova_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_chosen_ones_member = yes } }
			mark_as_chosen_ones_member = yes
		}
		else_if = {
			limit = { PREV = { is_lanius_horde_member = yes } }
			mark_as_lanius_horde_member = yes
		}
		else_if = {
			limit = { PREV = { is_big_mt_member = yes } }
			mark_as_big_mt_member = yes
		}
		else_if = {
			limit = { PREV = { is_boneyard_brotherhood_member = yes } }
			mark_as_boneyard_brotherhood_member = yes
		}
		else_if = {
			limit = { PREV = { is_united_front_member = yes } }
			mark_as_united_front_member = yes
		}
		else_if = {
			limit = { PREV = { is_western_brotherhood_of_steel_member = yes } }
			mark_as_western_brotherhood_of_steel_member = yes
		}
		else_if = {
			limit = { PREV = { is_caesars_legion_member = yes } }
			mark_as_caesars_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_children_of_mexico_member = yes } }
			mark_as_children_of_mexico_member = yes
		}
		else_if = {
			limit = { PREV = { is_children_of_the_gate_member = yes } }
			mark_as_children_of_the_gate_member = yes
		}
		else_if = {
			limit = { PREV = { is_daikatana_member = yes } }
			mark_as_daikatana_member = yes
		}
		else_if = {
			limit = { PREV = { is_daughters_of_hecate_member = yes } }
			mark_as_daughters_of_hecate_member = yes
		}
		else_if = {
			limit = { PREV = { is_denver_defense_network_member = yes } }
			mark_as_denver_defense_network_member = yes
		}
		else_if = {
			limit = { PREV = { is_earth_and_sky_member = yes } }
			mark_as_earth_and_sky_member = yes
		}
		else_if = {
			limit = { PREV = { is_empire_of_salt_member = yes } }
			mark_as_empire_of_salt_member = yes
		}
		else_if = {
			limit = { PREV = { is_equestria_member = yes } }
			mark_as_equestria_member = yes
		}
		else_if = {
			limit = { PREV = { is_faithful_member = yes } }
			mark_as_faithful_member = yes
		}
		else_if = {
			limit = { PREV = { is_fantasma_cartel_member = yes } }
			mark_as_fantasma_cartel_member = yes
		}
		else_if = {
			limit = { PREV = { is_glass_league_member = yes } }
			mark_as_glass_league_member = yes
		}
		else_if = {
			limit = { PREV = { is_great_federation_member = yes } }
			mark_as_great_federation_member = yes
		}
		else_if = {
			limit = { PREV = { is_great_plains_federation_member = yes } }
			mark_as_great_plains_federation_member = yes
		}
		else_if = {
			limit = { PREV = { is_jungle_pact_member = yes } }
			mark_as_jungle_pact_member = yes
		}
		else_if = {
			limit = { PREV = { is_kaisers_legion_member = yes } }
			mark_as_kaisers_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_masters_new_army_member = yes } }
			mark_as_masters_new_army_member = yes
		}
		else_if = {
			limit = { PREV = { is_mesoamerican_alliance_member = yes } }
			mark_as_mesoamerican_alliance_member = yes
		}
		else_if = {
			limit = { PREV = { is_the_fire_council_member = yes } }
			mark_as_the_fire_council_member = yes
		}
		else_if = {
			limit = { PREV = { is_mojave_alliance_member = yes } }
			mark_as_mojave_alliance_member = yes
		}
		else_if = {
			limit = { PREV = { is_mormon_alliance_member = yes } }
			mark_as_mormon_alliance_member = yes
		}
		else_if = {
			limit = { PREV = { is_nevada_enclave_member = yes } }
			mark_as_nevada_enclave_member = yes
		}
		else_if = {
			limit = { PREV = { is_nevada_pact_member = yes } }
			mark_as_nevada_pact_member = yes
		}
		else_if = {
			limit = { PREV = { is_northern_league_member = yes } }
			mark_as_northern_league_member = yes
		}
		else_if = {
			limit = { PREV = { is_northern_mojave_pact_member = yes } }
			mark_as_northern_mojave_pact_member = yes
		}
		else_if = {
			limit = { PREV = { is_phoenix_federation_member = yes } }
			mark_as_phoenix_federation_member = yes
		}
		else_if = {
			limit = { PREV = { is_rio_pact_member = yes } }
			mark_as_rio_pact_member = yes
		}
		else_if = {
			limit = { PREV = { is_senators_little_helpers_member = yes } }
			mark_as_senators_little_helpers_member = yes
		}
		else_if = {
			limit = { PREV = { is_great_confederation_member = yes } }
			mark_as_great_confederation_member = yes
		}
		else_if = {
			limit = { PREV = { is_texan_economic_union_member = yes } }
			mark_as_texan_economic_union_member = yes
		}
		else_if = {
			limit = { PREV = { is_unbroken_coast_member = yes } }
			mark_as_unbroken_coast_member = yes
		}
		else_if = {
			limit = { PREV = { is_western_enclave_member = yes } }
			mark_as_western_enclave_member = yes
		}
		else_if = {
			limit = { PREV = { is_order_of_st_joseph_member = yes } }
			mark_as_order_of_st_joseph_member = yes
		}
		else_if = {
			limit = { PREV = { is_breach_ferals_member = yes } }
			mark_as_breach_ferals_member = yes
		}
		else_if = {
			limit = { PREV = { is_white_sands_compact_member = yes } }
			mark_as_white_sands_compact_member = yes
		}
		else_if = {
			limit = { PREV = { is_cartel_faction_member = yes } }
			mark_as_cartel_faction_member = yes
		}
		else_if = {
			limit = { PREV = { is_cascadia_pirates_member = yes } }
			mark_as_cascadia_pirates_member = yes
		}
		else_if = {
			limit = { PREV = { is_transcascadia_republic_member = yes } }
			mark_as_transcascadia_republic_member = yes
		}
		else_if = {
			limit = { PREV = { is_new_california_member = yes } }
			mark_as_new_california_member = yes
		}
		else_if = {
			limit = { PREV = { is_the_second_coalition_member = yes } }
			mark_as_the_second_coalition_member = yes
		}
		else_if = {
			limit = { PREV = { is_imperium_mexicanum_member = yes } }
			mark_as_imperium_mexicanum_member = yes
		}
		else_if = {
			limit = { PREV = { is_mexican_league_member = yes } }
			mark_as_mexican_league_member = yes
		}
		else_if = {
			limit = { PREV = { is_midnight_union_member = yes } }
			mark_as_midnight_union_member = yes
		}
		else_if = {
			limit = { PREV = { is_big_circle_member = yes } }
			mark_as_big_circle_member = yes
		}
		else_if = {
			limit = { PREV = { is_dharma_way_member = yes } }
			mark_as_dharma_way_member = yes
		}
		else_if = {
			limit = { PREV = { is_californian_hegemony_member = yes } }
			mark_as_californian_hegemony_member = yes
		}
		else_if = {
			limit = { PREV = { is_northern_congress_member = yes } }
			mark_as_northern_congress_member = yes
		}
		else_if = {
			limit = { PREV = { is_road_warriors_member = yes } }
			mark_as_road_warriors_member = yes
		}
		else_if = {
			limit = { PREV = { is_synergy_alliance_member = yes } }
			mark_as_synergy_alliance_member = yes
		}
		else_if = {
			limit = { PREV = { is_vulpes_legion_member = yes } }
			mark_as_vulpes_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_aurelius_legion_member = yes } }
			mark_as_aurelius_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_lanius_legion_member = yes } }
			mark_as_lanius_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_hades_legion_member = yes } }
			mark_as_hades_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_lucius_legion_member = yes } }
			mark_as_lucius_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_malpais_legion_member = yes } }
			mark_as_malpais_legion_member = yes
		}
		else_if = {
			limit = { PREV = { is_northern_union_member = yes } }
			mark_as_northern_union_member = yes
		}
		else_if = {
			limit = { PREV = { is_bloody_electorals_member = yes } }
			mark_as_bloody_electorals_member = yes
		}
		else_if = {
			limit = { PREV = { is_canadian_watchdogs_member = yes } }
			mark_as_canadian_watchdogs_member = yes
		}
		else_if = {
			limit = { PREV = { is_kingdom_of_manitoba_member = yes } }
			mark_as_kingdom_of_manitoba_member = yes
		}
		else_if = {
			limit = { PREV = { is_united_wallers_member = yes } }
			mark_as_united_wallers_member = yes
		}
		else_if = {
			limit = { PREV = { is_montana_enclave_member = yes } }
			mark_as_montana_enclave_member = yes
		}
		else_if = {
			limit = { PREV = { is_northern_winds_member = yes } }
			mark_as_northern_winds_member = yes
		}
		else_if = {
			limit = { PREV = { is_allied_states_member = yes } }
			mark_as_allied_states_member = yes
		}
		else_if = {
			limit = { PREV = { is_fifth_world_member = yes } }
			mark_as_fifth_world_member = yes
		}
		else_if = {
			limit = { PREV = { is_red_shield_member = yes } }
			mark_as_red_shield_member = yes
		}
		else_if = {
			limit = { PREV = { is_wardens_of_white_member = yes } }
			mark_as_wardens_of_white_member = yes
		}
		else_if = {
			limit = { PREV = { is_miscounts_member = yes } }
			mark_as_miscounts_member = yes
		}
		else_if = {
			limit = { PREV = { is_royal_accord_member = yes } }
			mark_as_royal_accord_member = yes
		}
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] become_puppet of [Prev.GetName] (scripted_effect) exited"
	}
}

unmark_from_current_faction = {
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_from_current_faction [Prev.GetName] (scripted_effect) entered"
	}
	if = {
		limit = { ROOT = { is_nova_legion_member = yes } }
		unmark_as_nova_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_chosen_ones_member = yes } }
		unmark_as_chosen_ones_member = yes
	}
	else_if = {
		limit = { ROOT = { is_lanius_horde_member = yes } }
		unmark_as_lanius_horde_member = yes
	}
	else_if = {
		limit = { ROOT = { is_big_mt_member = yes } }
		unmark_as_big_mt_member = yes
	}
	else_if = {
		limit = { ROOT = { is_boneyard_brotherhood_member = yes } }
		unmark_as_boneyard_brotherhood_member = yes
	}
	else_if = {
		limit = { ROOT = { is_united_front_member = yes } }
		unmark_as_united_front_member = yes
	}
	else_if = {
		limit = { ROOT = { is_western_brotherhood_of_steel_member = yes } }
		unmark_as_western_brotherhood_of_steel_member = yes
	}
	else_if = {
		limit = { ROOT = { is_caesars_legion_member = yes } }
		unmark_as_caesars_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_children_of_mexico_member = yes } }
		unmark_as_children_of_mexico_member = yes
	}
	else_if = {
		limit = { ROOT = { is_children_of_the_gate_member = yes } }
		unmark_as_children_of_the_gate_member = yes
	}
	else_if = {
		limit = { ROOT = { is_daikatana_member = yes } }
		unmark_as_daikatana_member = yes
	}
	else_if = {
		limit = { ROOT = { is_daughters_of_hecate_member = yes } }
		unmark_as_daughters_of_hecate_member = yes
	}
	else_if = {
		limit = { ROOT = { is_denver_defense_network_member = yes } }
		unmark_as_denver_defense_network_member = yes
	}
	else_if = {
		limit = { ROOT = { is_earth_and_sky_member = yes } }
		unmark_as_earth_and_sky_member = yes
	}
	else_if = {
		limit = { ROOT = { is_empire_of_salt_member = yes } }
		unmark_as_empire_of_salt_member = yes
	}
	else_if = {
		limit = { ROOT = { is_equestria_member = yes } }
		unmark_as_equestria_member = yes
	}
	else_if = {
		limit = { ROOT = { is_faithful_member = yes } }
		unmark_as_faithful_member = yes
	}
	else_if = {
		limit = { ROOT = { is_fantasma_cartel_member = yes } }
		unmark_as_fantasma_cartel_member = yes
	}
	else_if = {
		limit = { ROOT = { is_glass_league_member = yes } }
		unmark_as_glass_league_member = yes
	}
	else_if = {
		limit = { ROOT = { is_great_federation_member = yes } }
		unmark_as_great_federation_member = yes
	}
	else_if = {
		limit = { ROOT = { is_great_plains_federation_member = yes } }
		unmark_as_great_plains_federation_member = yes
	}
	else_if = {
		limit = { ROOT = { is_jungle_pact_member = yes } }
		unmark_as_jungle_pact_member = yes
	}
	else_if = {
		limit = { ROOT = { is_kaisers_legion_member = yes } }
		unmark_as_kaisers_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_masters_new_army_member = yes } }
		unmark_as_masters_new_army_member = yes
	}
	else_if = {
		limit = { ROOT = { is_mesoamerican_alliance_member = yes } }
		unmark_as_mesoamerican_alliance_member = yes
	}
	else_if = {
		limit = { ROOT = { is_the_fire_council_member = yes } }
		unmark_as_the_fire_council_member = yes
	}
	else_if = {
		limit = { ROOT = { is_mojave_alliance_member = yes } }
		unmark_as_mojave_alliance_member = yes
	}
	else_if = {
		limit = { ROOT = { is_mormon_alliance_member = yes } }
		unmark_as_mormon_alliance_member = yes
	}
	else_if = {
		limit = { ROOT = { is_nevada_enclave_member = yes } }
		unmark_as_nevada_enclave_member = yes
	}
	else_if = {
		limit = { ROOT = { is_nevada_pact_member = yes } }
		unmark_as_nevada_pact_member = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_league_member = yes } }
		unmark_as_northern_league_member = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_mojave_pact_member = yes } }
		unmark_as_northern_mojave_pact_member = yes
	}
	else_if = {
		limit = { ROOT = { is_phoenix_federation_member = yes } }
		unmark_as_phoenix_federation_member = yes
	}
	else_if = {
		limit = { ROOT = { is_rio_pact_member = yes } }
		unmark_as_rio_pact_member = yes
	}
	else_if = {
		limit = { ROOT = { is_senators_little_helpers_member = yes } }
		unmark_as_senators_little_helpers_member = yes
	}
	else_if = {
		limit = { ROOT = { is_great_confederation_member = yes } }
		unmark_as_great_confederation_member = yes
	}
	else_if = {
		limit = { ROOT = { is_texan_economic_union_member = yes } }
		unmark_as_texan_economic_union_member = yes
	}
	else_if = {
		limit = { ROOT = { is_unbroken_coast_member = yes } }
		unmark_as_unbroken_coast_member = yes
	}
	else_if = {
		limit = { ROOT = { is_western_enclave_member = yes } }
		unmark_as_western_enclave_member = yes
	}
	else_if = {
		limit = { ROOT = { is_order_of_st_joseph_member = yes } }
		unmark_as_order_of_st_joseph_member = yes
	}
	else_if = {
		limit = { ROOT = { is_breach_ferals_member = yes } }
		unmark_as_breach_ferals_member = yes
	}
	else_if = {
		limit = { ROOT = { is_white_sands_compact_member = yes } }
		unmark_as_white_sands_compact_member = yes
	}
	else_if = {
		limit = { ROOT = { is_cartel_faction_member = yes } }
		unmark_as_cartel_faction_member = yes
	}
	else_if = {
		limit = { ROOT = { is_cascadia_pirates_member = yes } }
		unmark_as_cascadia_pirates_member = yes
	}
	else_if = {
		limit = { ROOT = { is_transcascadia_republic_member = yes } }
		unmark_as_transcascadia_republic_member = yes
	}
	else_if = {
		limit = { ROOT = { is_new_california_member = yes } }
		unmark_as_new_california_member = yes
	}
	else_if = {
		limit = { ROOT = { is_the_second_coalition_member = yes } }
		unmark_as_the_second_coalition_member = yes
	}
	else_if = {
		limit = { ROOT = { is_imperium_mexicanum_member = yes } }
		unmark_as_imperium_mexicanum_member = yes
	}
	else_if = {
		limit = { ROOT = { is_mexican_league_member = yes } }
		unmark_as_mexican_league_member = yes
	}
	else_if = {
		limit = { ROOT = { is_midnight_union_member = yes } }
		unmark_as_midnight_union_member = yes
	}
	else_if = {
		limit = { ROOT = { is_big_circle_member = yes } }
		unmark_as_big_circle_member = yes
	}
	else_if = {
		limit = { ROOT = { is_dharma_way_member = yes } }
		unmark_as_dharma_way_member = yes
	}
	else_if = {
		limit = { ROOT = { is_californian_hegemony_member = yes } }
		unmark_as_californian_hegemony_member = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_congress_member = yes } }
		unmark_as_northern_congress_member = yes
	}
	else_if = {
		limit = { ROOT = { is_road_warriors_member = yes } }
		unmark_as_road_warriors_member = yes
	}
	else_if = {
		limit = { ROOT = { is_synergy_alliance_member = yes } }
		unmark_as_synergy_alliance_member = yes
	}
	else_if = {
		limit = { ROOT = { is_vulpes_legion_member = yes } }
		unmark_as_vulpes_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_aurelius_legion_member = yes } }
		unmark_as_aurelius_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_lanius_legion_member = yes } }
		unmark_as_lanius_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_hades_legion_member = yes } }
		unmark_as_hades_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_lucius_legion_member = yes } }
		unmark_as_lucius_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_malpais_legion_member = yes } }
		unmark_as_malpais_legion_member = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_union_member = yes } }
		unmark_as_northern_union_member = yes
	}
	else_if = {
		limit = { ROOT = { is_bloody_electorals_member = yes } }
		unmark_as_bloody_electorals_member = yes
	}
	else_if = {
		limit = { ROOT = { is_canadian_watchdogs_member = yes } }
		unmark_as_canadian_watchdogs_member = yes
	}
	else_if = {
		limit = { ROOT = { is_kingdom_of_manitoba_member = yes } }
		unmark_as_kingdom_of_manitoba_member = yes
	}
	else_if = {
		limit = { ROOT = { is_united_wallers_member = yes } }
		unmark_as_united_wallers_member = yes
	}
	else_if = {
		limit = { ROOT = { is_montana_enclave_member = yes } }
		unmark_as_montana_enclave_member = yes
	}
	else_if = {
		limit = { ROOT = { is_northern_winds_member = yes } }
		unmark_as_northern_winds_member = yes
	}
	else_if = {
		limit = { ROOT = { is_allied_states_member = yes } }
		unmark_as_allied_states_member = yes
	}
	else_if = {
		limit = { ROOT = { is_fifth_world_member = yes } }
		unmark_as_fifth_world_member = yes
	}
	else_if = {
		limit = { ROOT = { is_red_shield_member = yes } }
		unmark_as_red_shield_member = yes
	}
	else_if = {
		limit = { ROOT = { is_wardens_of_white_member = yes } }
		unmark_as_wardens_of_white_member = yes
	}
	else_if = {
		limit = { ROOT = { is_miscounts_member = yes } }
		unmark_as_miscounts_member = yes
	}
	else_if = {
		limit = { ROOT = { is_royal_accord_member = yes } }
		unmark_as_royal_accord_member = yes
	}
	if = {
		limit = { has_global_flag = debug_logs }
		log = "[GetDateText]: [This.GetName] unmark_from_current_faction [Prev.GetName] (scripted_effect) exited"
	}

}
# vim: set ft=pdx ts=2 sw=2 tw=79 :
